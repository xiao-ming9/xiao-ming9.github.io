<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>php</title><meta name="description" content="Wechat:934933088"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1 * new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-M2RT7SDT3L', 'auto');
ga('send', 'pageview');</script><!-- End Google Analytics -->
<!-- Baidu Analytics --><script>var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?" + '54ebb03ad7ad5b762ac8ff7958df6d3f';
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();</script><!-- End Baidu Analytics --><link rel="icon" href="https://qiniu.xiaoming.net.cn/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E6%A0%87.jpeg"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">silverming's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">php</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#静态页面交互"><span class="toc-text">静态页面交互</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP基本规则"><span class="toc-text">PHP基本规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#POST"><span class="toc-text">$_POST</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echo"><span class="toc-text">echo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#纯文本排版"><span class="toc-text">纯文本排版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mail函数"><span class="toc-text">mail函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#连接到MYSQL"><span class="toc-text">连接到MYSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#用PHP脚本插入数据"><span class="toc-text">用PHP脚本插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用PHP函数与数据库通信"><span class="toc-text">使用PHP函数与数据库通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用PHP获取数据库表的数据"><span class="toc-text">使用PHP获取数据库表的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WHILE循环"><span class="toc-text">WHILE循环</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#现实实际应用"><span class="toc-text">现实实际应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if语句"><span class="toc-text">if语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证变量的PHP函数"><span class="toc-text">验证变量的PHP函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码"><span class="toc-text">可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用自身表单"><span class="toc-text">引用自身表单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach循环"><span class="toc-text">foreach循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#利用包含文件共享脚本数据"><span class="toc-text">利用包含文件共享脚本数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#规划管理页面和用户页面"><span class="toc-text">规划管理页面和用户页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#保证应用安全"><span class="toc-text">保证应用安全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#首部"><span class="toc-text">首部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">Guitar Wars </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#避免SQL注入"><span class="toc-text">避免SQL注入</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#构建个性化的Web应用"><span class="toc-text">构建个性化的Web应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP加密函数"><span class="toc-text">PHP加密函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户注册"><span class="toc-text">用户注册</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie"><span class="toc-text">Cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#会话"><span class="toc-text">会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在页面中同时使用cookie和会话"><span class="toc-text">在页面中同时使用cookie和会话</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定制函数"><span class="toc-text">定制函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页技术"><span class="toc-text">分页技术</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#正则表达式"><span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#量词"><span class="toc-text">量词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符类"><span class="toc-text">字符类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基础知识点补充"><span class="toc-text">基础知识点补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-使用PHP格式化字符串"><span class="toc-text">3. 使用PHP格式化字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-PHP中的日期和时间函数"><span class="toc-text">4. PHP中的日期和时间函数</span></a></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/php"><i class="tag post-item-tag">php</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">php</h1><time class="has-text-grey" datetime="2018-04-20T16:00:00.000Z">2018-04-21</time><article class="mt-2 post-content"><h1 id="静态页面交互"><a href="#静态页面交互" class="headerlink" title="静态页面交互"></a>静态页面交互</h1><p>PHP是一种服务器端语言，服务器运行一个PHP脚本时，最终结果都是纯HTML和CSS</p>
<p>PHP脚本必须放在一个Web服务器上运行，否则将无法工作</p>
<h2 id="PHP基本规则"><a href="#PHP基本规则" class="headerlink" title="PHP基本规则"></a>PHP基本规则</h2><ol>
<li>PHP开始和结束与HTML格式一样,<code>中间的PHP代码用 &lt;?php 和 ?&gt; 包围</code></li>
<li>每个PHP语句都必须以一个分号(;)结束</li>
<li>如果Web页面上有PHP代码，最好将Web服务器上的文件命名为拓展名是.php而不是.html</li>
<li><code>PHP变量名总是以一个美元符号($)开头</code></li>
<li>变量名长度至少一个字符，第一个字母必须是下划线或字母，后面只能是是数字、字母、下划线</li>
<li><code>变量名区分大小写</code>，<code>命令不区分大小写</code></li>
<li><code>&quot;.&quot;用于连接两个字符串</code><a id="more"></a>
<h2 id="POST"><a href="#POST" class="headerlink" title="$_POST"></a>$_POST</h2></li>
</ol>
<ul>
<li>$_POST是一个特殊的变量，称为超级全局变量，它是一个存储位置集合，用于存储来自Web表单的数据</li>
<li>$_POST是一个数组，当有人提交表单时，表单中的数据就会存储在$_POST数组中，这个数组的任务就是把数据传送到脚本<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><code>echo命令用于将额外的信息作为HTML内容输入到浏览器，在后面加上&lt;br&gt;标记加就会在HTML中加上换行</code></li>
</ul>
<pre><code class="php">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;xxxxxx&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h2&gt;xxxxx&lt;/h2&gt;

&lt;?php 
     $when_it_happened = $_POST[&#39;whenithappened&#39;];
     $how_long = $_POST[&#39;howlong&#39;];
     $alien_description = $_POST[&#39;aliendescription&#39;];
     $fang_spotted = $_POST[&#39;fangspotted&#39;];
     $email = $_POST[&#39;email&#39;];

     echo &#39;Thanks for submitting the form.&lt;br /&gt;&#39;;
     echo &#39;You were abducted&#39; . $when_it_happened;
     echo &#39; and were gone for &#39; . $show_long . &#39;&lt;br /&gt;&#39;;
     echo &#39;Describe them: &#39; . $alien_descroption . &#39;&lt;br /&gt;&#39;;
     echo &#39;Was Fang there?&#39; . $fang_spotted . &#39;&lt;br /&gt;&#39;;
     echo &#39;Your email address is&#39; . $email;
?&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="纯文本排版"><a href="#纯文本排版" class="headerlink" title="纯文本排版"></a>纯文本排版</h2><p>换行使用 \n ,但<code>必须在双引号中使用</code>，<code>单引号字符串只支持 \&#39; 和 \\</code></p>
<blockquote>
<p>$msg = “$name was abducted $when_it_happened and was gone for $show_long.\n”</p>
</blockquote>
<h2 id="mail函数"><a href="#mail函数" class="headerlink" title="mail函数"></a>mail函数</h2><p>mail函数能够发送email消息</p>
<blockquote>
<p><code>mail ($to , $subject , $mag );</code><br>三者为必要参数，<code>$to表示发送的email地址，$subject表示消息主题，$msg表示消息体</code></p>
</blockquote>
<ul>
<li>指定email发送者的地址时必须将文本’from’追加在email地址前<blockquote>
<p>mail($to, $subject, $mag, ‘from:’ <code>.</code> $email);</p>
</blockquote>
<h1 id="连接到MYSQL"><a href="#连接到MYSQL" class="headerlink" title="连接到MYSQL"></a>连接到MYSQL</h1><h2 id="用PHP脚本插入数据"><a href="#用PHP脚本插入数据" class="headerlink" title="用PHP脚本插入数据"></a>用PHP脚本插入数据</h2><h3 id="使用PHP函数与数据库通信"><a href="#使用PHP函数与数据库通信" class="headerlink" title="使用PHP函数与数据库通信"></a>使用PHP函数与数据库通信</h3></li>
</ul>
<ol>
<li><code>mysqli_connect()</code>:连接数据库，参数提供<code>服务器位置、用户名、口令</code>来得到与Mysql数据库交互的许可，另外还要提供<code>数据库名</code>，与一个特定数据库连接<blockquote>
<p>数据库位置可以是域名、IP地址或者localhost</p>
</blockquote>
</li>
</ol>
<blockquote>
<p><code>参数名要用单引号括起来</code></p>
</blockquote>
<blockquote>
<p>第四个参数可选，可以另外用<code>mysqli_select_db($连接名,&#39;数据库名&#39;);</code></p>
</blockquote>
<ol start="2">
<li><p>创建一个SQL查询，并把它作为一个串存储在一个PHP变量中</p>
</li>
<li><p><code>mysqli_query()</code>:执行查询，与MySQL数据库服务器通信，向表中增加数据，需要传入<code>第一步创建的连接名和第二部中存放查询的变量名</code></p>
</li>
<li><p><code>mysqli_close() : 关闭数据库连接</code>，<code>传入连接名</code></p>
</li>
<li><p><code>die( ) : 如果出问题就发回一个消息，并中止所有工作</code></p>
<pre><code class="php">&lt;?php
 $dbc = mysqli_connect(&#39;数据库位置&#39;,&#39;用户名&#39;,&#39;口令&#39;,&#39;数据库名&#39;)
      or die(&#39;Error connecting to MySQL serve.&#39;);

 $query = &quot;INSERT INTO aliens_abduction (first_name,last_name,when_it_happened,how_long,&quot;.
     &quot;how_many,alien_description,what_they_did,fang_spotted,other,email)&quot;.
     &quot;VALUES (&#39;Sally&#39;,&#39;Jones&#39;,&#39;3 days ago&#39;,&#39;1 day&#39;,&#39;four&#39;,&#39;green with six tentacles&#39;,&quot;.
     &quot;&#39;We just talked and played with a dog&#39;,&#39;yes&#39;,&#39;I may have seen your dog.Contact me.&#39;,&quot;.
     &quot;&#39;sally@gregs-list.net&#39;)&quot;;

 $result = mysqli_query($dbc,$query)
   or die (&#39;Error querying database.&#39;);

 mysqli_close($dbc);
?&gt;</code></pre>
<h3 id="使用PHP获取数据库表的数据"><a href="#使用PHP获取数据库表的数据" class="headerlink" title="使用PHP获取数据库表的数据"></a>使用PHP获取数据库表的数据</h3></li>
</ol>
<ul>
<li><p>使用<code>mysqli_fetch_array( )获取查询结果</code></p>
<blockquote>
<p>$row = mysqli_fetch_array($result);</p>
</blockquote>
</li>
<li><p>mysqli_fetch_array()函数将一个数据行存储在一个数组中</p>
</li>
<li><p>每次只能获取到查询结果中<code>一行数据</code>,反复调用会逐个往下读取</p>
<h4 id="WHILE循环"><a href="#WHILE循环" class="headerlink" title="WHILE循环"></a>WHILE循环</h4><pre><code>while(true) {
  循环迭代内容;
}</code></pre></li>
<li><p><code>while循环可以调用mysqli_fetch_array()检查结果数据的各行，一次处理一行，直到达到数据的末尾</code></p>
</li>
<li><p>如果mysqli_fetch_array()查询不到结果，就会返回false</p>
<pre><code>while($row= mysqli_fetch_array($result)) {
  echo $row[&#39;first_name&#39;] . &#39; &#39; . $row[&#39;last_name&#39;] . &#39; &#39; . $row[&#39;email&#39;] . &#39;&lt;br/&gt;&#39;;
}</code></pre><h1 id="现实实际应用"><a href="#现实实际应用" class="headerlink" title="现实实际应用"></a>现实实际应用</h1><h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><pre><code>if(测试条件) {
    执行语句；
}
else{
  执行语句;
}</code></pre></li>
<li><p>测试条件中可以比较字符串，根据字母表，<code>a被认为小于z</code></p>
</li>
<li><p><code>0和空字符串会计算相等</code></p>
<h2 id="验证变量的PHP函数"><a href="#验证变量的PHP函数" class="headerlink" title="验证变量的PHP函数"></a>验证变量的PHP函数</h2></li>
<li><p><code>isset( )函数：测试一个变量是否已经赋值</code></p>
</li>
<li><p><code>empty( )函数：确定一个变量是否包含空值(0,空串（&#39; &#39;或&quot; &quot;),false,NULL),包含时返回true</code></p>
<blockquote>
<p><code>若一个变量不存在，则empty( )会返回true</code></p>
</blockquote>
</li>
<li><p>非操作符(!)</p>
</li>
<li><p>逻辑与（&amp;&amp;）和逻辑或（||），如果第一个条件结果已经足够，不会再算下一个</p>
<h2 id="可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码"><a href="#可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码" class="headerlink" title="可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码"></a>可以根据需要开始和结束PHP代码块，在PHP脚本中输出HTML代码</h2></li>
<li><p>HTML代码放在<code>两个&lt;?php    ?&gt;之间</code></p>
<h2 id="引用自身表单"><a href="#引用自身表单" class="headerlink" title="引用自身表单"></a>引用自身表单</h2></li>
<li><p>HTMl表单作为PHP脚本的一部分，而该PHP脚本将处理这个表单，那么这个表单就称为<strong>自引用表单</strong></p>
</li>
<li><p>将表单动作指向脚本</p>
<blockquote>
<p><code>&lt;form action=&quot;sendemail.php&quot; method=&quot;POST&quot;&gt;</code></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>&#60;form&#62;标记的action属性将一个表单与处理该表单的一个脚本相连接，在这里正是包含该表单的同一个sendmai.php脚本</p>
</blockquote>
<ul>
<li><p>可以利用PHP内置的<code>超级全局变量$_SERVER[&#39;PHP_SELF&#39;]</code> ,其中存储了当前脚本的名字，<code>必须使用echo回显输出它的值作为HTML代码的一部分</code></p>
<blockquote>
<p><code>&lt;form action=&quot;&lt;?php echo $_SERVER[&#39;PHP_SELF&#39;]; ?&gt;&quot; method=&quot;post&quot;&gt;</code></p>
</blockquote>
</li>
<li><p>如果表单能够记住上一次提交时输入的正确数据则称为一个<strong>粘性表单</strong></p>
<blockquote>
<p>可以input标记的value属性设置输入表单域，<code>用echo从一个PHP变量为value属性生成一个值</code></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>&lt;input name=”subject” type=”text” value=”<?php echo $subject;  ?>“</p>
</blockquote>
<pre><code class="php">&lt;?php
   if (isset($_POST[&#39;submit&#39;])) {  //检查$_POST[&#39;submit&#39;]的值，如果表单从未提交过，则该变量未设置
       $from = &#39;elmer@makmeelvieis.com&#39;;
       $subject = $_POST[&#39;subject&#39;];
       $text = $_POST[&#39;elvismail&#39;];
       $output_form = false;

       if (empty($subject) &amp;&amp; empty($text)){
           //都没有输入
           echo &#39;You forgot the email subject and body text.&lt;br /&gt;&#39;;
           $output_form = true;
       }

       if (empty($subject) &amp;&amp; (!empty($text))){
           //值只输入了text
           echo &#39;You forgot the email subject.&lt;br /&gt;&#39;;
           $output_form = true;
       }

       if ((!empty($subject)) &amp;&amp; empty($text)){
           echo &#39;You forgot the email body text.&lt;br /&gt;&#39;;
           $output_form = true;
       }

       if ((!empty($subject)) &amp;&amp; (!empty($text))) {
           //发送邮件
       }
   }

   else {
       $output_form = true;
   }

   if (putput_form) {
       ?&gt; //结束PHP语句，开始HTML语句

       &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER[&#39;PHP_SELF&#39;]; ?&gt;&quot;&gt;
          &lt;label for=&quot;subject&quot;&gt;Subject of email:&lt;/label&gt;&lt;br /&gt;
          &lt;input id=&quot;subject&quot; name=&quot;subject&quot; type=&quot;text&quot; size=&quot;30&quot; value=&quot;&lt;?php echo $subject; ?&gt;&quot;/&gt;&lt;br /&gt;
          &lt;label for=&quot;elvismail&quot;&gt;Body of email:&lt;/label&gt;&lt;br /&gt;
          &lt;textarea id=&quot;elvismail&quot; name=&quot;elvisamil&quot; rows=&quot;8&quot; cols=&quot;40&quot;&gt;&lt;?php echo $text ?&gt;&lt;/textarea&gt;&lt;br /&gt;
          &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot;/&gt;
       &lt;/form&gt; 
  &lt;?php 
   }
   ?&gt;</code></pre>
<h2 id="foreach循环"><a href="#foreach循环" class="headerlink" title="foreach循环"></a>foreach循环</h2><p>foreach循环取一个数组，并循环处理数组中的每个元素而无需测试条件或训环计数器</p>
<pre><code>foreach ($customers as $customer) {
    echo $customer/执行语句;
};</code></pre><ul>
<li><p>第一个参数为希望循环处理的数组</p>
</li>
<li><p>第二个参数：指定一个变量，随着循环逐个处理数组中的每一个元素，会将该元素临时存储在这个变量中</p>
</li>
<li><p>循环内部可以用echo访问各个元素或使用执行语句</p>
<pre><code>foreach($_POST[&#39;todelete&#39;] as $delete_id) {
  $query = &quot;DELETE FROM email_list WHERE id=$delete_id&quot;;
  mysql_query($dbc,$query)
     or die(&quot;Error querying database.&quot;);
</code></pre></li>
</ul>
<p>echo ‘<input type="checkbox" value=" '. $row['id'] . '" name="todelete[]">‘<br>}</p>
<pre><code>&gt; 上面代码中的tolerate[]，方括号会让$_POST创建一个数组
# 使用存储在文件中的数据

- 把照片等存储在文件中，在数据表中增加一个文件名的列

- 用户提交表单时，二进制图像文件上传到服务器，服务器上的一个文件夹接收并存储这个图像文件

- `$_FILES内置超级全局变量`允许访问上传文件的有关信息：screenshot为input中file对应的name
&gt; 1. $_FILES[&#39;screenshot&#39;][&#39;name&#39;]：上传文件的文件名
&gt; 2. $_FILES[&#39;screenshot&#39;][&#39;type&#39;]：上传文件的类型
&gt; 3. $_FILES[&#39;screenshot&#39;][&#39;size&#39;]：上传文件的大小（字节数）
&gt; 4. $_FILES[&#39;screenshot&#39;][&#39;tmp_name&#39;]：上传文件在服务器上的临时位置
&gt; 5. $_FILES[&#39;screenshot&#39;][&#39;error&#39;]：文件上传的错误码，0表示成功，其他值表示失败
- `is_file()函数`：用于查看一个`文件是否确实存在`
- `filesize()函数`：用于检查并`确保文件不是空文件，空文件返回0`
- `move_uploaded_file()函数`：接收一个文件的`源位置`和`目标位置`，然后负责完成`文件移动`
&gt; **move_uploaded_file($_FILES[&#39;screenshot&#39;][&#39;tmp_name&#39;],$target);**
- 通常把文件夹建在www中即可
- 为防止文件名相同，可以在文件名前面加上当前服务器时间
&gt; $target = GW_UPLOADPATH . time( ) . $screenshot
- `define用于创建常量`
&gt; `define (&#39;常量名&#39;，&#39;常量的值&#39;);`
```php
&lt;?php
   define(&#39;GW_UPLOADPATH&#39;,&#39;images/&#39;);

   if (isset($_POST[&#39;submit]&#39;)) {
       $name = $_POST[&#39;name&#39;];
       $score = $_POST[&#39;score&#39;];
       $screenshot = $_FILES[&#39;screenshot&#39;][&#39;name&#39;];

       if(!empty($name) &amp;&amp; !empty($score) &amp;&amp; !empty($screenshot)) {
           $target = GW_UPLOADPATH . $screenshot;
           if(move_uploaded_file($_FILES[&#39;screenshot&#39;][&#39;tmp_name&#39;],$target) {
               $bcd = mysqli_connect(&#39;位置&#39;,&#39;用户名&#39;,&#39;密码&#39;,&#39;表名&#39;);
               $query = &quot;INSERT INTO guitarwars VALUES (0,NOW(),&#39;$name&#39;,&#39;$score&#39;,&#39;$screnshot&#39;)&quot;;
               mysqli_query($dbc,$query);

               echo &#39;&lt;p&gt;Thanks for adding your new high score!&lt;/p&gt;&#39;;
               echo &#39;&lt;p&gt;&lt;strong&gt;Name:&lt;/strong&gt;&#39; . $name . &#39;&lt;br /&gt;&#39;;
               echo &#39;&lt;strong&gt;Score:&lt;/strong&gt;&#39; . $score . &#39;&lt;br /&gt;&#39;;
               acho &#39;&lt;img src=&quot;&#39; . GW_UPLOADPATH . $screenshot . &#39;&quot; alt=&quot;Score image&quot;/&gt;&lt;/p&gt;&#39;;
               echo &#39;&lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;&amp;lt;&amp;lt; Back to high scored&lt;/a&gt;&lt;/p&gt;&#39;;
           }
       }
   }</code></pre><h2 id="利用包含文件共享脚本数据"><a href="#利用包含文件共享脚本数据" class="headerlink" title="利用包含文件共享脚本数据"></a>利用包含文件共享脚本数据</h2><p><code>require_once语句负责将一个脚本包含在另一个脚本中</code></p>
<blockquote>
<p>require_once(‘xxxx.php’);</p>
</blockquote>
<ul>
<li>如果未找到包含文件，require_once会产生一个错误</li>
<li>once保证它文件不会被意外包含多次</li>
<li><code>unlink()函数从服务器删除一个文件，用@以防在文件上传未成功时显示错误报告</code><blockquote>
<p>@ 能屏蔽掉出错信息</p>
</blockquote>
<h2 id="规划管理页面和用户页面"><a href="#规划管理页面和用户页面" class="headerlink" title="规划管理页面和用户页面"></a>规划管理页面和用户页面</h2></li>
<li><code>超级全局变量$_GET数组</code>：脚本的URL可以用于将数据作为一个GET请求传递</li>
<li>GET与POST区别：<blockquote>
<p>POST请求只能从表单发出，而GET请求可以打包为URL</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>GET通常用于从服务器获取数而不对服务器造成任何影响，而POST适用于那些影响服务器状态的请求，如发送一个改变数据库的INSERT或DELETE语句</p>
</blockquote>
<blockquote>
<p>GET传递的数据在URL是可见的，而POST数据是不可见的</p>
</blockquote>
<ul>
<li>可以在一个脚本里对GET和POST请求做出响应，比如：脚本可以显示确认页面，作为对GET数据的响应，在提交表单时使用POST，但<code>此时&lt;form action =&quot;脚本名&quot;&gt;,不能使用$_SERVER[&#39;PHP_SELF&#39;],因为它会包含作为GET通过URL查询串传递的所有数据，要确保没有GET数据</code><h1 id="保证应用安全"><a href="#保证应用安全" class="headerlink" title="保证应用安全"></a>保证应用安全</h1><h2 id="首部"><a href="#首部" class="headerlink" title="首部"></a>首部</h2>所有Web页面都需要借助于首部来传递，首部是一个短小的文本信息，包含所请求或传送的特定指令</li>
<li>大多数首部由一个名/值对组成，名与值之间用冒号分隔<pre><code>GET /index.php HTTP/1.1 (第一个首部不是一个名/值对，这是页面的GET请求)
HOST: www.guitarwars.net
User-Agent: Mozilla/5.0......(这个首部指定了发出请求的浏览器)
</code></pre></li>
</ul>
<p>HTTP/1.1 200 OK (这个首部是服务器的HTTP响应)<br>content-Type : text/html(这个首部告诉浏览器，页面内容是HTML代码，而不是纯文本)</p>
<pre><code>- 在PHP中可以利用`header()函数将首部从服务器发送给浏览器的首部`

- header()函数允许从php脚本创建和发送首部

- 这个函数必须在`向浏览器发送任何具体内容之前调用`，在首部之前即使只是发送一个空格或字符，浏览器也会报错，所以`header()函数要放在PHP脚本的所有PHP代码之前`
&gt; header(&#39;Content-Type：text/html&#39;);
### 需要两个特定的首部来请求一个Web页面的认证
&gt; 这个首部让浏览器知道用户没有得到查看页面的授权 `HTTP/1.1 401 Unauthorized`

&gt; 这个首部要求浏览器尝试提示用户输入一个用户名和口令来进行验证 `WWW-Authenticate: Basic realm= &quot;Guitar Wars&quot;`(Basic realm（基本域）用于唯一标识这个特定认证的一个短语，它会出现在认证窗口)

&gt; 基本域定义了一个特定用户名和口令所保护的安全区，一旦输入对应一个给定域的用户名和口令，后续不再需要认证 

- 如果认证失败，使用PHP的`exit()函数来显示一个消息，并立即退出脚本`</code></pre><p> exit (‘ <h2>Guitar Wars </h2>Sorry, you must enter a valid’. ‘user name and password to access this page.’); </p>
<pre><code>
- `$_SERVER超级全局变量存储了输入到验证窗口的用户名还有密码`
&gt; `$_SERVER[&#39;PHP_AUTH_USER&#39;/&#39;PHP_AUTH_PW&#39;]`
### 其他一些首部
1. </code></pre><?php
     header('Location: http://www.guitarwars.net/about.php');
?>
<pre><code>&gt; 这个首部称为一个位置首部，将当前页面重定向到另一个网站上

2.</code></pre><?php
    header('Refresh: 5;url=http://www.guitarwars.net/about.php'); 
    echo 'In 5 seconds you will be taken to the About page.';
?>
<pre><code>&gt; 这个首部称为刷新首部，会在经过一段时间后刷新页面

3. 
```php
&lt;?php
     header(&#39;Content-Type:text/plain&#39;);
     echo &#39;This &lt;strong&gt;text&lt;/strong&gt; won&#39;t actually be bold.&#39;;
?&gt;</code></pre><blockquote>
<p>这个首部称为内容型首部，输出到浏览器的文本完全原样显示而无任何特殊的格式化</p>
</blockquote>
<pre><code class="php">&lt;?php
   //在脚本最前面将用户名和口令存储在变量中
   $username = &#39;rock&#39;;
   $password = &#39;roll&#39;;

   //利用$_SERVER超级全局变量可以访问用户在认证窗口输入的用户名和口令
   if (!isset($_SERVER[&#39;PHP_AUTH_USER&#39;])||!isset($_SERVER[&#39;PHP_AUTH_PW&#39;])
   ||($_SERVER[&#39;PHP_AUTH_USER&#39;]!=$username)||
   ($_SERVER[&#39;PHP_AUTH_PW&#39;]!=$password)) {
       //两个head函数调用会将这些首部发送到浏览器
       header(&#39;HTTP/1.1 401 Unauthorized&#39;);
       header(&#39;WWW-Authenticate:Basic realm=&quot;Guitar Wars&quot; &#39;);
       exit(&#39;&lt;h2&gt;Guitar Wars&lt;/h2&gt;Sorry,you must enter a valid user name and password to&#39; .
       &#39;access this page.&#39;);
   }
?&gt;

//只有在首部已经发送并得到处理之后，才可能向浏览器传送HTML代码
&lt;html&gt;
...
&lt;/html&gt;</code></pre>
<h2 id="避免SQL注入"><a href="#避免SQL注入" class="headerlink" title="避免SQL注入"></a>避免SQL注入</h2><ul>
<li><p>PHP内置函数<code>trim( )</code>,能够<code>去除表单数据的前导或末尾的空格</code></p>
</li>
<li><p><code>mysqli_real_escape_string()</code>:能够对特殊字符进行转义，从而无法影响SQL查询</p>
<pre><code>$name = mysqli_real_escape_string($dbc, trim($_POST[&#39;name&#39;]));
$score = mysqli_real_escape_string($dbc, trim($_POST[&#39;score&#39;]));
$screnshot = mysqli_real_escape_string($dbc, trim($_FILES[&#39;screenshot&#39;][&#39;name&#39;]));</code></pre><blockquote>
<p>mysqli_real_escape_string()被认为是一种数据库函数，<code>需要传入一个数据库连接位置</code></p>
</blockquote>
</li>
<li><p>PHP <code>is_numeric( )函数</code>：如果传入的是数字，返回true，否则返回false</p>
<blockquote>
<p>is_numeric(‘$score’)</p>
</blockquote>
<h1 id="构建个性化的Web应用"><a href="#构建个性化的Web应用" class="headerlink" title="构建个性化的Web应用"></a>构建个性化的Web应用</h1><h3 id="PHP加密函数"><a href="#PHP加密函数" class="headerlink" title="PHP加密函数"></a>PHP加密函数</h3><blockquote>
<p>shal( ) 和md5( )</p>
</blockquote>
</li>
</ul>
<p><code>mysqli_num_rows()用于返回相应参数的行的数量</code></p>
<h2 id="用户注册"><a href="#用户注册" class="headerlink" title="用户注册"></a>用户注册</h2><ul>
<li><p>如果用户输入的用户名已经存在，使用$username=””清空$usename变量</p>
</li>
<li><p>使用HTTP认证在浏览器关闭或用户手工清除HTTP认证之前，用户永远不会注销，HTTP认证将数据永久存储在客户端，但工作结束时不允许将其删除</p>
</li>
</ul>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>cookie是浏览器存储在用户计算机上的一小段数据，在关闭浏览器之后仍然存在，但可以根据需要删除，可以跨脚本、多个浏览器存在</p>
<p>cookie可以有一个到期日期，达到到期日期之后，cookie就会被销毁，如果创建一个没有到期日期的cookie，它会在浏览器关闭时被销毁</p>
<ul>
<li><strong>用PHP使用cookie</strong></li>
</ul>
<p>PHP通过一个名为<code>setcookie()</code> 函数和一个名为 <code>$_COOKIE</code>的超级全局变量提供对cookie的访问；setcookie()函数<code>用于设置一个cookie的值以及一个可选的到期日期</code>，$_COOKIE用于<code>获取一个cookie的值</code></p>
<blockquote>
<p><code>setcookie(&#39;cookie的名&#39;,&#39;cookie的值&#39;,(可选的参数，到期日期))；</code></p>
</blockquote>
<p>cookie总是作为文本存储，所以即使用户的值一个数字，也要<code>使用单引号（&#39;&#39;）</code></p>
<blockquote>
<p><code>$_COOKIE(&#39;cookie的名&#39;)</code>：获取相对应的的cookie的值</p>
</blockquote>
<ul>
<li><code>$_SERVER[&#39;HTTP_HOST&#39;]</code>：返回服务器地址</li>
<li><code>dirname( )</code>：返回去掉文件名的目录名</li>
<li>要删除一个cookie，只需要把时间设置为<code>过去的一个时间(以秒为单位)</code><pre><code>setcookie(&#39;username&#39;,&#39;sidneyk&#39;,time()+/-(60*60*8));
</code></pre></li>
</ul>
<pre><code>
```html
&lt;?php
    require_once(&#39;connectvars.php&#39;);

    //错误消息存储在一个变量中
    $error_msg = &quot;&quot;;

    //检查use_id cookie，查看用户是否登录
    if (!isset($_COOKIE[&#39;user_id&#39;])){
       //如果没有登录，检查是否已经提交登录数据
       if(isset($_POST[&#39;submit&#39;])){
           //连接数据库
           $dbc = mysql_connect(地址，用户名，密码，数据表名)
           $user_username = mysqli_real_escape_string($dbc,trim($_POST[&#39;username&#39;]));
           $user_password = mysqli_real_escape_string($dbc,trim($_POST[&#39;password&#39;]));

           if (!empty($user_username) &amp;&amp; !empty($user_password)) {
               $query = &quot;SELECT user_id,username FROM 表名 WHERE username = &#39;$user_username&#39; AND &quot; . 
               &quot;password = SHA(&#39;$user_password&#39;)&quot;;
               $data = mysqli_query($dbc, $query);

               if(mysqli_num_rows($data) ` 1) {
                   $row = mysqli_fetch_array($data);
                   // 通过设置user_id和username cookie完成用户登录
                   setcookie(&#39;user_id&#39;,$row[&#39;user_id&#39;]);
                   setcookie(&#39;username&#39;,$row[&#39;username&#39;]);
                   $home_url = &#39;http://&#39; . $_SERVER[&#39;HTTP_HOST&#39;] . dirname($_SERVER[&#39;PHP_SELE&#39;]) . &#39;/index.php&#39;;
                   //登陆成功时将用户重新定向到主页
                   header(&#39;Location:&#39; . $home_url);
               }
               else {
                   $error_msg = &#39;Sorry,you must enter a valid username and password to log in.&#39;;
               }
           }
           else{
                $error_msg = &#39;Sorry,you must enter your username and psaaword to log in.&#39;; 
            }
       }
    }
?&gt;

&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;Mismatch - Log In&lt;/title&gt;
   &lt;link rel=&quot;styleshet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
     &lt;h3&gt;Mismatch - Log In&lt;/h3&gt;
     &lt;?php 
         //如果用户此时仍未登录，继续提醒错误消息
         if (empty($_COOKIE[&#39;user_id&#39;])){
             echo &#39;&lt;p class = &quot;error&quot;&gt;&#39; . $error_msg . &#39;&lt;/p&gt;&#39;;
    ?&gt;

    //这是表单内容
    &lt;form method =&quot;post&quot; action =&quot;&lt;?php echo $_SERVER[&#39;PHP_SELF&#39;];?&gt;&quot;&gt;
      &lt;fieldset&gt;
         &lt;legend&gt;Log In&lt;/legend&gt;
         &lt;label for =&quot;username&quot;&gt;Username:&lt;/label&gt;
         &lt;input type =&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot;
         value=&quot;&lt;?php if (!empty($user_username)) echo $user_username; ?&gt;&quot; /&gt;&lt;br /&gt;
         &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
         &lt;input type=&quot;text&quot; id=&quot;password&quot; name=&quot;password&quot;/&gt;
      &lt;/fieldset&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Log In&quot; name=&quot;submit&quot; /&gt;
    &lt;/form&gt;

    &lt;?php
         }
         else{
             echo(&#39;&lt;p class=&quot;login&quot;&gt;You are logged in as&#39; . $_COOKIE[&#39;username&#39;] . &#39;.&lt;/p&gt;&#39;);
         }
&lt;/body&gt;
&lt;/html&gt;</code></pre><pre><code class="php">&lt;?php
  //只有登陆了才能注销用户
  if(isset($_COOKIE[&#39;user_id&#39;]) {
      setcookie(&#39;user_id&#39;,&#39;&#39;,time()-3600);
      setcookie(&#39;username&#39;,&#39;&#39;,time()-3600);
  }
  //重定向到主页，构造一个绝对URL
  $home_url = &#39;http://&#39; . $_SERVER[&#39;HTTP_POST&#39;] . dirname($_SERVER[&#39;PHP_SELF&#39;]). &#39;/index.php&#39;;
  header(&#39;Location:&#39; .$home_url);
?&gt;</code></pre>
<h2 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h2><p>会话允许将一小段数据持久的存储在服务器上，而不依赖于客户端，由于都存储在服务器上，更加安全可靠</p>
<p>可以在任意时刻删除一个会话变量</p>
<p>会话往往在用户关闭浏览器时就结束，会自动消除会话变量</p>
<p>PHP <code>session_start()函数开始一个会话，并允许在会话变量中存储数据</code></p>
<p>PHP <code>session_destroy()函数结束一个会话</code></p>
<p><code>用$_SESSION超级变量设置会话变量</code></p>
<blockquote>
<p>$_SESSION[‘username’]=’要存储的值’；（要存储的值直接赋给$_SESSION超级全局变量）</p>
</blockquote>
<ul>
<li><p>删除会话变量<br>使用session_destroy()结束会话时，不会销毁会话变量，如果要在关闭浏览器之前清空会话变量，`把$_SESSION超级全局变量设置成一个空数组</p>
<blockquote>
<p><code>$_SESSION = array( );</code> 这个代码会清除当前会话中的所有会话变量</p>
</blockquote>
</li>
<li><p>如果浏览器启用cookie，会话在后台实际上会使用cookie临时存储会话的ID，所以要关闭会话，还要删除浏览器自动创建的cookie，<strong>如果会话使用cookie来帮助记住会话ID，这个ID会存储在以会话命名的一个cookie中</strong></p>
<blockquote>
<p>cookie的名可以使用<code>session_name()函数得到</code></p>
</blockquote>
<pre><code>if (isset($_COOKIE[session_name()])) {
  setcookie(session_name(),&#39;&#39;,time()-3600);
}</code></pre></li>
<li><p>如果没启用cookie，则通过每个页面的URL传递ID</p>
<h2 id="在页面中同时使用cookie和会话"><a href="#在页面中同时使用cookie和会话" class="headerlink" title="在页面中同时使用cookie和会话"></a>在页面中同时使用cookie和会话</h2><pre><code>$_SESSION[&#39;user_id&#39;]=$row[&#39;user_id&#39;];
setcookie(&#39;user_id&#39;,$row[&#39;user_id&#39;],time()+(60*60*24*30));
</code></pre></li>
</ul>
<p>$_SESSION = array();<br>setcookie(session_name(),’’,time()-3600);<br>setcookie(‘user_id’,$row[‘user_id’],time()-3600);</p>
<p>$_SESSION[‘user_id’] = $_COOKIE[‘user_id’];</p>
<pre><code>## 消除重复代码
- 模板：一个包含文件的集合
# 收获数据
模式：对数据库中的数据（表和列）以及其他相关对象和它们如何连接的描述称为一个模式
- `array_push()函数`：`将一个新元素追加到数组后面`，是数组大小增加1
&gt; array_push($topicIDs,$row[&#39;topic_id&#39;]);

- 三元运算符：（ 条件 ？A：B ）
- for循环
- `count（）函数返回数组中元素的个数`
- 搜索MySQL数据库表的一行的结果存储在一个数组中，则某一行的某一列的值表示为：`$数组名[某一行i][ 某一列的列名]`
- array_slice()：用于抽取函数的一片，第一个参数指定数组，第二个参数指定从哪个元素开始，第三个指定个数（默认到结尾）
&gt; `array_slice($a,1,3)`:从第二个元素开始，返回三个

# 串与定制函数
- `explode()函数`：可以将一个串分解为单独的子串数组，explode()函数根据一个指定符号将一个串分解为一个子串数组，`第一个参数指定由什么符号，可以指定一个或多个，第二个参数为文本`
&gt; $search_words = explode(&#39; &#39;,&#39;Tipper Cow&#39;) ;

- `implode()函数`：取一个数组，并把这些数组连接起来，可以在连接中间指定一个定界符，各串之间会增加这个符号
&gt; $where_clause = implode(&#39;OR&#39; ,$where_list);
- `. `=：这个运算符会把一个串连接到另一个，类似于+=
- `[ ]`:与array_push作用相当，会把新增元素增加到数组末尾
```php
$search_array = &quot;SELECT  * FROM riskyjobs&quot;;
$where_list = array();
$user_search = $_GET[&#39;usersearch&#39;];
$search_words = explode(&#39; &#39;,$user_search);
foreach($search_words as $word){
    $where_list[] = &quot;description LIKE &#39;%$word%&#39;&quot;;
}
$where_clause = implode(&#39;OR&#39;,$where_list);
if (!empty($where_clause)) {
    $search_query .= &quot;WHERE $where_clause&quot;;
}</code></pre><ul>
<li><p><code>str_replace()函数</code>：能够将指定串中某个字符替换为指定字符，<code>第一个参数指定希望替换掉的子串，第二个参数指定要取代它的串，第三个参数指定要修改的字符串</code></p>
</li>
<li><p><code>substr()函数</code>：抽取串的一部分，<code>第一个参数为所要抽取的串，第二个参数指定从哪开始，第三个参数指定返回的串的字符个数(默认取到末尾)</code></p>
<blockquote>
<p>substr($job_desc,-4,3) 负数表示从倒数第几个开始</p>
</blockquote>
</li>
<li><p>switch语句，包好一系列case标签，与c一样</p>
<h3 id="定制函数"><a href="#定制函数" class="headerlink" title="定制函数"></a>定制函数</h3><p>自定义函数以function开头，之后加函数名，参数，用大括号加函数定义</p>
<pre><code>function replace_commas($str) {
  $new_str = str_replace(&#39;,&#39;,&#39; &#39;,$str);
  return $new_str;
}</code></pre><h3 id="分页技术"><a href="#分页技术" class="headerlink" title="分页技术"></a>分页技术</h3><p><code>query()函数</code>:将一个数向上取整为最接近的整数</p>
</li>
</ul>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>正则表达式是一种规则，用于匹配一个或多个串中的模式，所有正则表达式以<code>斜线开头和结尾</code></p>
<p><code>^表示从串的开始处,以指定字符开头</code></p>
<p><code>$表示串必须结束</code></p>
<p><code>\d代表数字，表示串中该位置必须是一个数字</code>，用<code>d{10}表示十个数字</code></p>
<blockquote>
<p>/^\d\d\d\d\d\d\d\d\d\d$/</p>
</blockquote>
<p><code>\w代表任何字母数字字符</code></p>
<p><code>\s代表空白符，包括制表符、换行符、回车、空格等</code></p>
<p><code>. 表示除换行符以外的任意一个字符</code></p>
<h3 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h3><p><strong>大括号相当于一个量词</strong></p>
<ol>
<li>{10}：表示一个字符必须出现10次；</li>
<li>{min,max}：分别为两个数字，<code>指定最少出现次数和最多出现次数</code></li>
<li>+：<code>前面</code>的字符或元字符必须`重复出现一次或多次</li>
<li>？：<code>前面</code>的字符或元字符必须<code>出现1次或者根本不出现</code></li>
<li>* :<code>字符或元字符可以出现1次或者多次，或者根本不出现</code></li>
<li><code>应用量词的部分用括号包围</code><h3 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h3>用中括号表示范围</li>
</ol>
<p>[0-2]:表示只能是0.1.2三个数</p>
<p>[A-D]:表示只能是ABCD</p>
<p><code>在一个字符类中，^表示‘不匹配’</code></p>
<p>[^b-f] : 匹配除bcdef以外的所有字符</p>
<ul>
<li>可以在正则表达式中<code>使用 | 来指示一组选项，可以从中选择</code></li>
<li><code>preg_match()用于取一个正则表达式和一个文本串，如果没有匹配就返回false，匹配返回true</code><pre><code>$regex = &#39;/^\d{3}-\d{2}-\d{4}$/&#39;;
$my_string  = &#39;555-02-9983&#39;;
preg_match($regex,$my_string);
</code></pre></li>
</ul>
<p>preg_match(‘/^\d{3}-\d{2}-\d{4}$/‘,’555-02-9983’);</p>
<pre><code>- `preg_repale(不想要的字符，想要替换的字符，要查找的字符串)`
&gt; $new_year = preg_replace(&#39;/200[0-9]/&#39;,&#39;2010&#39;,&#39;The year is 2009.&#39;);
- `checkdnsrr()函数用来检查一个域是否合法`
# 验证码机制
`rand()函数在两个参数指定的范围内返回一个随机数`
`chr()函数将一个数字ASCII字符码转换成为一个真正的字符`</code></pre><p>$pass_phrase = “”;<br>for ($i=0;$i&lt;CAPTCHA_NUMCHARS;$i++) {<br>    $pass_phrase .= chr(rand(97,122));<br>}</p>
<pre><code>## GD图像函数
1. `imagecreatetruecolor()`:在内存中创建一个空图像，有两个参数，分别为宽度和高度，返回一个图像标识符，其他绘制函数都需要这个标识符才能在具体图像上完成绘制

2. `imagecolorallocate()`：使用这个函数分配颜色，第一个参数为图像标识符，后面三个函数表示RGB颜色值的三个分量，返回值是一个颜色标识符，可以在其他绘制函数中用来控制所用的颜色

3. `imagesetpixel()`: 在图像中一个指定坐标上绘制一个像素，坐标的左上角为0.0，向右向下递增

4. `imageline()`:在函数的两个坐标之间画一条连线，坐标是相对于图像的左上角指定的，直线采用作为函数最后一个参数传入的颜色来绘制

5. `imagerectangle()`:用某种指定的颜色从一个点开始到另一个点结束绘制一个矩形

6. `imagefilledrectangle()`:这个函数绘制一个矩形，内部用指定的颜色填充

7. `imageellipse()`:用于绘制圆和椭圆，接收一个中心点和一个宽度和高度作为参数，圆或椭圆的轮廓颜色做为函数的最后一个参数传入,第一个参数指定标识符，第二、三个为宽度和高度，第四、五个为中心点坐标

8. `imagefilledellipse()`:绘制圆或椭圆同时填充圆或椭圆的内部颜色
&gt; imagefilledellipse($img,0,0,320,240,$color);

9. `imagepng()`:完成图像绘制时，调用这个函数把它直接传到Web浏览器，或者输出到服务器上的一个文件，不论哪种方式，最终结果都是有个图像，可以利用HTML&amp;#60;img&amp;#62;标记在一个Web界面里，如果没有使用第二个参数指定文件名，那么函数会在内存中升成一个图像，通过一个首部传回浏览器

10. `imagedestroy()`:使用GD库处理图像需要占用系统内存，这个函数负责在处理完图像后进行清理

11. `imagestring()`:采用指定的颜色使用PHP的内置字体绘制一个文本串，除了图像资源标识符，还要为这个函数传入字体的大小，这是一个介于1到5的数字，另外要提供串左上角的坐标以及串本身，最后提供颜色
&gt; imagestring($img,3,75,75,&#39;Sample text&#39;,$color);

12. `imagestringup()`:它会垂直绘制文本，就好像逆时针旋转90°

13. `imagettftext()`:在服务器上放置一个Truetype字体文件，然后该文件作为最后一个参数，可以指定文本字体
&gt; imagettftext($img,字体大小18，字体角度(指定为逆时针)，文本左下角xy坐标，$text_color,字体文件名，具体文本)；

- `shal()`:加密函数
```php
&lt;?php
define(&#39;CAPTCHA_WIDTH&#39;,100);
define(&#39;CAPTCHA_HEIGHT&#39;,25);

$img = imagecreatetruecolor(CAPTCHA_WODTH,CAPTCHA_HEIGHT);
$gb_color = imagecolorallocate($img,255,255,255);
$text_color = imagecolorallcate($img,0,0,0);
$graphic_color  = imagecolorallocate($img,64,64,64);
imagefilledrectangle($img,0,0,CAPTCHA_WIDTH,CAPCHA_HEIGHT,$bg_color);
for ($i=0;$i&lt;5;$i++) {
    imageline($img,0,rand() % CAPTCHA_HEIGHT,CAPTCHA_WIDTH,
       rand() % CAPTCHA_HEIGHT,$graphic_color);
}
for ($i=0;$i&lt;50;$i++) {
    imagesetpixel($img,rand() % CAPTCHA_WIDTH,
    rand() % CAPTCHA_HEIGHT，$graphic_color);
}
imagettftext($img,18,0,5,CAPTCHA_HEIGHT-5,&#39;文件名&#39;，$pass_phrase)
header(&quot;Content-type:image/png&quot;);
imagepng($img);
?&gt;</code></pre><h1 id="基础知识点补充"><a href="#基础知识点补充" class="headerlink" title="基础知识点补充"></a>基础知识点补充</h1><ol>
<li>函数：在函数内部不能调用外部定义的变量，除非作为参数传递，或者是在函数内使用<code>global 变量名</code></li>
<li>数组</li>
</ol>
<ul>
<li>一些和数组相关的函数<br>each()和list(): 在遍历一个数组并返回其键和值的应用中，两个经常一起出现<pre><code class="php">&lt;?php
foreach ($characters as $c) {
  whlie (list($k,$v) = each($c)){
      echo &quot;$k...$v&lt;br/&gt;&quot;;
  }
}
?&gt;
/*将输出数组的全部键值对*/</code></pre>
<h3 id="3-使用PHP格式化字符串"><a href="#3-使用PHP格式化字符串" class="headerlink" title="3. 使用PHP格式化字符串"></a>3. 使用PHP格式化字符串</h3></li>
<li>printf()函数 </li>
</ul>
<p>(1) 填充指示符填充输出：可以使用0或者空格，使用其他的要在指定字符前面加上<code>&#39;</code>  </p>
<pre><code class="php">&lt;?php
printf(&quot;%04d&quot;,36);//printfs &quot;0036&quot;
printf(&quot;% 4d&quot;,36);//printfs &quot;  36&quot;
printf(&quot;%&#39;x4d&quot;,36);//printfs &quot;xx36&quot;
?&gt;</code></pre>
<p>(2) 参数转换：用于指定先输出哪个参数,%后面紧跟指定第几个参数，在加上<code>\$</code>,后面加上格式指定</p>
<pre><code class="php">&lt;?php
printf(&quot;%02d/%02d/%d&quot;,24,6,2018);//printfs &quot;24/6/2018&quot;
/*使用参数转换*/
printf(&quot;%2\$02d/%1\$02d/%3\$d&quot;,24,6,2018);//printfs &quot;6/24/2018&quot;
?&gt;</code></pre>
<ul>
<li>sprintf():输出的同时返回输出的内容</li>
</ul>
<ol start="4">
<li>PHP中的字符串操作函数</li>
</ol>
<ul>
<li>strstr(“被查找的字符串”,”要查找的字符”)<blockquote>
<p>若没有要找的子字符串，返回false，否则返回以查找的字符串开始的一部分，<code>区分大小写</code></p>
</blockquote>
</li>
<li>substr(“源字符串”,”开始索引”,”(可选参数)返回字符串长度的整数”)<blockquote>
<p>提取字符串中的一部分，若以负数作为第二个参数，将从末尾开始计算，<code>不区分大小写</code></p>
</blockquote>
</li>
<li>strpos(“源字符串”,”查找的子字符串”,”(可选参数)从哪开始找的索引”)<blockquote>
<p>若没用找到，返回false，否则返回查找到的索引值，注意：判断时使用===，防止返回的索引也是0</p>
</blockquote>
<pre><code class="php">&lt;?php
$a = &quot;abcdefghijklmn&quot;;
if(strpos($a,&quot;abc&quot;) === 0){
  echo &quot;等同运算符，只有左右两边操作数相等并且类型相同时才算等于&quot;;
}
?&gt;</code></pre>
</li>
<li>strtok(“源字符串”,”分隔字符串的分隔符”)<blockquote>
<p>分解一个字符串，在第一次调用后，源字符串会放入缓存，第二次调用<code>只需要传分隔符</code>，它会从上一次的位置继续往下找，当到达末尾时返回false</p>
</blockquote>
<pre><code class="php">&lt;?php
$test = &quot;http:xiao-ming9.github.io&quot;;
$delims = &quot;-.&quot;;
$word = strtok($test,$delims);
while(is_string($word)){
  //避免当某一行中包含两个分隔符，当遇到分隔符中的第一个的时候，返回空字符串
  if($word){
      echo $word.&quot;&lt;br/&gt;&quot;;
  }
  $word = strtok($delims);//不再需要传入源字符串
}
?&gt;</code></pre>
</li>
<li>substr_replace(“要修改的字符串”,”添加的文本”,”开始索引”,”(可选参数)长度”)<blockquote>
<p>替换字符串中的一部分，返回修改后的整个字符串</p>
</blockquote>
<pre><code class="php">&lt;?php
$membership = &quot;zm10cyh&quot;;
$mwmbership = substr_replace($menbership,&quot;12&quot;,2,2);
echo $menbership;//sprints &quot;zm12cyh&quot;;
?&gt;</code></pre>
</li>
<li>str_replace(“查找字符串”,”替换字符串”,”子字符串”)<blockquote>
<p>替换字符串中指定内容，参数可以是数组</p>
</blockquote>
</li>
<li>strtoupper():把全部转化成大写</li>
<li>strtolower():把全部转化成小写</li>
<li>ucwords():把每个单词第一个字符转成大写</li>
<li>ucfirst():把字符串的第一个字母转化成大写</li>
<li>wordwrap(“源字符串”,”(可选参数)每行最大字符数”,”(可选参数)用来表示一行结束的字符”,”(可选参数)一个正整数”)<blockquote>
<p>在字符串指定位置换行，默认每75个分一行，默认不会断开单词，第4个参数表示用正整数强制断开</p>
</blockquote>
</li>
<li>nl2br():把字符串的换行符转换成HTML分段</li>
<li>explode(“分隔标记”,”源字符串”,”(可选参数)最多分为多少部分”)<blockquote>
<p>返回一个数组</p>
</blockquote>
<h3 id="4-PHP中的日期和时间函数"><a href="#4-PHP中的日期和时间函数" class="headerlink" title="4. PHP中的日期和时间函数"></a>4. PHP中的日期和时间函数</h3></li>
<li>time()获取单前的时间戳，返回从GMT 1970年1月1日开始流逝的秒数</li>
<li>getdate():转换时间戳，省略参数默认返回time()当前时间戳，返回数组，键为一下列表</li>
</ul>
<p>键 | 说明<br>—|—|—<br>sceonds | 一分钟里里已经过去的秒数（0<del>59）<br>minutes | 一小时中已经过去的分钟数（0</del>59）<br>hours | 一天中的小时数（0<del>23）<br>mday | 一月中的天数（1</del>31）<br>wday | 一周中的天数（0<del>6）<br>mon | 一年中的月数（1</del>12）<br>year | 年份（四位数）<br>yday | 一年中的天数（0~365）<br>weekday | 星期几（名字）<br>month | 一年中的月份（名字）<br>0 | 时间戳 </p>
<pre><code class="php">&lt;?php
$date_array = getdate();
foreach ($date_array as $key =&gt; $value){
    echo &quot;$key =&gt; $value\n&quot;;
}
echo &quot;&lt;p&gt;Today&#39;s date: &quot;.$date_array[&#39;mon&#39;] . &quot;/&quot;.$date_array[&#39;mday&#39;].&quot;/&quot;.
$date_array[&#39;year&#39;].&quot;&lt;/p&gt;&quot;;
?&gt;</code></pre>
<ul>
<li>date():转换一个时间戳<br><a href="http://www.php.net/date" target="_blank" rel="noopener">date的格式化代码</a><pre><code class="php">&lt;?php
$time = time();
echo date(&quot;m/d/y G:i:s e&quot;,$time);
echo &quot;&lt;br&gt;&quot;;
echo &quot;Today is &quot;;
/*对于要输出的字母使用转义符，特殊的比如换行符，制表符等要用\\*/
echo date(&quot;js \of F Y ,\a\\t g:ia \i\\n e&quot;,$time)
?&gt;
</code></pre>
</li>
</ul>
<p>“06/24/2018 17:13:30 Chian/Shanghai<br>Today is 24th of June 2018, at 5:13pm in Chian/Shanghai”</p>
<p>```</p>
<ul>
<li>mktime(小时,分钟,秒,月份,日期,年份):创建时间戳</li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2018/06/16/PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="PHP面向对象"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: PHP面向对象</span></a><a class="button is-default" href="/2018/04/20/MySQL/" title="MySQL"><span class="has-text-weight-semibold">下一页: MySQL</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="xiao-ming9/xiao-ming9.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> silverming 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" target="_blank" rel="noopener" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>