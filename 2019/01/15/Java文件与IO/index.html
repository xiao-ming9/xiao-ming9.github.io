<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="File类代表计算机各个文件,目录的抽象表现形式,可以实现文件的创建,删除等 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980import jav">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java文件与IO">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;01&#x2F;15&#x2F;Java%E6%96%87%E4%BB%B6%E4%B8%8EIO&#x2F;index.html">
<meta property="og:site_name" content="Silverming">
<meta property="og:description" content="File类代表计算机各个文件,目录的抽象表现形式,可以实现文件的创建,删除等 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980import jav">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-18T11:43:40.000Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2019/01/15/Java%E6%96%87%E4%BB%B6%E4%B8%8EIO/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Java文件与IO | Silverming</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Silverming</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Stay hungry,stay foolish</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/15/Java%E6%96%87%E4%BB%B6%E4%B8%8EIO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Silverming">
      <meta itemprop="description" content="Wechat:934933088">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silverming">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java文件与IO
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-15 17:20:29" itemprop="dateCreated datePublished" datetime="2019-01-15T17:20:29+08:00">2019-01-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-18 19:43:40" itemprop="dateModified" datetime="2019-03-18T19:43:40+08:00">2019-03-18</time>
              </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h1><p>代表计算机各个文件,目录的抽象表现形式,可以实现文件的创建,删除等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//File类表示一个文件或目录</span></span><br><span class="line">		<span class="comment">//指定在哪里创建</span></span><br><span class="line">		<span class="comment">//第一种使用方法</span></span><br><span class="line">		File f1 = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="comment">//第二种使用方法,使用类中的常量separator表示斜杠</span></span><br><span class="line">		File f2 = <span class="keyword">new</span> File(File.separator+<span class="string">"home"</span></span><br><span class="line">				+File.separator+<span class="string">"xiaoming"</span></span><br><span class="line">				+File.separator+<span class="string">"音乐"</span>+File.separator</span><br><span class="line">				+<span class="string">"java"</span>+File.separator+<span class="string">"tey.text"</span>);</span><br><span class="line">		<span class="comment">//判断文件是否已经存在</span></span><br><span class="line">		<span class="keyword">if</span>(!f1.exists()) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				f1.createNewFile();<span class="comment">//创建文件</span></span><br><span class="line">				System.out.println(<span class="string">"文件创建成功"</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="comment">// 基本上IO操作都报这个错误</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//判断对象是否是文件</span></span><br><span class="line">		System.out.println(f1.isFile());</span><br><span class="line">		<span class="comment">//判断该对象是否为文件夹</span></span><br><span class="line">		System.out.println(f1.isDirectory());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//删除文件夹(前提文件夹里无文件)</span></span><br><span class="line">		File f3 = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java"</span>);</span><br><span class="line">		<span class="keyword">boolean</span> b = f3.delete();</span><br><span class="line">		System.out.println(b);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//列出所有文件名,若是文件夹,则列出文件夹名</span></span><br><span class="line">		String[] name = f3.list();</span><br><span class="line">		System.out.println(Arrays.toString(name));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//列出当前目录下的所有文件,以file对象返回</span></span><br><span class="line">		File[] f4 = f3.listFiles();</span><br><span class="line">		<span class="keyword">for</span>(File f:f4) &#123;</span><br><span class="line">			System.out.println(f.length());</span><br><span class="line">			System.out.println(f.getName());</span><br><span class="line">			System.out.println(f.getPath());<span class="comment">//相对路径</span></span><br><span class="line">			System.out.println(f.getAbsolutePath());<span class="comment">//绝对路径</span></span><br><span class="line">			System.out.println(f.isHidden());<span class="comment">//是否隐藏文件</span></span><br><span class="line">			System.out.println(f.canRead());</span><br><span class="line">			Date date = <span class="keyword">new</span> Date(f.lastModified());<span class="comment">//最后修改时间</span></span><br><span class="line">			DateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"HH:mm:ss"</span>);</span><br><span class="line">			System.out.println(df.format(date));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//创建文件夹</span></span><br><span class="line">		File f5 = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java1"</span>);</span><br><span class="line">		f5.mkdir();</span><br><span class="line">		f5.mkdirs();<span class="comment">//一次性创建所有指定文件夹</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//重命名与移动文件</span></span><br><span class="line">		f5.renameTo(<span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/Text1"</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//过滤器</span></span><br><span class="line">		File[] files = f5.listFiles(<span class="keyword">new</span> FileFilter() &#123;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//从写此方法,用于查找出指定文件</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File pathname)</span> </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> pathname.getName().endsWith(<span class="string">".text"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="comment">//第二种写法</span></span><br><span class="line">		File[] files_s  = f5.listFiles((pathname)-&gt;pathname.getName().endsWith(<span class="string">".text"</span>));</span><br><span class="line">		<span class="keyword">for</span>(File f:files) &#123;</span><br><span class="line">			System.out.println(f.getName());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="字节输出-输入流"><a href="#字节输出-输入流" class="headerlink" title="字节输出,输入流"></a>字节输出,输入流</h1><p>输出输入是从程序的角度看的<br><code>OutputStream</code>,<code>InputStream</code>是所有类的超类,要向文件中进行操作,使用子类<code>FileOutputStream</code>,<code>FileInputStream</code><br><code>write</code>,<code>read</code>的具体实现都是一个字节一个字节进行读取的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IOStreamDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		out();</span><br><span class="line">		in();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//文件输出流(写入文件)</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//确定目标文件</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="comment">//构建一个文件输出流对象</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream out = <span class="keyword">new</span> FileOutputStream(file,<span class="keyword">true</span>);<span class="comment">//第二个参数append默认为false,true时表示追加</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">//输出(写入)的内容</span></span><br><span class="line">			String info = <span class="string">"小桥流水人家\n"</span>;</span><br><span class="line">			<span class="comment">//把内容写入文件</span></span><br><span class="line">			out.write(info.getBytes());<span class="comment">//write方法接收byte类型参数</span></span><br><span class="line">			<span class="comment">//关闭流</span></span><br><span class="line">			out.close();</span><br><span class="line">			System.out.println(<span class="string">"输出成功!"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//文件写入流(输出文件内容)</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//确定目标文件</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="comment">//构建一个文件输入流对象</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];<span class="comment">//单数用中文会造成乱码,解决办法使用字符流</span></span><br><span class="line">			StringBuilder buf = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;<span class="comment">//表示每次读取的长度</span></span><br><span class="line">			<span class="comment">//把数据读入数组中,并返回每次读取的字节数,当不等于-1时表示读取到数据,等于-1表示读取不到数据</span></span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">			 * @Return</span></span><br><span class="line"><span class="comment">			 * the total number of bytes read into the buffer, </span></span><br><span class="line"><span class="comment">			 * or -1 if there is no more data </span></span><br><span class="line"><span class="comment">			 * because the end of the stream has been reached.</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			<span class="keyword">while</span>((len = in.read(bytes))!=-<span class="number">1</span>) &#123;</span><br><span class="line">				<span class="comment">//根据读取到的字节数组,再转换为字符串内容,添加到StringBuilder中</span></span><br><span class="line">				<span class="comment">//当读取的字符数多余字符数组大小时,新读的内容会自动替换掉从头已读的内容,但后面的原有已读内容任然保留,这时候需要加入len指定读取到的位置,避免最后读出的内容与前面重复</span></span><br><span class="line">				buf.append(<span class="keyword">new</span> String(bytes,<span class="number">0</span>,len));</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//打印内容</span></span><br><span class="line">			System.out.println(buf);</span><br><span class="line">			<span class="comment">//关闭输入流</span></span><br><span class="line">			in.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字符输出-输入流"><a href="#字符输出-输入流" class="headerlink" title="字符输出,输入流"></a>字符输出,输入流</h1><p>字符流的内部实现还是字节流<br>字符输出流:<code>Writer</code>,对文件的操作使用子类<code>FileWriter</code><br>字符输入流:<code>Reader</code>,对文件的操作使用子类<code>FileReader</code><br>每次操作都是一个字符<br>文件字符操作流会自带缓存,默认大小为1024字节,在缓存满或手动刷新或关闭流时会写入文件,但是字节操作流没有缓存,直接写入<br>一般操作非文本文件时,使用字节流,操作文本文件时,使用字符流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符流</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharStreamDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		out();</span><br><span class="line">		in();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 字符输出流</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Writer out = <span class="keyword">new</span> FileWriter(file, <span class="keyword">true</span>);</span><br><span class="line">			out.write(<span class="string">"小桥流水人家,古道西风瘦马\r\n"</span>);</span><br><span class="line">			System.out.println(<span class="string">"写入文件成功"</span>);</span><br><span class="line">			out.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 字符输入流</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Reader in = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">			<span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">5</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			StringBuilder buf = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">			<span class="keyword">while</span>((len = in.read(cs))!=-<span class="number">1</span>) &#123;</span><br><span class="line">				buf.append(<span class="keyword">new</span> String(cs,<span class="number">0</span>,len));</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(buf);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字节字符转换流"><a href="#字节字符转换流" class="headerlink" title="字节字符转换流"></a>字节字符转换流</h1><p><code>OutputStreamWriter</code>:可以将输出的字符转换成字节流的输出形式<br><code>InputStreamReader</code>:可以将输入的字节流转化为字符形式的输入流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字节字符转换流</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamChangeDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		InputStream in = <span class="keyword">null</span>;</span><br><span class="line">		OutputStream out = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			out = <span class="keyword">new</span> FileOutputStream(file,<span class="keyword">true</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		read(in);</span><br><span class="line">		write(out);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//输入流:字节转字符</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(InputStream in)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//将字节输入流转换成字符输入流,可以指定编码方法</span></span><br><span class="line">		Reader reader = <span class="keyword">new</span> InputStreamReader(in,Charset.defaultCharset());</span><br><span class="line">		<span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">		<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>((len = reader.read(cs)) != -<span class="number">1</span>) &#123;</span><br><span class="line">				System.out.println(<span class="keyword">new</span> String(cs,<span class="number">0</span>,len));</span><br><span class="line">			&#125;</span><br><span class="line">			reader.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//输出流:字符转字节</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(OutputStream out)</span> </span>&#123;</span><br><span class="line">		Writer writer = <span class="keyword">new</span> OutputStreamWriter(out);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			writer.write(<span class="string">"新年快乐!!!"</span>);</span><br><span class="line">			writer.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字节字符缓冲流"><a href="#字节字符缓冲流" class="headerlink" title="字节字符缓冲流"></a>字节字符缓冲流</h1><p>先将数据缓冲起来,再一起写入或者读取出来,提高效率<br><code>BufferedInputStream</code>,<code>BufferedOutputStream</code>为两个字节缓冲流的类<br>内部默认缓存大小为8KB,每次写入时存储到缓存中的byte数组,当数组存满时,会把数组中的数据写入文件,并且缓存下标归零<br><code>BufferedReader</code><br><code>BufferedWriter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferStreamDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		byteWriter();</span><br><span class="line">		byteReader();</span><br><span class="line">		</span><br><span class="line">		charWriter();</span><br><span class="line">		charReader();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//缓冲字节输出</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">byteWriter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream out = <span class="keyword">new</span> FileOutputStream(file,<span class="keyword">true</span>);</span><br><span class="line">			<span class="comment">//构造一个字节缓冲流</span></span><br><span class="line">			BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(out);</span><br><span class="line">			String info = <span class="string">"枯藤老树昏鸦\r\n"</span>;</span><br><span class="line">			bos.write(info.getBytes());</span><br><span class="line">			bos.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//缓冲字节输入</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">byteReader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			<span class="comment">//构造缓冲流</span></span><br><span class="line">			BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(in);</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>((len = bis.read(bytes))!=-<span class="number">1</span>) &#123;</span><br><span class="line">				System.out.println(<span class="keyword">new</span> String(bytes,<span class="number">0</span>,len));</span><br><span class="line">			&#125;</span><br><span class="line">			bis.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//缓冲字符输出</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">charWriter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Writer writer = <span class="keyword">new</span> FileWriter(file,<span class="keyword">true</span>);</span><br><span class="line">			<span class="comment">//构造缓存器</span></span><br><span class="line">			BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(writer);</span><br><span class="line">			bw.write(<span class="string">"夕阳西下\r\n"</span>);</span><br><span class="line">			bw.flush();</span><br><span class="line">			bw.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//缓冲字符输入</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">charReader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Reader reader = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">			BufferedReader br = <span class="keyword">new</span> BufferedReader(reader);</span><br><span class="line">			<span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>((len=br.read(cs))!=-<span class="number">1</span>) &#123;</span><br><span class="line">				System.out.println(<span class="keyword">new</span> String(cs,<span class="number">0</span>,len));</span><br><span class="line">			&#125;</span><br><span class="line">			br.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="打印流"><a href="#打印流" class="headerlink" title="打印流"></a>打印流</h1><p>便利输出<br><code>PrintStream</code><br><code>PrintWriter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"xxxx"</span>);</span><br><span class="line">OutputStream out = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(out);<span class="comment">//加缓存</span></span><br><span class="line">PrintStream ps = <span class="keyword">new</span> PrintStream(bos);<span class="comment">//增强打印流</span></span><br><span class="line">ps.println(<span class="string">"xxxxx"</span>);</span><br><span class="line">ps.close;</span><br></pre></td></tr></table></figure>
<h1 id="对象流和序列化"><a href="#对象流和序列化" class="headerlink" title="对象流和序列化"></a>对象流和序列化</h1><p>序列化:将对象的状态信息转化为可以存储或传输的形式<br>反序列化:将已经序列化的对象重新转换成对象的状态信息<br>对象流的两个类:<code>ObjectOutputStream</code>将java对象的基本数据类型和图形写入OutputStream,<code>ObjectInputStream</code>对写入ObjectOutputStream的基本数据和对象进行反序列化<br>需要序列化的情况:</p>
<ol>
<li>把对象保存到文件中</li>
<li>对象需要在网络中传输时<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">//继承标记接口表示该类需要进行序列化,否则会报java.io.NotSerializableException错误</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 定义版本号,防止两个不同对象因属性一样造成混乱</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	<span class="comment">//可以使用关键字transient声明一个变量在存储时不需要维持其具体值(默认0或null)</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(String name, <span class="keyword">int</span> age, String sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Dog [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">", sex="</span> + sex + <span class="string">", getName()="</span> + getName() + <span class="string">", getAge()="</span></span><br><span class="line">				+ getAge() + <span class="string">", getSex()="</span> + getSex() + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectStreamDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		writeObject();</span><br><span class="line">		readObject();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//对象序列化</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Dog dog = <span class="keyword">new</span> Dog(<span class="string">"猪猪"</span>,<span class="number">6</span>,<span class="string">"girl"</span>);</span><br><span class="line">		<span class="comment">//当要读取多个对象时,使用数组</span></span><br><span class="line">		<span class="comment">//Dog[] dogs = &#123;dog1,dog2&#125;;</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/ObjectStream.text"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream out = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">			ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(out);</span><br><span class="line">			oos.writeObject(dog);<span class="comment">//多个时改为dogs</span></span><br><span class="line">			oos.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//对象反序列化</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Dog dog = <span class="keyword">new</span> Dog(<span class="string">"猪猪"</span>,<span class="number">6</span>,<span class="string">"girl"</span>);</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/ObjectStream.text"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			ObjectInputStream ois= <span class="keyword">new</span> ObjectInputStream(in);</span><br><span class="line">			Dog dog2 = (Dog)ois.readObject();</span><br><span class="line">			<span class="comment">//多个时:Dog[] dog = (Dog[])ois.readObject();</span></span><br><span class="line">			System.out.println(dog2);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字节数组流"><a href="#字节数组流" class="headerlink" title="字节数组流"></a>字节数组流</h1></li>
</ol>
<p>基于内存操作,内部维护着一个字节数组,可以利用流的读取机制来处理字符串<br>与文件操作无关,无需关闭<br><code>ByteArrayInputStream</code><br><code>ByteArrayOutputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ByteArrayStreamDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		byteArray();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">byteArray</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		String s = <span class="string">"123456789sljtiegrgGRGFRTGAFWER(*&amp;*^&amp;%%$@#)"</span>;</span><br><span class="line">		ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(s.getBytes());</span><br><span class="line">		ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">		<span class="keyword">int</span> curr = -<span class="number">1</span>;<span class="comment">//每次读取的字节</span></span><br><span class="line">		<span class="keyword">while</span>((curr = bais.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span>((curr&gt;=<span class="number">65</span> &amp;&amp; curr&lt;=<span class="number">90</span>) || (curr&gt;=<span class="number">97</span> &amp;&amp; curr&lt;=<span class="number">122</span>)) &#123;</span><br><span class="line">				baos.write(curr);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//此时无需关闭,因为字节数组流是基于内存的操作流</span></span><br><span class="line">		System.out.println(baos.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h1><p>应用程序以与机器无关的方式从底层输出或输入java基本数据类型<br><code>DataInputStream</code><br><code>DataOutputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInput;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataStreamDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		write();</span><br><span class="line">		read();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.data"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream out = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">			BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(out);</span><br><span class="line">			DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(bos);</span><br><span class="line">			dos.writeInt(<span class="number">15</span>);<span class="comment">//4个字节</span></span><br><span class="line">			dos.writeByte(<span class="number">1</span>);<span class="comment">//写入1个字节</span></span><br><span class="line">			dos.writeUTF(<span class="string">"花花卡"</span>);</span><br><span class="line">			</span><br><span class="line">			dos.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/vince.data"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">			BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(in);</span><br><span class="line">			DataInputStream dis = <span class="keyword">new</span> DataInputStream(bis);</span><br><span class="line">			<span class="keyword">int</span> num = dis.readInt();</span><br><span class="line">			<span class="keyword">byte</span> b = dis.readByte();</span><br><span class="line">			String s =dis.readUTF();</span><br><span class="line">			System.out.println(num+<span class="string">","</span>+b+<span class="string">","</span>+s);</span><br><span class="line">			</span><br><span class="line">			dis.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="文件分割与合并"><a href="#文件分割与合并" class="headerlink" title="文件分割与合并"></a>文件分割与合并</h1><p>合并流<code>SequenceInputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.SequenceInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 文件的分割和合并</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDivisionMergeDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//分割</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(</span><br><span class="line">				<span class="string">"/media/M_fM__VM__GM_fM_!M_#/编程语言/Java/课程/千锋Java基础教程-Java基础（完结-217集）/千锋java基础教程：第10章 多线程与并发（12集）/第10章 多线程与并发_12_线程生命周期与线程池_小结.mp4"</span>);</span><br><span class="line">		division(file, <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">10</span>);</span><br><span class="line">		System.out.println(<span class="string">"分割成功"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//合并</span></span><br><span class="line">		Vector&lt;InputStream&gt; v = <span class="keyword">new</span> Vector&lt;InputStream&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">59</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				InputStream in = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/java/花花卡"</span> + i + <span class="string">".mp4"</span>));</span><br><span class="line">				v.add(in);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		Enumeration&lt;InputStream&gt; es = v.elements();</span><br><span class="line">		merge(es);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 文件切割</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> file    要切割的文件</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> cutSite 切割后每份文件的大小</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">division</span><span class="params">(File targetFile, <span class="keyword">long</span> cutSize)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (targetFile == <span class="keyword">null</span>)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="comment">// 计算文件的总分割数</span></span><br><span class="line">		<span class="keyword">int</span> num = (targetFile.length() % cutSize == <span class="number">0</span>) ? (<span class="keyword">int</span>) (targetFile.length() / cutSize)</span><br><span class="line">				: (<span class="keyword">int</span>) ((targetFile.length() / cutSize) + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">// 构造一个文件输入流</span></span><br><span class="line">			BufferedInputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(targetFile));</span><br><span class="line">			BufferedOutputStream out = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">null</span>;<span class="comment">// 每次希望读取的最大字节数</span></span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;<span class="comment">// 每次读取的字节数</span></span><br><span class="line">			<span class="keyword">int</span> count = <span class="number">0</span>;<span class="comment">// 每一个文件要读取的次数</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; num; i++) &#123;</span><br><span class="line">				out = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"/home/xiaoming/音乐/java/花花卡"</span> + i + <span class="string">".mp4"</span>));</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (cutSize &lt;= <span class="number">1024</span>) &#123;</span><br><span class="line">					bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) cutSize];</span><br><span class="line">					count = <span class="number">1</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">					count = (<span class="keyword">int</span>) cutSize / <span class="number">1024</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 边读边写入,不然会刷新数组,写入不了</span></span><br><span class="line">				<span class="comment">// 判断条件应该把读放在后面,防止多读一次</span></span><br><span class="line">				<span class="keyword">while</span> (count &gt; <span class="number">0</span> &amp;&amp; (len = in.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">					out.write(bytes);</span><br><span class="line">					out.flush();</span><br><span class="line">					count--;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 如果余数不为零,数组不整除就需要多读一遍</span></span><br><span class="line">				<span class="keyword">if</span> ((<span class="keyword">int</span>) cutSize % <span class="number">1024</span> != <span class="number">0</span>) &#123;</span><br><span class="line">					bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) cutSize % <span class="number">1024</span>];</span><br><span class="line">					len = in.read(bytes);</span><br><span class="line">					out.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">					out.flush();</span><br><span class="line">				&#125;</span><br><span class="line">				out.close();<span class="comment">// 关闭本次输出流</span></span><br><span class="line">			&#125;</span><br><span class="line">			in.close();<span class="comment">// 最后才关闭输入流</span></span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Enumeration&lt;InputStream&gt; es)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//构造一个合并流</span></span><br><span class="line">		SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(es);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</span><br><span class="line">					<span class="keyword">new</span> FileOutputStream(<span class="string">"/home/xiaoming/音乐/java/花花卡.mp4"</span>));</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>((len=sis.read(bytes))!=-<span class="number">1</span>) &#123;</span><br><span class="line">				bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">				bos.flush();</span><br><span class="line">			&#125;</span><br><span class="line">			bos.close();</span><br><span class="line">			sis.close();</span><br><span class="line">			System.out.println(<span class="string">"合并完成"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字符串流"><a href="#字符串流" class="headerlink" title="字符串流"></a>字符串流</h1><p><code>StringReader</code>以一个字符串为数据源,来构造一个字符流<br><code>StringWriter</code>无需关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.StreamTokenizer;</span><br><span class="line"><span class="keyword">import</span> java.io.StringReader;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串流</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringStreamDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">stringReader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String info = <span class="string">"中 大 奖,花 呗 免 单!"</span>;</span><br><span class="line">		StringReader sr = <span class="keyword">new</span> StringReader(info);</span><br><span class="line">		<span class="comment">//流标记器</span></span><br><span class="line">		StreamTokenizer st = <span class="keyword">new</span> StreamTokenizer(sr);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> count = <span class="number">0</span>;<span class="comment">//计算总数</span></span><br><span class="line">		<span class="comment">//TT_EOF表示读到流的末尾,ttype是每一次读取返回的类型</span></span><br><span class="line">		<span class="keyword">while</span>(st.ttype != StreamTokenizer.TT_EOF) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="comment">//TT_WORD表示读取的内容是文字</span></span><br><span class="line">				<span class="keyword">if</span>(st.nextToken()==StreamTokenizer.TT_WORD) &#123;</span><br><span class="line">					count++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		sr.close();</span><br><span class="line">		System.out.println(<span class="string">"count="</span>+count);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		stringReader();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="RandomAccessFile"><a href="#RandomAccessFile" class="headerlink" title="RandomAccessFile"></a>RandomAccessFile</h1><p>直接继承Object类,只可以对文件进行操作,有两种模式(<strong>r</strong>,<strong>rw</strong>)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomAccessFileDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			RandomAccessFile r = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/home/xiaoming/音乐/java/vince.text"</span>, <span class="string">"r"</span>);</span><br><span class="line">			RandomAccessFile w = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/home/xiaoming/音乐/java/vince2.text"</span>,<span class="string">"rw"</span>);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>((len = r.read(bytes))!= -<span class="number">1</span>) &#123;</span><br><span class="line">				w.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"copy success"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Properties文件操作类"><a href="#Properties文件操作类" class="headerlink" title="Properties文件操作类"></a>Properties文件操作类</h1><p>主要用于读取配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//properties配置文件</span></span><br><span class="line">#update config</span><br><span class="line">#Sun Feb 03 10:58:41 CST 2019</span><br><span class="line">db.password=<span class="number">987654321</span></span><br><span class="line">db.username=xiaoming</span><br><span class="line">app.version=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对配置文件的操作</span></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String version = <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String username = <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String password = <span class="string">""</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//静态代码块,在创建对象时执行一次</span></span><br><span class="line">		<span class="keyword">static</span> &#123;</span><br><span class="line">			readConfig();</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="comment">/**	</span></span><br><span class="line"><span class="comment">	 * 输出操作</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">readConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream inStream = <span class="keyword">new</span> FileInputStream(<span class="string">"config.properties"</span>);</span><br><span class="line">			<span class="comment">//当文件不在当前项目根目录下时,使用如下方式指定路径</span></span><br><span class="line"><span class="comment">//			InputStream inStream1 = Thread.currentThread().getContextClassLoader()</span></span><br><span class="line"><span class="comment">//					.getResourceAsStream("com/res/config.properties");</span></span><br><span class="line">			p.load(inStream);<span class="comment">//加载文件</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">//从properties中获取数据</span></span><br><span class="line">			</span><br><span class="line">			version = p.getProperty(<span class="string">"app.version"</span>);</span><br><span class="line">			username = p.getProperty(<span class="string">"db.username"</span>);</span><br><span class="line">			password = p.getProperty(<span class="string">"db.password"</span>);</span><br><span class="line">			</span><br><span class="line">			inStream.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 写入操作</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> version</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writeConfig</span><span class="params">(String version,String username,String password)</span> </span>&#123;</span><br><span class="line">		Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">		<span class="comment">//把属性写入变量p</span></span><br><span class="line">		p.put(<span class="string">"app.version"</span>,version);</span><br><span class="line">		p.put(<span class="string">"db.username"</span>, username);</span><br><span class="line">		p.put(<span class="string">"db.password"</span>,password);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream outStream = <span class="keyword">new</span> FileOutputStream(<span class="string">"config.properties"</span>);</span><br><span class="line">			<span class="comment">//写入文件,第二个参数是注释</span></span><br><span class="line">			p.store(outStream, <span class="string">"update config"</span>);</span><br><span class="line">			outStream.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//readConfig();</span></span><br><span class="line">		writeConfig(<span class="string">"2"</span>, <span class="string">"xiaoming"</span>, <span class="string">"987654321"</span>);</span><br><span class="line">		System.out.println(PropertiesDemo.version);</span><br><span class="line">		System.out.println(PropertiesDemo.username);</span><br><span class="line">		System.out.println(PropertiesDemo.password);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="文件压缩和解压缩"><a href="#文件压缩和解压缩" class="headerlink" title="文件压缩和解压缩"></a>文件压缩和解压缩</h1><p><strong>压缩</strong>:<code>ZipOutputStream</code><br><code>ZipOutputStream(OutputStream out)</code>:创建新的ZIP输出流<br><code>void putNextEntry(ZipEntry e)</code>:开始写入新的ZIP文件条目并将流定位到条目数据的开始处<br><code>ZipEntry(String name)</code>:使用指定名创建新的ZIP条目<br><strong>解压</strong>:<code>ZipInputStream</code><br><code>ZipInputStream(InputStream in)</code>:创建新的ZIP输入流<br><code>ZipEntry getNextEntry()</code>:读取写一个ZiP文件条目并将流定位到该条目数据的开始处</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 压缩和解压缩实例</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaoming</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompressionAndDecompressionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/12345"</span>);</span><br><span class="line">		compression(<span class="string">"/home/xiaoming/音乐/123456789.zip"</span>, file);</span><br><span class="line"></span><br><span class="line">		decompression(<span class="string">"/home/xiaoming/音乐/123456789.zip"</span>, <span class="string">"/home/xiaoming/音乐"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 压缩</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> zipFileName 希望压缩后的文件名(路径)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> targetFile  目标文件</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">compression</span><span class="params">(String zipFileName, File targetFile)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"正在压缩..."</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			ZipOutputStream out = <span class="keyword">new</span> ZipOutputStream(<span class="keyword">new</span> FileOutputStream(zipFileName));</span><br><span class="line">			<span class="comment">// 添加缓存加快效率</span></span><br><span class="line">			BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(out);</span><br><span class="line">			<span class="comment">// 进行压缩</span></span><br><span class="line">			zip(out, targetFile, targetFile.getName(), bos);</span><br><span class="line">			bos.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"压缩完成!!!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行具体的压缩操作</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> out            对文件进行压缩的类</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> targetFile     目标文件</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> targetFileName 要压缩文件的文件名</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> bos            缓存流</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zip</span><span class="params">(ZipOutputStream out, File targetFile, String targetFileName, BufferedOutputStream bos)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">// 判断是目录还是文件夹</span></span><br><span class="line">		<span class="keyword">if</span> (targetFile.isDirectory()) &#123;</span><br><span class="line">			<span class="comment">// 如果是空目录</span></span><br><span class="line">			<span class="keyword">if</span> (targetFile.length() == <span class="number">0</span>) &#123;</span><br><span class="line">				out.putNextEntry(<span class="keyword">new</span> ZipEntry(targetFileName));<span class="comment">// 处理空目录</span></span><br><span class="line">			&#125;</span><br><span class="line">			File[] files = targetFile.listFiles();</span><br><span class="line">			<span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">				zip(out, f, targetFileName + <span class="string">"/"</span> + f.getName(), bos);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			out.putNextEntry(<span class="keyword">new</span> ZipEntry(targetFileName));</span><br><span class="line">			FileInputStream in = <span class="keyword">new</span> FileInputStream(targetFile);</span><br><span class="line">			BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(in);</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">			<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">				bos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">			&#125;</span><br><span class="line">			bis.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 解压</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> targetFileName 要解压的文件名</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> parent         解压到的位置</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">decompression</span><span class="params">(String targetFileName, String parent)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 构造解压的输入流</span></span><br><span class="line">		ZipInputStream zIn;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			zIn = <span class="keyword">new</span> ZipInputStream(<span class="keyword">new</span> FileInputStream(targetFileName));</span><br><span class="line">			ZipEntry entry = <span class="keyword">null</span>;</span><br><span class="line">			File file = <span class="keyword">null</span>;</span><br><span class="line">			<span class="keyword">while</span> ((entry = zIn.getNextEntry()) != <span class="keyword">null</span> &amp;&amp; !entry.isDirectory()) &#123;</span><br><span class="line">				file = <span class="keyword">new</span> File(parent, entry.getName());</span><br><span class="line">				<span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">					<span class="keyword">new</span> File(file.getParent()).mkdirs();<span class="comment">// 创建此文件的上级目录</span></span><br><span class="line">				&#125;</span><br><span class="line">				OutputStream out = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">				BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(out);</span><br><span class="line">				<span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">				<span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">while</span> ((len = zIn.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">					bos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">				&#125;</span><br><span class="line">				bos.close();</span><br><span class="line">				System.out.println(file.getAbsolutePath() + <span class="string">"解压成功"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="New-IO-NIO"><a href="#New-IO-NIO" class="headerlink" title="New IO(NIO)"></a>New IO(NIO)</h1><p>原来的IO采用流的方式处理数据,为NIO以块的方式处理数据,效率更高,在NIO中,所有的数据都是在缓冲区处理,缓冲区实际上是一个数组</p>
<h2 id="缓冲区"><a href="#缓冲区" class="headerlink" title="缓冲区"></a>缓冲区</h2><p>缓冲区的类型:</p>
<ul>
<li>ByteBuffer</li>
<li>CharBuffer</li>
<li>ShortBuffer</li>
<li>LongBuffer</li>
<li>DoubleBuffer</li>
<li>IntBuffer</li>
<li>FloatBuffer<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIODemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//创建一个字节缓冲区,申请内存空间为8字节,参数为申请的内存空间</span></span><br><span class="line">		ByteBuffer buf = ByteBuffer.allocate(<span class="number">8</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//查看其内部属性值</span></span><br><span class="line">		System.out.println(<span class="string">"position="</span>+buf.position());</span><br><span class="line">		System.out.println(<span class="string">"limit="</span>+buf.limit());</span><br><span class="line">		System.out.println(<span class="string">"capacity="</span>+buf.capacity());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//向缓冲区写入数据</span></span><br><span class="line">		buf.put((<span class="keyword">byte</span>)<span class="number">10</span>);</span><br><span class="line">		buf.put((<span class="keyword">byte</span>)<span class="number">20</span>);</span><br><span class="line">		buf.put((<span class="keyword">byte</span>)<span class="number">30</span>);</span><br><span class="line">		buf.put((<span class="keyword">byte</span>)<span class="number">40</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"position="</span>+buf.position());</span><br><span class="line">		System.out.println(<span class="string">"limit="</span>+buf.limit());</span><br><span class="line">		System.out.println(<span class="string">"capacity="</span>+buf.capacity());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//缓冲区反转(把limit设置为position的值,并把positon置零),在取值前使用</span></span><br><span class="line">		buf.flip();</span><br><span class="line">		System.out.println(<span class="string">"position="</span>+buf.position());</span><br><span class="line">		System.out.println(<span class="string">"limit="</span>+buf.limit());</span><br><span class="line">		System.out.println(<span class="string">"capacity="</span>+buf.capacity());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//取值</span></span><br><span class="line">		<span class="comment">//判断当前位置与限制元素之间是否有元素</span></span><br><span class="line">		<span class="keyword">if</span>(buf.hasRemaining()) &#123;</span><br><span class="line">			<span class="comment">//返回当前位置与限制之间的元素数</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;buf.remaining();i++) &#123;</span><br><span class="line">				<span class="keyword">byte</span> b = buf.get(i);<span class="comment">//取值</span></span><br><span class="line">				System.out.println(b);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="通道-Channel"><a href="#通道-Channel" class="headerlink" title="通道:Channel"></a>通道:Channel</h2></li>
</ul>
<p>数据通过通道进出缓冲区,Channel是一个类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件复制实例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> nio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.MappedByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.FileChannel;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.FileChannel.MapMode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFileDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			copyFile();</span><br><span class="line">			randomAccessFileCopy();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//NIO方式</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">//创建一个输入文件的通道</span></span><br><span class="line">		FileChannel in = <span class="keyword">new</span> FileInputStream(<span class="string">"/home/xiaoming/图片/v2-c4a14410a05ed4ddede728e6d467effc_r.jpg"</span>).getChannel();</span><br><span class="line">		<span class="comment">//创建一个输出文件的通道</span></span><br><span class="line">		FileChannel out = <span class="keyword">new</span> FileOutputStream(<span class="string">"/home/xiaoming/音乐/background.jpg"</span>).getChannel();</span><br><span class="line">		</span><br><span class="line">		ByteBuffer buf = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">		<span class="keyword">while</span>(in.read(buf)!=-<span class="number">1</span>) &#123;</span><br><span class="line">			buf.flip();</span><br><span class="line">			out.write(buf);</span><br><span class="line">			buf.clear();</span><br><span class="line">		&#125;</span><br><span class="line">		in.close();</span><br><span class="line">		out.close();</span><br><span class="line">		System.out.println(<span class="string">"copy success"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//印射方式</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">randomAccessFileCopy</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		RandomAccessFile in = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/home/xiaoming/图片/v2-c4a14410a05ed4ddede728e6d467effc_r.jpg"</span>,<span class="string">"r"</span>);</span><br><span class="line">		RandomAccessFile out = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/home/xiaoming/音乐/background1.jpg"</span>, <span class="string">"rw"</span>);</span><br><span class="line">		</span><br><span class="line">		FileChannel fcIn = in.getChannel();</span><br><span class="line">		FileChannel fcOut = out.getChannel();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> size = fcIn.size();<span class="comment">//输入流的字节大小</span></span><br><span class="line">		<span class="comment">//输入流的缓冲区</span></span><br><span class="line">		MappedByteBuffer inBuf = fcIn.map(MapMode.READ_ONLY, <span class="number">0</span>, size);</span><br><span class="line">		<span class="comment">//输出流的缓冲区</span></span><br><span class="line">		MappedByteBuffer outBuf = fcOut.map(MapMode.READ_WRITE, <span class="number">0</span>, size);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">			outBuf.put(inBuf.get());</span><br><span class="line">		&#125;</span><br><span class="line">		fcIn.close();</span><br><span class="line">		fcOut.close();</span><br><span class="line">		in.close();</span><br><span class="line">		out.close();</span><br><span class="line">		System.out.println(<span class="string">"copy success"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>IO操作的性能比较:</p>
<ol>
<li>内存印射最快</li>
<li>NIO读写</li>
<li>使用缓存的IO流</li>
<li>普通无缓存IO<h1 id="Path接口"><a href="#Path接口" class="headerlink" title="Path接口"></a>Path接口</h1></li>
</ol>
<p>Path表示一个目录名,表示具体路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.FileSystems;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.StandardCopyOption;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.StandardOpenOption;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PathFileDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"/home/xiaoming/音乐/background.jpg"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//path,通过这种方式获取文件</span></span><br><span class="line">		Path p1 = Paths.get(<span class="string">"/home/xiaoming/音乐"</span>,<span class="string">"background.jpg"</span>);</span><br><span class="line">		System.out.println(p1);</span><br><span class="line">		</span><br><span class="line">		Path p2 = file.toPath();</span><br><span class="line">		System.out.println(p2);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//toPath方法的具体实现方法</span></span><br><span class="line">		Path p3 = FileSystems.getDefault().getPath(<span class="string">"/home/xiaoming/音乐"</span>,<span class="string">"background.jpg"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//Files工具类</span></span><br><span class="line">		Path p4 = Paths.get(<span class="string">"/home/xiaoming/音乐/工具类.text"</span>);</span><br><span class="line">		String info = <span class="string">"一闪一闪亮晶晶"</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.write(p4, info.getBytes(<span class="string">"gb2312"</span>), StandardOpenOption.CREATE_NEW);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">byte</span>[] bytes = Files.readAllBytes(p4);</span><br><span class="line">			System.out.println(<span class="keyword">new</span> String(bytes));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//复制(第三个参数可选)</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.copy(p3, Paths.get(<span class="string">"/home/xiaoming/音乐/background2.jpg"</span>),StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//移动文件</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.move(p3, Paths.get(<span class="string">"/home/xiaoming/音乐/background2.jpg"</span>),StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//删除文件</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.delete(p3);</span><br><span class="line">			Files.deleteIfExists(p3);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//创建目录文件</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.createDirectory(Paths.get(<span class="string">"/home/xiaoming/音乐/abc"</span>));<span class="comment">//除了最后的一个部件,其他的必须是已存在的</span></span><br><span class="line">			Files.createDirectories(Paths.get(<span class="string">"/home/xiaoming/音乐/abc"</span>));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//创建文件</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Files.createFile(Paths.get(<span class="string">"/home/xiaoming/音乐/abc.txt"</span>));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//添加前后缀创建临时文件或临时目录</span></span><br><span class="line">		<span class="comment">//Path newPath = Files.createTempFile(prefix, suffix, attrs);</span></span><br><span class="line">		<span class="comment">//Path newPath = Files.createTempDirectory(dir, prefix);</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        <div class="reward-container">
  <div>打工不易，想买杯奶茶</div>
  <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Silverming 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpeg" alt="Silverming 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/01/11/java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="prev" title="java数据结构">
      <i class="fa fa-chevron-left"></i> java数据结构
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/02/10/Java%E9%9B%86%E5%90%88/" rel="next" title="Java集合">
      Java集合 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#File类"><span class="nav-number">1.</span> <span class="nav-text">File类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字节输出-输入流"><span class="nav-number">2.</span> <span class="nav-text">字节输出,输入流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符输出-输入流"><span class="nav-number">3.</span> <span class="nav-text">字符输出,输入流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字节字符转换流"><span class="nav-number">4.</span> <span class="nav-text">字节字符转换流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字节字符缓冲流"><span class="nav-number">5.</span> <span class="nav-text">字节字符缓冲流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#打印流"><span class="nav-number">6.</span> <span class="nav-text">打印流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对象流和序列化"><span class="nav-number">7.</span> <span class="nav-text">对象流和序列化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字节数组流"><span class="nav-number">8.</span> <span class="nav-text">字节数组流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据流"><span class="nav-number">9.</span> <span class="nav-text">数据流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件分割与合并"><span class="nav-number">10.</span> <span class="nav-text">文件分割与合并</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串流"><span class="nav-number">11.</span> <span class="nav-text">字符串流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RandomAccessFile"><span class="nav-number">12.</span> <span class="nav-text">RandomAccessFile</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Properties文件操作类"><span class="nav-number">13.</span> <span class="nav-text">Properties文件操作类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件压缩和解压缩"><span class="nav-number">14.</span> <span class="nav-text">文件压缩和解压缩</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#New-IO-NIO"><span class="nav-number">15.</span> <span class="nav-text">New IO(NIO)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#缓冲区"><span class="nav-number">15.1.</span> <span class="nav-text">缓冲区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通道-Channel"><span class="nav-number">15.2.</span> <span class="nav-text">通道:Channel</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Path接口"><span class="nav-number">16.</span> <span class="nav-text">Path接口</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Silverming</p>
  <div class="site-description" itemprop="description">Wechat:934933088</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">114</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silverming</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.5.0
  </div>
  <div>
     <a href="http://www.beianbeian.com/beianxinxi/56c155c0ed5f44020af3c1659377b89d.html" target="_blank" rel="noopener">粤ICP备18114217号</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>













  

  

</body>
</html>
