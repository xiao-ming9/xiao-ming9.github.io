<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="单例设计模式只能有一个对象实例，通过私有化构造方法，并在类里创建一个静态对象实现,常用于工具类，节省重复创建对象，提高效率  通过构造方法私有化+静态方法 代替单例设计模式模式：占用内存多">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="http://yoursite.com/2019/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Silverming">
<meta property="og:description" content="单例设计模式只能有一个对象实例，通过私有化构造方法，并在类里创建一个静态对象实现,常用于工具类，节省重复创建对象，提高效率  通过构造方法私有化+静态方法 代替单例设计模式模式：占用内存多">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-01-10T06:54:37.000Z">
<meta property="article:modified_time" content="2020-12-01T10:35:21.018Z">
<meta property="article:author" content="Silverming">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yoursite.com/2019/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://yoursite.com/2019/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","path":"2019/01/10/设计模式/","title":"设计模式"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>设计模式 | Silverming</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Silverming</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Stay hungry,stay foolish</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">单例设计模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BC%98%E5%8C%96"><span class="nav-number">2.</span> <span class="nav-text">单例设计模式优化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">模板方法设计模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">策略模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.</span> <span class="nav-text">简单工厂模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.</span> <span class="nav-text">静态代理模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">7.</span> <span class="nav-text">动态代理模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">8.</span> <span class="nav-text">适配器模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">9.</span> <span class="nav-text">装饰者模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">10.</span> <span class="nav-text">观察者设计模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dao%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">11.</span> <span class="nav-text">dao设计模式</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Silverming</p>
  <div class="site-description" itemprop="description">Wechat:934933088</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">140</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Silverming">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silverming">
      <meta itemprop="description" content="Wechat:934933088">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="设计模式 | Silverming">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          设计模式
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-10 14:54:37" itemprop="dateCreated datePublished" datetime="2019-01-10T14:54:37+08:00">2019-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-12-01 18:35:21" itemprop="dateModified" datetime="2020-12-01T18:35:21+08:00">2020-12-01</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>16 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h1><p>只能有一个对象实例，通过私有化构造方法，并在类里创建一个静态对象实现,常用于工具类，节省重复创建对象，提高效率</p>
<blockquote>
<p>通过构造方法私有化+静态方法 代替单例设计模式模式：占用内存多</p>
</blockquote>
<span id="more"></span>
<pre><code class="java">//单例设计模式
public class Test3&#123;
    public static void main(String[] args)&#123;
        Singleton1 s1 = Singleton1.getInstance();
        Singleton2 s2 = Singleton2.getInstance();
        s1.print();
        s2.print();
    &#125;
&#125;

//懒汉式
//占用内存时间短，但效率较低（延迟加载）
class Singleton1&#123;
    private Singleton1()&#123;&#125;;//私有化构造方法，外部无法创建对象
    private static Singleton1 s1;
    public static Singleton1 getInstance()&#123;
        if(s1 == null)&#123;
            s1 = new Singleton1();
        &#125;
        return s1;
    &#125;
    public void print()&#123;
        System.out.println(&quot;懒汉式测试方法&quot;);
    &#125;
&#125;

//饿汉式
//占用内存时间长，但效率高
class Singleton2&#123;
    private Singleton2()&#123;&#125;;
    private static Singleton2 s2 = new Singleton2();
    public static Singleton2 getInstance()&#123;
        return s2;
    &#125;
    public void print()&#123;
        System.out.println(&quot;饿汉式测试方法&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="单例设计模式优化"><a href="#单例设计模式优化" class="headerlink" title="单例设计模式优化"></a>单例设计模式优化</h1><pre><code class="java">//1.实现Serializable接口，允许序列化，方便还原单例状态
public class Singleton implements Serializable &#123;
    private volidate static Singleton singleton = null;//使用volidate标记，每次取值从地址中取值，确保数据一致
    private Singleton()&#123;
        if(singleton != null)&#123;
            //防止反射调用私有化构造方法
            throw new RuntimeException(&quot;此类对象为单例模式，已经被实例化&quot;);
        &#125;
    &#125;
    public static Singleton getSingleton()&#123;
        if(singleton == null)&#123;
            //多线程访问安全，使用两次判断，防止第一次判断完就中断，没有加锁
            synchronized (Singleton.class)&#123;
                if(singleton == null)&#123;
                    singleton = new Singleton();
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<h1 id="模板方法设计模式"><a href="#模板方法设计模式" class="headerlink" title="模板方法设计模式"></a>模板方法设计模式</h1><p>定义一个操作中的算法骨架，而将一些可变部分的实现延迟到子类中，模板方法使得子类可以不改变一个算法的结构即可重新定义该算法的某些步骤</p>
<pre><code class="java">public class Test8&#123;
    public static void main(String[] args) &#123;
        UserManager us = new UserManager();
        us.action(&quot;admin&quot;,&quot;add&quot;);
        us.action(&quot;test&quot;,&quot;del&quot;);
    &#125;
&#125;

abstract class BaseManager&#123;
    public void action(String name,String method)&#123;
        if(&quot;admin&quot;.equals(name))&#123;
            excute(method);
        &#125;else&#123;
            System.out.println(&quot;需要管理员权限&quot;);
        &#125;
    &#125;
    public abstract void excute(String method);
&#125;


class UserManager extends BaseManager&#123;
    public void excute(String method)&#123;
        //只实现具体的操作方法，验证层面在父类抽象类中
        if(&quot;add&quot;.equals(method))&#123;
            System.out.println(&quot;执行了添加操作&quot;);
        &#125;else if(&quot;del&quot;.equals(method))&#123;
            System.out.println(&quot;执行了删除操作&quot;);
        &#125;
    &#125;
&#125;
</code></pre>
<h1 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h1><p>定义一系列算法，将每一种算法封装起来并可以相互替换使用，策略模式让算法独立于使用它的客户应用而独立变化</p>
<pre><code class="java">public class Test9&#123;
    public static void main(String[] args) &#123;
        BaseService bs = new UserService();
        bs.setISave(new NetSave());//类实现借口，任然可以认为类型属于该接口
        bs.add(&quot;user&quot;);
    &#125;
&#125;

//定义一个接口
interface ISave&#123;
    public void save(String data);
&#125;

//对于不同的需求有不同的策略去实现
class FileSava implements ISave&#123;
    public void save(String data)&#123;
        System.out.println(&quot;把数据存到文件中&quot;+data);
    &#125;
&#125;

class NetSave implements ISave&#123;
    public void save(String data)&#123;
        System.out.println(&quot;把数据存到网络上&quot;+data);
    &#125;
&#125;

//定义一个抽象类用于不同的对象统一通过此处调用不同方法
abstract class BaseService&#123;
    private ISave iSave;
    public void setISave(ISave iSave)&#123;
        this.iSave = iSave;
    &#125;
    public void add(String data)&#123;
        iSave.save(data);
    &#125;
&#125;

class UserService extends BaseService&#123;

&#125;
</code></pre>
<h1 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h1><p>由一个工厂对象决定创建出哪一种产品类的实例</p>
<pre><code class="java">public class Test10&#123;
    public static void main(String[] args)&#123;
        //使用工厂模式降低耦合度，方便后期修改
        Product phone = ProductFactory.getProduct(&quot;phone&quot;);
        if(null!=phone)&#123;
            phone.work();
        &#125;
    &#125;
&#125;

class ProductFactory&#123;
    public static Product getProduct(String name)&#123;
        if(&quot;phone&quot;.equals(name))&#123;
            return new Phone();
        &#125;else if(&quot;computer&quot;.equals(name))&#123;
            return new Computer();
        &#125;else&#123;
            return  null;
        &#125;
    &#125;
&#125;

interface Product&#123;
    public void work();
&#125;

class Phone implements Product&#123;
    public void work()&#123;
        System.out.println(&quot;Phone is working...&quot;);
    &#125;
&#125;

class Computer implements Product&#123;
    public void work()&#123;
        System.out.println(&quot;Computer is working...&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="静态代理模式"><a href="#静态代理模式" class="headerlink" title="静态代理模式"></a>静态代理模式</h1><p>为其他对象提供一种代理以控制对这个对象的访问，在访问对象时引入一定程度的间接性，以附加多种用途</p>
<pre><code class="java">public class Test11&#123;
    public static void main(String[] args)&#123;
        IAction user = new UserAction();
        ActionProxy proxy = new ActionProxy(user);
        proxy.doAction();
    &#125;
&#125;

//代理
class ActionProxy implements IAction&#123;
    private IAction target;//被代理的对象
    public ActionProxy(IAction target)&#123;
        this.target = target;
    &#125;
    //执行操作
    public void doAction()&#123;
        long startTime = System.currentTimeMillis();
        target.doAction();//执行真正的业务
        System.out.println(&quot;当前时间为：&quot;+startTime);
    &#125;
&#125;

interface IAction&#123;
    public void doAction();
&#125;

class UserAction implements IAction&#123;
    public void doAction()&#123;
        System.out.println(&quot;开始工作了。。。&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="动态代理模式"><a href="#动态代理模式" class="headerlink" title="动态代理模式"></a>动态代理模式</h1><pre><code class="java">/**
 * 接口
 */
interface Subject &#123;
    public void shopping();
&#125;

public class Person implements Subject&#123;

    @Override
    public void shopping() &#123;
        System.out.println(&quot;付款，买到心心念念的MacBook&quot;);
    &#125;
&#125;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

public class CreateProxy implements InvocationHandler &#123;
    private Object target;//被代理的对象

    //用于创建代理对象的方法
    public Object create(Object target)&#123;
        this.target = target;
        Object proxy = (Object) Proxy.newProxyInstance(target.getClass().getClassLoader(),
                target.getClass().getInterfaces(),this);
        return proxy;
    &#125;

    /**
     *
     * @param proxy 代理类对象
     * @param method 被代理对象的方法
     * @param args 方法的参数
     * @return
     * @throws Throwable
     */
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
        System.out.println(&quot;接项目做赚钱&quot;);
        System.out.println(&quot;上网上买&quot;);
        method.invoke(target,args);
        System.out.println(&quot;梦想成真&quot;);
        return null;
    &#125;
&#125;

public class ProxyTest &#123;
    public static void main(String[] args) &#123;
        CreateProxy cp = new CreateProxy();
        Subject person = new Person();
        Subject proxy  = (Subject) cp.create(person);
        proxy.shopping();//会调用invoke方法
    &#125;
&#125;
</code></pre>
<h1 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h1><p>将一个类的接口转换成客户希望的另一个接口，用于使原来由于接口不兼容而不能一起工作的那些类可以一起工作</p>
<pre><code class="java">public class Test12&#123;
    public static void main(String[] args)&#123;
        
        Animal dog = new Dog();
        dog.run();

        PowerA powerA = new PowerAImpl();
        PowerB powerB = new PowerBImpl();
        Adapter adapter = new Adapter(powerB);
        work(powerA);
        //work(powerB);若这样传则报错
        work(adapter);
    &#125;
    public static void work(PowerA a)&#123;
        a.insert();
    &#125;
&#125;

/*第一种适配器*/
interface Animal&#123;
    public void sing();
    public void cry();
    public void run();
    public void swim();
&#125;

//适配器，当只需要实现一个方法的时候，避免子类多次重复空实现
abstract class AnimalFunction implements Animal&#123;
    public void sing()&#123;&#125;;
    public void cry()&#123;&#125;;
    public void run()&#123;&#125;;
    public void swim()&#123;&#125;;
&#125;

class Dog extends AnimalFunction&#123;
    public void run()&#123;
        System.out.println(&quot;the dog is running&quot;);
    &#125;
&#125;

/*第二种适配器*/
interface PowerA&#123;
    public void insert();
&#125;

class PowerAImpl implements PowerA&#123;
    public void insert()&#123;
        System.out.println(&quot;电源A开始工作&quot;);
    &#125;
&#125;
interface PowerB&#123;
    public void insert();
&#125;

class Adapter implements PowerA&#123;
    private PowerB powerB;
    public Adapter(PowerB powerB)&#123;
        this.powerB = powerB;
    &#125;
    public void insert()&#123;
        powerB.insert();
    &#125;
&#125;
class PowerBImpl implements PowerB&#123;
    public void insert()&#123;
        System.out.println(&quot;电源B开始工作&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="装饰者模式"><a href="#装饰者模式" class="headerlink" title="装饰者模式"></a>装饰者模式</h1><p>动态的给一个对象添加一些额外的职责,适用于子类过多,不能通过生成子类的方式进行扩充时  </p>
<pre><code class="java">/**
 * Drink.java
**/
package decorator;

//被装饰者的基类(接口)
public interface Drink &#123;
    float cost();//计算价格
    String description();//描述
&#125;

/**
 * SoyaBeanMilk.java
 **/
package decorator;
//具体的被装饰者的类
public class SoyaBeanMilk implements Drink&#123;


    @Override
    public float cost() &#123;
        return 3;
    &#125;

    @Override
    public String description() &#123;
        return &quot;纯豆浆&quot;;
    &#125;
    
&#125;

/**
 * Decorator.java
 **/
package decorator;

//装饰者的基类
public class Decorator implements Drink&#123;

    private Drink drink;//要装饰的对象
    
    public Decorator(Drink drink) &#123;
        this.drink = drink;
    &#125;
    @Override
    public float cost() &#123;
        return drink.cost();
    &#125;

    @Override
    public String description() &#123;
        return drink.description();
    &#125;

&#125;

/**
 * SugarDecorator.java
 **/
package decorator;

//具体的装饰类1
public class SugarDecorator extends Decorator&#123;

    public SugarDecorator(Drink drink) &#123;
        super(drink);
    &#125;
    @Override
    public float cost() &#123;
        return super.cost()+1.0f;
    &#125;
    
    @Override
    public String description() &#123;
        return super.description()+&quot;+ 糖&quot;;
    &#125;
&#125;

//具体的装饰类2
public class EggDecorator extends Decorator&#123;

    public EggDecorator(Drink drink) &#123;
        super(drink);
    &#125;
    @Override
    public float cost() &#123;
        return super.cost()+2.0f;
    &#125;
    
    @Override
    public String description() &#123;
        return super.description()+&quot;+ 蛋&quot;;
    &#125;
&#125;

//具体的装饰类3
public class BlackBeanDecorator extends Decorator&#123;

    public BlackBeanDecorator(Drink drink) &#123;
        super(drink);
    &#125;
    @Override
    public float cost() &#123;
        return super.cost()+2.0f;
    &#125;
    
    @Override
    public String description() &#123;
        return super.description()+&quot;+ 黑豆&quot;;
    &#125;
&#125;

/**
 * Test.java
 **/
package decorator;

public class Test &#123;

    public static void main(String[] args) &#123;
        
        Drink drink = new SoyaBeanMilk();
        SugarDecorator sugar = new SugarDecorator(drink);
        EggDecorator egg = new EggDecorator(sugar);
        BlackBeanDecorator blackBean = new BlackBeanDecorator(egg);
        
        System.out.println(&quot;你点的内容是:&quot; + blackBean.description());
        System.out.println(&quot;总价:&quot;+blackBean.cost()+&quot;元&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="观察者设计模式"><a href="#观察者设计模式" class="headerlink" title="观察者设计模式"></a>观察者设计模式</h1><pre><code class="java">package abserver;

/**
 * 被观察者接口
 */
public interface MessageSubject &#123;
    //注册观察者
    public void registerObserver(Observer o);
    //移除观察者
    public void removeObserver(Observer o);
    //通知所有观察者
    public void notifyObsevers();
&#125;

/**
 * 观察者接口
 */
public interface Observer &#123;
    //更新消息
    public void update(String Message);
&#125;

import java.util.ArrayList;
import java.util.List;

/**
 * 具体的被观察者
 */
public class Message implements MessageSubject&#123;
    //维护的观察者列表
    private List&lt;Observer&gt; list = new ArrayList&lt;&gt;();
    //通知的消息
    private String message;

    public void setMessage(String message) &#123;
        this.message = message;
        notifyObsevers();
    &#125;

    @Override
    public void registerObserver(Observer o) &#123;
        list.add(o);
    &#125;

    @Override
    public void removeObserver(Observer o) &#123;
        list.remove(o);
    &#125;

    @Override
    public void notifyObsevers() &#123;
        for (int i = 0; i &lt; list.size(); i++) &#123;
            Observer observer = list.get(i);
            observer.update(message);
        &#125;
    &#125;
&#125;
/**
 * 具体的观察者
 */
public class User implements Observer&#123;
    private String name;

    public User(String name)&#123;
        this.name = name;
    &#125;

    @Override
    public void update(String Message) &#123;
        System.out.println(&quot;[&quot;+name+&quot;]&quot;+&quot;收到消息&quot;);
    &#125;
&#125;

//测试 
public class TestObserver &#123;
    public static void main(String[] args) &#123;
        Message message = new Message();

        Observer user1 = new User(&quot;Tom&quot;);
        Observer user2 = new User(&quot;Jack&quot;);
        Observer user3 = new User(&quot;Monkey&quot;);

        message.registerObserver(user1);
        message.registerObserver(user2);
        message.registerObserver(user3);

        message.setMessage(&quot;hello world&quot;);
        message.removeObserver(user1);
        message.setMessage(&quot;see you again&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="dao设计模式"><a href="#dao设计模式" class="headerlink" title="dao设计模式"></a>dao设计模式</h1><p>DAO指的是Database Access Object，将数据库操作分为：</p>
<ul>
<li><code>DAO接口</code></li>
<li><code>DAO接口实现类</code></li>
<li><code>实体类</code>：对应表中数据</li>
<li><code>工具类</code>：实现数据库的具体操作</li>
</ul>
<p>文件命名规范：</p>
<ol>
<li>DAO接口类写在<code>com.xx.dao</code>包中</li>
<li>接口实现类写在<code>com.xx.dao.impl</code>包中</li>
<li>实体类写在<code>com.xx.beans</code>包中</li>
<li>工具类写在<code>com.xx.util</code>包中</li>
</ol>
<p>数据库配置文件：</p>
<pre><code>driver = com.mysql.jdbc.Driver
url = jdbc:mysql://127.0.0.1:3306/blog?useSSL=false
user = root
password = xxx
</code></pre>
<p>实体类：</p>
<pre><code class="java">package com.xm.beans;

import java.io.Serializable;

public class Student implements Serializable &#123;
    private static final long serialVersionUID = -6861593743646559474L;
    private int id;
    private String stuName;
    private int age;
    private String course;
    private int score;

    public Student() &#123;
    &#125;

    public Student(int id, String stuName, int age, String course, int score) &#123;
        this.id = id;
        this.stuName = stuName;
        this.age = age;
        this.course = course;
        this.score = score;
    &#125;

    public static long getSerialVersionUID() &#123;
        return serialVersionUID;
    &#125;

    public int getId() &#123;
        return id;
    &#125;

    public void setId(int id) &#123;
        this.id = id;
    &#125;

    public String getStuName() &#123;
        return stuName;
    &#125;

    public void setStuName(String stuName) &#123;
        this.stuName = stuName;
    &#125;

    public int getAge() &#123;
        return age;
    &#125;

    public void setAge(int age) &#123;
        this.age = age;
    &#125;

    public String getCourse() &#123;
        return course;
    &#125;

    public void setCourse(String course) &#123;
        this.course = course;
    &#125;

    public int getScore() &#123;
        return score;
    &#125;

    public void setScore(int score) &#123;
        this.score = score;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;Student&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, stuName=&#39;&quot; + stuName + &#39;\&#39;&#39; +
                &quot;, age=&quot; + age +
                &quot;, course=&#39;&quot; + course + &#39;\&#39;&#39; +
                &quot;, score=&quot; + score +
                &#39;&#125;&#39;;
    &#125;
&#125;
</code></pre>
<p>工具类：</p>
<pre><code class="java">package hellojdbc.com.xm.util;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.sql.*;
import java.util.Properties;

/**
 * 封装MySQL操作工具类
 * 1. 注册驱动
 * 2. 获取连接
 * 3. 关闭连接
 * 4. 执行命令
 */
public class DbUtiles &#123;
    //驱动名称
    private static String driver;
    //连接字符串
    private static String url;
    //用户名
    private static String userName;
    //密码
    private static String password;

    static &#123;

        Properties properties = new Properties();
        //一种加载方法
        try &#123;
            FileInputStream fis = new FileInputStream(&quot;src/database.properties&quot;);
        &#125; catch (FileNotFoundException e) &#123;
            e.printStackTrace();
        &#125;
        //推荐使用这种方式，加载的是放在编译后.class文件夹中的properties文件
        InputStream is = DbUtiles.class.getClassLoader().getResourceAsStream(&quot;database.properties&quot;);

        try &#123;
            properties.load(is);
            is.close();
            driver = properties.getProperty(&quot;driver&quot;);
            url = properties.getProperty(&quot;url&quot;);
            userName = properties.getProperty(&quot;user&quot;);
            password = properties.getProperty(&quot;password&quot;);
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125;
        //注册驱动
        try &#123;
            Class.forName(driver);
        &#125; catch (ClassNotFoundException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;

    //获取连接
    public static Connection getConnection()&#123;
        try &#123;
            return DriverManager.getConnection(url, userName, password);
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
        return null;
    &#125;

    //关闭连接
    public static void closeAll(Connection connection, Statement statement,ResultSet resultSet)&#123;
        if(resultSet!=null)&#123;
            try &#123;
                resultSet.close();
            &#125; catch (SQLException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        if(statement!=null)&#123;
            try&#123;
                statement.close();
            &#125;catch (SQLException e)&#123;
                e.printStackTrace();
            &#125;
        &#125;
        if(connection!=null)&#123;
            try &#123;
                connection.close();
            &#125; catch (SQLException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
    &#125;

    //执行命令（DML）,需要使用可变长度数组作为参数，可以执行增删改
    public static int executeUpdate(String sql,Object...objects)&#123;
        Connection connection = null;
        PreparedStatement preparedStatement = null;
        connection = getConnection();
        try &#123;
            preparedStatement = connection.prepareStatement(sql);
            for(int i=0;i&lt;objects.length;i++)&#123;
                preparedStatement.setObject(i+1,objects[i]);
            &#125;
            int result = preparedStatement.executeUpdate();
            closeAll(connection,preparedStatement,null);
            return result;
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
            return 0;
        &#125;
    &#125;
&#125;
</code></pre>
<p>接口类：</p>
<pre><code class="java">package hellojdbc.com.xm.dao;

import com.xm.beans.Student;

import java.util.List;

public interface StudentDao &#123;
    //查找所有
    List&lt;Student&gt; findAll();
    //查找指定
    Student findById(int id);
    //更新
    void update(Student student);
    //删除
    void delete(int id);
    //添加
    void add(Student student);
&#125;
</code></pre>
<p>接口实现类：</p>
<pre><code class="java">package com.xm.dao.impl;

import com.xm.beans.Student;
import hellojdbc.com.xm.dao.StudentDao;
import hellojdbc.com.xm.util.DbUtiles;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class StudentDaoImpl implements StudentDao &#123;
    @Override
    public List&lt;Student&gt; findAll() &#123;
        List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();
        Connection connection = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        connection = DbUtiles.getConnection();
        try &#123;
            ps = connection.prepareStatement(&quot;select * from students&quot;);
            rs = ps.executeQuery();
            while (rs.next())&#123;
                int id = rs.getInt(&quot;id&quot;);
                String stuName = rs.getString(&quot;stuName&quot;);
                int age = rs.getInt(&quot;age&quot;);
                String course = rs.getString(&quot;course&quot;);
                int score = rs.getInt(&quot;score&quot;);

                Student student = new Student(id,stuName,age,course,score);
                students.add(student);
            &#125;
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;finally &#123;
            DbUtiles.closeAll(connection,ps,rs);
        &#125;
        return students;
    &#125;

    @Override
    public Student findById(int id) &#123;
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        Student student = null;
        try &#123;
            conn = DbUtiles.getConnection();
            ps = conn.prepareStatement(&quot;select * from students where id=&quot;+id);
            rs =  ps.executeQuery();
            if(rs.next())&#123;
                String stuName = rs.getString(&quot;stuName&quot;);
                int age = rs.getInt(&quot;age&quot;);
                String course = rs.getString(&quot;course&quot;);
                int score = rs.getInt(&quot;score&quot;);
                student = new Student(id,stuName,age,course,score);
            &#125;
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;finally &#123;
            DbUtiles.closeAll(conn,ps,rs);
            return student;
        &#125;
    &#125;

    @Override
    public void update(Student student) &#123;
        Object[] params = &#123;student.getAge(),student.getScore(),student.getId()&#125;;
        DbUtiles.executeUpdate(&quot;update students set age=?,score=? where id=?&quot;,params);
    &#125;

    @Override
    public void delete(int id) &#123;
        DbUtiles.executeUpdate(&quot;delete from students where id=?&quot;,id);
    &#125;

    @Override
    public void add(Student student) &#123;
        Object[] params = &#123;student.getId(),student.getStuName(),student.getAge(),student.getCourse(),student.getScore()&#125;;
        DbUtiles.executeUpdate(&quot;insert into students values (?,?,?,?,?)&quot;,params);
    &#125;
&#125;
</code></pre>
<p>测试：</p>
<pre><code class="java">package hellojdbc;

import com.xm.beans.Student;
import com.xm.dao.impl.StudentDaoImpl;
import hellojdbc.com.xm.dao.StudentDao;

import java.util.List;
import java.util.Scanner;

public class DAOTest &#123;
    public static void main(String[] args) &#123;
        System.out.println(&quot;请选择操作：1查询 2添加 3更新 4删除&quot;);
        Scanner input = new Scanner(System.in);
        int choice = input.nextInt();
        StudentDao studentDao = new StudentDaoImpl();
        switch (choice)&#123;
            case 1:
                List&lt;Student&gt; students = studentDao.findAll();
                for(Student student:students)&#123;
                    System.out.println(student.toString());
                &#125;
                break;
            case 2:
                System.out.println(&quot;请输入id&quot;);
                int id = input.nextInt();

                System.out.println(&quot;请输入姓名&quot;);
                String stuName = input.next();

                System.out.println(&quot;请输入年龄&quot;);
                int age = input.nextInt();

                System.out.println(&quot;请输入科目&quot;);
                String course = input.next();

                System.out.println(&quot;请输入分数&quot;);
                int score = input.nextInt();
                Student student = new Student(id,stuName,age,course,score);
                studentDao.add(student);
                System.out.println(&quot;添加成功！&quot;);
                break;
            case 3:
                System.out.println(&quot;要更新的编号：&quot;);
                int sid = input.nextInt();
                Student s = studentDao.findById(sid);
                if(s!=null)&#123;
                    System.out.println(&quot;输入分数&quot;);
                    int score1 = input.nextInt();
                    s.setScore(score1);
                    studentDao.update(s);
                    System.out.println(&quot;修改成功&quot;);
                &#125;else&#123;
                    System.out.println(&quot;没有此人&quot;);
                &#125;
                break;
            case 4:
                System.out.println(&quot;请输入删除编号&quot;);
                int num = input.nextInt();
                studentDao.delete(num);
                System.out.println(&quot;删除成功&quot;);
                break;
            default:
                System.out.println(&quot;操作失误&quot;);
        &#125;
    &#125;
&#125;   
</code></pre>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>打工不易，想买杯奶茶</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2018/12/07/Java%E5%9F%BA%E7%A1%80/" rel="prev" title="Java基础">
                  <i class="fa fa-chevron-left"></i> Java基础
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/01/11/java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="next" title="java数据结构">
                  java数据结构 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18114217号-1 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silverming</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.4m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">36:50</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
