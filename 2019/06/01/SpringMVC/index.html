<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="SpringMVC工作流程">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC">
<meta property="og:url" content="http://yoursite.com/2019/06/01/SpringMVC/index.html">
<meta property="og:site_name" content="Silverming的杂货笔记">
<meta property="og:description" content="SpringMVC工作流程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/xiao-ming9/xiao-ming9.github.io/blob/master/images/SpringMVC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.jpg?raw=true">
<meta property="og:image" content="https://github.com/xiao-ming9/xiao-ming9.github.io/blob/master/images/springMVC%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png?raw=true">
<meta property="article:published_time" content="2019-06-01T00:24:12.000Z">
<meta property="article:modified_time" content="2020-12-01T10:42:04.776Z">
<meta property="article:author" content="Silverming">
<meta property="article:tag" content="java">
<meta property="article:tag" content="spring">
<meta property="article:tag" content="spring mvc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/xiao-ming9/xiao-ming9.github.io/blob/master/images/SpringMVC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.jpg?raw=true">


<link rel="canonical" href="http://yoursite.com/2019/06/01/SpringMVC/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://yoursite.com/2019/06/01/SpringMVC/","path":"2019/06/01/SpringMVC/","title":"SpringMVC"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringMVC | Silverming的杂货笔记</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Silverming的杂货笔记</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Stay hungry,stay foolish</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">SpringMVC工作流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">开发流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">SpringMVC配置方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%88%E9%80%9A%E8%BF%87name%E6%89%BE%E5%88%B0Controller%EF%BC%89%EF%BC%9A"><span class="nav-number">3.1.</span> <span class="nav-text">第一种方式（通过name找到Controller）：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%88%E9%80%9A%E8%BF%87id%E6%89%BE%E5%88%B0Controller%EF%BC%89%EF%BC%9A"><span class="nav-number">3.2.</span> <span class="nav-text">第二种方式（通过id找到Controller）：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%88%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="nav-number">3.3.</span> <span class="nav-text">第三种方式（注解）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E4%B9%8B%E9%97%B4%E4%B8%9A%E5%8A%A1%E8%B7%B3%E8%BD%AC"><span class="nav-number">4.</span> <span class="nav-text">功能之间业务跳转</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E5%8A%9F%E8%83%BD%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BC%A0%E5%80%BC"><span class="nav-number">5.</span> <span class="nav-text">不同功能之间的传值</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E6%96%B9%E6%B3%95%E4%B9%8B%E9%97%B4%EF%BC%88C-C%EF%BC%89"><span class="nav-number">5.1.</span> <span class="nav-text">功能方法之间（C-C）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E5%85%B7%E4%BD%93%E7%9A%84%E5%8A%9F%E8%83%BD%E6%96%B9%E6%B3%95%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%88C-V%EF%BC%89"><span class="nav-number">5.2.</span> <span class="nav-text">从具体的功能方法到页面（C-V）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E9%A1%B5%E9%9D%A2%E5%88%B0%E5%88%B0%E5%8A%9F%E8%83%BD%E6%96%B9%E6%B3%95%EF%BC%88V-C%EF%BC%89"><span class="nav-number">5.3.</span> <span class="nav-text">从页面到到功能方法（V-C）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">6.</span> <span class="nav-text">数据格式化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F"><span class="nav-number">6.1.</span> <span class="nav-text">时间日期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="nav-number">6.1.1.</span> <span class="nav-text">注解方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="nav-number">6.1.2.</span> <span class="nav-text">使用日期转换器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="nav-number">6.2.</span> <span class="nav-text">对象转换器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E7%BB%91%E5%AE%9A%E6%95%B0%E6%8D%AE"><span class="nav-number">7.</span> <span class="nav-text">嵌套绑定数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">8.</span> <span class="nav-text">转发与重定向</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">9.</span> <span class="nav-text">文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">9.1.</span> <span class="nav-text">多文件上传</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSON%E5%A4%84%E7%90%86"><span class="nav-number">10.</span> <span class="nav-text">JSON处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97json"><span class="nav-number">10.1.</span> <span class="nav-text">嵌套json</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE"><span class="nav-number">11.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E8%A7%86%E5%9B%BE"><span class="nav-number">11.1.</span> <span class="nav-text">物理视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE"><span class="nav-number">11.2.</span> <span class="nav-text">逻辑视图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%A0%E5%80%BC"><span class="nav-number">12.</span> <span class="nav-text">重定向传值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">13.</span> <span class="nav-text">统一异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A-%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E5%93%8D%E5%BA%94%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%89"><span class="nav-number">13.1.</span> <span class="nav-text">方式一：(通常用于响应到页面）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E5%93%8D%E5%BA%94%E5%88%B0JSON%EF%BC%89"><span class="nav-number">13.2.</span> <span class="nav-text">方式二：注解的方法（通常用于响应到JSON）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">13.3.</span> <span class="nav-text">全局异常处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RestFul%E6%94%AF%E6%8C%81"><span class="nav-number">14.</span> <span class="nav-text">RestFul支持</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Resetful%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="nav-number">14.1.</span> <span class="nav-text">Resetful请求方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">15.</span> <span class="nav-text">拦截器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E6%B3%A8%E8%A7%A3"><span class="nav-number">16.</span> <span class="nav-text">参数注解</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Silverming</p>
  <div class="site-description" itemprop="description">Wechat:934933088</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">142</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/01/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Silverming">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silverming的杂货笔记">
      <meta itemprop="description" content="Wechat:934933088">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SpringMVC | Silverming的杂货笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringMVC
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-01 08:24:12" itemprop="dateCreated datePublished" datetime="2019-06-01T08:24:12+08:00">2019-06-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-12-01 18:42:04" itemprop="dateModified" datetime="2020-12-01T18:42:04+08:00">2020-12-01</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>34k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>31 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="SpringMVC工作流程"><a href="#SpringMVC工作流程" class="headerlink" title="SpringMVC工作流程"></a>SpringMVC工作流程</h1><p><img src="https://github.com/xiao-ming9/xiao-ming9.github.io/blob/master/images/SpringMVC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.jpg?raw=true"></p>
<span id="more"></span>
<ol>
<li>用户发送的请求首先都会被<strong>前端控制器（中央控制器）</strong><code>DispatcherServlet</code>捕获</li>
<li>中央控制器通过<strong>处理器映射器</strong><code>HandleMapping</code>找到对应的处理器返回给中央控制器</li>
<li>中央控制器根据返回的处理器调用<strong>处理器适配器</strong><code>HandleAdapter</code>，处理器适配器经过适配调用具体的Controller，并将得到的ModelAndView返回给中央控制器</li>
<li>中央控制器将结果传递给<strong>视图解析器</strong><code>ViewReslover</code></li>
<li>视图解析器解析后返回具体视图</li>
</ol>
<h1 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h1><ol>
<li>需要导入的包：</li>
</ol>
<pre><code class="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
        &lt;version&gt;5.1.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
        &lt;version&gt;4.0.1&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
        &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;
        &lt;version&gt;2.3.3&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;
        &lt;artifactId&gt;jstl&lt;/artifactId&gt;
        &lt;version&gt;1.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.taglibs&lt;/groupId&gt;
        &lt;artifactId&gt;taglibs-standard-jstlel&lt;/artifactId&gt;
        &lt;version&gt;1.2.5&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<blockquote>
<p>运行后需要检查tomat相关的out文件lib目录下是否也已经导入，如果没有需要手动加入（project structure-&gt;artifacts-&gt;在lib目录下添加  </p>
</blockquote>
<ol start="2">
<li>项目目录结构<br><img src="https://github.com/xiao-ming9/xiao-ming9.github.io/blob/master/images/springMVC%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png?raw=true"></li>
<li>配置中央控制器:在<code>web.xml</code>文件中进行配置</li>
</ol>
<pre><code class="xml">?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;&gt;

    &lt;!-- 配置过滤器 --&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;myfilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;

        &lt;!-- 指定编码 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;utf-8&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;!-- 启动强编码 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;myfilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
        &lt;!-- 关联中央处理器 --&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;!-- 读取springmvc的配置文件 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</code></pre>
<ol start="4">
<li>配置处理器映射器，处理器适配器，视图解析器：在spring配置文件中进行配置</li>
</ol>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 配置处理器映射器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;&gt;&lt;/bean&gt;
    &lt;!-- 配置处理器适配器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;&gt;&lt;/bean&gt;
    &lt;!-- 配置视图解析器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;&lt;/bean&gt;


    &lt;!-- 配置action --&gt;
    &lt;bean name=&quot;/hello.do&quot; class=&quot;com.xm.action.HelloAction&quot;&gt;&lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<ol start="5">
<li>开发模型层</li>
</ol>
<pre><code class="java">package com.xm.action;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * 控制层
 */
public class HelloAction implements Controller &#123;
    @Override
    public ModelAndView handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception &#123;
        ModelAndView mv = new ModelAndView();
        //可以返回视图+数据
        mv.addObject(&quot;hello&quot;,&quot;SpringMVC world!&quot;);
        //返回跳转的地址
        mv.setViewName(&quot;index.jsp&quot;);
        return mv;
    &#125;
&#125;
</code></pre>
<ol start="6">
<li>开发视图层</li>
</ol>
<pre><code class="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;springMVC&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  $&#123;hello&#125;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h1 id="SpringMVC配置方式"><a href="#SpringMVC配置方式" class="headerlink" title="SpringMVC配置方式"></a>SpringMVC配置方式</h1><h2 id="第一种方式（通过name找到Controller）："><a href="#第一种方式（通过name找到Controller）：" class="headerlink" title="第一种方式（通过name找到Controller）："></a>第一种方式（通过name找到Controller）：</h2><ol>
<li>配置前端控制器：</li>
</ol>
<pre><code class="xml">&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;&gt;

    &lt;!-- 配置过滤器 --&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;myfilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;

        &lt;!-- 指定编码 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;utf-8&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;!-- 启动强编码 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;myfilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
        &lt;!-- 关联中央处理器 --&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;!-- 读取springmvc的配置文件 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</code></pre>
<ol start="2">
<li>配置处理器映射器：使用<code>BeanNameUrlHandlerMapping</code>类型</li>
<li>配置处理器适配器：使用<code>SimpleControllerHandlerAdapter</code>类型</li>
<li>配置视图解析器：使用<code>InternalResourceViewResolver</code>类型</li>
</ol>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 配置处理器映射器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;&gt;&lt;/bean&gt;
    &lt;!-- 配置处理器适配器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;&gt;&lt;/bean&gt;
    &lt;!-- 配置视图解析器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;&lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<ol start="5">
<li>实现表现层：实现<code>Controller</code>接口</li>
</ol>
<pre><code class="java">import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * 控制层
 */
public class HelloAction implements Controller &#123;
    @Override
    public ModelAndView handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception &#123;
        ModelAndView mv = new ModelAndView();
        //可以返回视图+数据
        mv.addObject(&quot;hello&quot;,&quot;SpringMVC world!&quot;);
        //返回跳转的地址
        mv.setViewName(&quot;index.jsp&quot;);
        return mv;
    &#125;
&#125;
</code></pre>
<ol start="6">
<li>配置action：在applicationContext配置文件中</li>
</ol>
<pre><code class="xml">&lt;!-- 配置action --&gt;
&lt;bean name=&quot;/hello.do&quot; class=&quot;com.xm.action.HelloAction&quot;&gt;&lt;/bean&gt;
</code></pre>
<h2 id="第二种方式（通过id找到Controller）："><a href="#第二种方式（通过id找到Controller）：" class="headerlink" title="第二种方式（通过id找到Controller）："></a>第二种方式（通过id找到Controller）：</h2><ol>
<li>配置前端控制器：跟第一种配置方式一样</li>
<li>配置处理器映射器：使用<code>SimpleUrlHandlerMapping</code>类型</li>
<li>配置处理器适配器：使用<code>HttpRequestHandlerAdapter</code></li>
<li>配置视图解析器：跟第一种方式一样</li>
</ol>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 配置处理器映射器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;/&gt;
    &lt;!-- 配置处理器适配器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot;/&gt;
    &lt;!-- 配置视图解析器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;/&gt;

&lt;/beans&gt;
</code></pre>
<ol start="5">
<li>开发表现层的action（实现<code>HttpRequestHandler</code>接口）</li>
</ol>
<pre><code class="java">import org.springframework.web.HttpRequestHandler;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ActionByHttpRequestHandlerAction implements HttpRequestHandler &#123;
    @Override
    public void handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException &#123;
        //设置值
        httpServletRequest.setAttribute(&quot;name&quot;,&quot;第二种配置方式&quot;);
        //跳转页面到指定页面
        httpServletRequest.getRequestDispatcher(&quot;httpRequestHandler.jsp&quot;).forward(httpServletRequest,httpServletResponse);
    &#125;
&#125;
</code></pre>
<ol start="6">
<li>配置action:使处理器映射器关联具体的id</li>
</ol>
<pre><code class="xml">&lt;!-- 配置处理器映射器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
    &lt;!-- 关联具体的id --&gt;
    &lt;property name=&quot;mappings&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;/action.do&quot;&gt;secondAction&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;!-- 配置处理器适配器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot;/&gt;
&lt;!-- 配置视图解析器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;/&gt;

&lt;!-- 配置Action --&gt;
&lt;bean id=&quot;secondAction&quot; class=&quot;com.xm.action.ActionByHttpRequestHandlerAction&quot;&gt;&lt;/bean&gt;
</code></pre>
<h2 id="第三种方式（注解）"><a href="#第三种方式（注解）" class="headerlink" title="第三种方式（注解）"></a>第三种方式（注解）</h2><ol>
<li>配置前端控制器（同前面）</li>
<li>配置注解的映射器和适配器，有两种方式</li>
</ol>
<ul>
<li>分别配置<code>RequestMappingHandlerMapping</code>和<code>RequestMappingHandlerAdapter</code></li>
</ul>
<pre><code class="xml">&lt;!-- 注解映射器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;&gt;&lt;/bean&gt;
&lt;!-- 注解适配器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;&gt;&lt;/bean&gt;
</code></pre>
<ul>
<li>直接使用注解驱动</li>
</ul>
<pre><code class="xml">&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
</code></pre>
<ol start="3">
<li>配置视图解析器(同前两种方式）</li>
<li>开发action，使用注解方式<strong>不需要实现接口</strong><blockquote>
<p>注解可以加在类上，表示<strong>根路径</strong>，加在方法上表示<strong>具体的路径</strong></p>
</blockquote>
</li>
</ol>
<p>可以通过指定请求方式：</p>
<blockquote>
<p>(value&#x3D;”&#x2F;test”,method&#x3D;RequestMethod.POST&#x2F;GET&#x2F;..) 此时不能省略value，如果没指定method默认接受任意方式（请求方式不正确会报<strong>405</strong>错误）  </p>
</blockquote>
<p><strong>请求表达式</strong><br>用于通过表达式精确映射请求</p>
<blockquote>
<p><code>(value=&quot;/testparam&quot;,params=&#123;&quot;username&quot;,&quot;age!=10&quot;&#125;，headers=&#123;&quot;Accept-Language=zh-CN,zh;q=0.8&quot;&#125;)</code>表示参数必须含有username和age，并且age不能等于10，同时请求头内的内容必须符合固定值  </p>
</blockquote>
<pre><code class="java">import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Controller
(&quot;/prefix&quot;)
public class AnnotationsAction &#123;

    //方法自定义
    //设置请求路径
    (&quot;/annotation.do&quot;)
    public ModelAndView testAction(HttpServletRequest request, HttpServletResponse response)&#123;
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;,&quot;注解配置方法&quot;);
        mv.setViewName(&quot;/annotation.jsp&quot;);
        return mv;
    &#125;
&#125;
</code></pre>
<ol start="6">
<li>配置注解扫描:使容器创建对象</li>
</ol>
<pre><code class="xml">&lt;context:component-scan base-package=&quot;com.xm.action&quot;&gt;&lt;/context:component-scan&gt;
</code></pre>
<h1 id="功能之间业务跳转"><a href="#功能之间业务跳转" class="headerlink" title="功能之间业务跳转"></a>功能之间业务跳转</h1><p>有两种方式实现</p>
<ul>
<li>方式一：通过ModelAndView返回其他业务的内容</li>
</ul>
<pre><code class="java">(&quot;/to-annotation1.do&quot;)
public ModelAndView pageJump1(HttpServletRequest request)&#123;
    ModelAndView mv = new ModelAndView();
    mv.setViewName(&quot;/prefix/annotation.do&quot;);//如果有定义根路径，需要加上根路径
    return mv;
&#125;
</code></pre>
<ul>
<li>方式二：通过字符串直接返回</li>
</ul>
<pre><code class="java">(&quot;/to-annotation2.do&quot;)
public String pageJump2(HttpServletRequest request)&#123;
    return &quot;/prefix/annotation.do&quot;;
&#125;
</code></pre>
<h1 id="不同功能之间的传值"><a href="#不同功能之间的传值" class="headerlink" title="不同功能之间的传值"></a>不同功能之间的传值</h1><h2 id="功能方法之间（C-C）"><a href="#功能方法之间（C-C）" class="headerlink" title="功能方法之间（C-C）"></a>功能方法之间（C-C）</h2><ul>
<li>Request</li>
<li>Session</li>
<li>Cache（分布式缓存）</li>
</ul>
<pre><code class="java">(&quot;/addCar.do&quot;)
public String addCar(HttpServletRequest request)&#123;
    request.setAttribute(&quot;tag&quot;,&quot;电动汽车&quot;);
    return &quot;/listCar.do&quot;;
&#125;

(&quot;/listCar.do&quot;)
public ModelAndView listCar(HttpServletRequest request)&#123;
    //ModelAndView可以传值、跳转页面
    ModelAndView mv = new ModelAndView();
    Object tag = request.getAttribute(&quot;tag&quot;);
    mv.addObject(&quot;tag&quot;,tag);
    mv.setViewName(&quot;/car.jsp&quot;);
    return mv;
&#125;
</code></pre>
<h2 id="从具体的功能方法到页面（C-V）"><a href="#从具体的功能方法到页面（C-V）" class="headerlink" title="从具体的功能方法到页面（C-V）"></a>从具体的功能方法到页面（C-V）</h2><ul>
<li><p>ModelAndView</p>
<blockquote>
<p>setViewName设置跳转地址，addObject传数据  </p>
</blockquote>
</li>
<li><p>Map方式</p>
</li>
</ul>
<pre><code class="java">public String addCar2(Integer carnum, String carname, Map&lt;String,String&gt;)&#123;
    System.out.println(carname);
    System.out.println(carnum);
    map.put(&quot;tag&quot;,username);//会自动将数据传递到页面
    return &quot;car.jsp&quot;;
&#125;
</code></pre>
<ul>
<li>Model方式<blockquote>
<p>model带数据，return返回地址</p>
</blockquote>
</li>
</ul>
<pre><code class="java">(&quot;/addCar2.do&quot;)
public String addCar2(Integer carnum, String carname, Model model)&#123;
    System.out.println(carname);
    System.out.println(carnum);
    model.addAttribute(&quot;tag&quot;,carname);
    return &quot;car.jsp&quot;;
&#125;
</code></pre>
<h2 id="从页面到到功能方法（V-C）"><a href="#从页面到到功能方法（V-C）" class="headerlink" title="从页面到到功能方法（V-C）"></a>从页面到到功能方法（V-C）</h2><ul>
<li>request.getParameter</li>
</ul>
<pre><code class="java">(&quot;/addCar.do&quot;)
public String addCar(HttpServletRequest request)&#123;
      //在这里获取传过来的值
    String carname = request.getParameter(&quot;carname&quot;);
    System.out.println(carname);
    request.setAttribute(&quot;tag&quot;,carname);
    return &quot;/listCar.do&quot;;
&#125;
</code></pre>
<ul>
<li>指定具体的类型接收具体的参数</li>
</ul>
<pre><code class="html">&lt;form action=&quot;/addCar2.do&quot; method=&quot;post&quot;&gt;
    汽车名称：&lt;input type=&quot;text&quot; name=&quot;carname&quot;&gt;&lt;br&gt;
    购买数量：&lt;input type=&quot;text&quot; name=&quot;carnum&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>
<pre><code class="java">(&quot;/addCar2.do&quot;)
public String addCar2(String carname,Integer carnum)&#123;
    System.out.println(carname);
    System.out.println(carnum);
    return &quot;/listCar.do&quot;;
&#125;
</code></pre>
<blockquote>
<p>这种方式要求传的类型,名称与形参类型，名称一一对应，一旦类型不匹配，直接报错，找不到相应的跳转页面，不进行跳转  </p>
</blockquote>
<p>当参数是数组类型时：</p>
<pre><code class="html">&lt;form action=&quot;/delCar.do&quot; method=&quot;post&quot;&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;1&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;2&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;3&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;4&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;5&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>
<pre><code class="java">(&quot;/delCar.do&quot;)
public String delCar(Integer[] cids)&#123;
    //获取数组的方式1：
    //String[] cids = request.getParameterValues(&quot;cid&quot;);
    //方式2：匹配参数（一般使用这种方式）
    for (Integer cid : cids) &#123;
        System.out.println(cid);
    &#125;
    return &quot;/listCar.do&quot;;
&#125;
</code></pre>
<ul>
<li>设置<strong>默认值</strong>及<strong>可选参数</strong><br>此时必须使用<code>@RequestParam</code>注解，并在其中使用<code>defaultValue</code>设置默认值，<code>required</code>设置参数是否可选</li>
</ul>
<pre><code class="java">(&quot;/list&quot;)
public String list(
    @RequestParam(value=&quot;currentpage&quot;,defaultValue=&quot;1&quot;,required=false)Integer currentpage,
    @RequestParam(value=&quot;pagesize&quot;,defaultValue=&quot;10&quot;,required=false)Intrger pagesize)
)&#123;
    ....
&#125;
</code></pre>
<ul>
<li>使用封装类型bean来接收多个参数</li>
</ul>
<pre><code class="java">/**
 * 使用该类来接收参数
 */
public class CarDTO &#123;
    private String carname;
    private Integer carnum;
    private Integer[] cids;

    public String getCarname() &#123;
        return carname;
    &#125;

    public void setCarname(String carname) &#123;
        this.carname = carname;
    &#125;

    public Integer getCarnum() &#123;
        return carnum;
    &#125;

    public void setCarnum(Integer carnum) &#123;
        this.carnum = carnum;
    &#125;

    public Integer[] getCids() &#123;
        return cids;
    &#125;

    public void setCids(Integer[] cids) &#123;
        this.cids = cids;
    &#125;
&#125;
</code></pre>
<pre><code class="html">&lt;form action=&quot;/updateCar.do&quot; method=&quot;post&quot;&gt;
    汽车名称：&lt;input type=&quot;text&quot; name=&quot;carname&quot;&gt;&lt;br&gt;
    购买数量：&lt;input type=&quot;text&quot; name=&quot;carnum&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;1&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;2&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;3&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;4&quot;&gt;&lt;br&gt;
    汽车编号：&lt;input type=&quot;checkbox&quot; name=&quot;cids&quot; value=&quot;5&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>
<pre><code class="java">(&quot;/updateCar.do&quot;)
public String updateCar(CarDTO carDTO)&#123;
    System.out.println(&quot;汽车名称：&quot;+carDTO.getCarname());
    System.out.println(&quot;汽车数量：&quot;+carDTO.getCarnum());
    System.out.println(&quot;汽车编号：&quot;);
    Integer[] cids = carDTO.getCids();
    for (Integer cid : cids) &#123;
        System.out.println(cid);
    &#125;
    return &quot;/listCar.do&quot;;
&#125;
</code></pre>
<h1 id="数据格式化"><a href="#数据格式化" class="headerlink" title="数据格式化"></a>数据格式化</h1><h2 id="时间日期"><a href="#时间日期" class="headerlink" title="时间日期"></a>时间日期</h2><h3 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h3><p>对于类型定义的时间，数字类型，如果在前端直接以字符串方式传输过来，拿到之后无法进行解析匹配，这时候可以通过格式化注解方式进行转换，或者直接就把属性定义成String类型</p>
<pre><code class="java">public class CarDTO &#123;
    private String carname;
    private Integer carnum;
    private Integer[] cids;

    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)
    private Date create;//如果直接接收会失败，如果想直接接收，需要使用string类型

    @NumberFormat(pattern = &quot;#,###,###.##&quot;)
    private Double price;
&#125;
</code></pre>
<p>在页面上，如果希望输出格式化的数据，可以使用jsp的<code>fmt</code>(format)标签</p>
<pre><code class="jsp">&lt;c:forEach items=&quot;$&#123;carList&#125;&quot; var=&quot;car&quot;&gt;
    $&#123;car.carname&#125;,
    $&#123;car.carnum&#125;,
    &lt;fmt:formatDate value=&quot;$&#123;car.create&#125;&quot; pattern=&quot;yyyy-MM-dd hh:mm:ss&quot;/&gt;
    &lt;fmt:formatNumber value=&quot;$&#123;car.price&#125;&quot; pattern=&quot;#,###,###.##&quot;/&gt;&lt;br&gt;
&lt;/c:forEach&gt;
</code></pre>
<h3 id="使用日期转换器"><a href="#使用日期转换器" class="headerlink" title="使用日期转换器"></a>使用日期转换器</h3><p>通过继承Converter接口，实现自定义日期格式</p>
<pre><code class="java">public class DateConverter implements Converter&lt;String, Date&gt; &#123;
    @Override
    public Date convert(String s) &#123;
        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
        try &#123;
            sdf.setLenient(false);//是否宽松解析：默认为true
            return sdf.parse(s);
        &#125; catch (ParseException e) &#123;
            e.printStackTrace();
        &#125;
        return null;
    &#125;
&#125;
</code></pre>
<p>在springMVC中配置类型转换器</p>
<pre><code class="xml">&lt;mvc:annotation-driven conversion-service=&quot;myConversion&quot;/&gt;
&lt;!--类型转换器 --&gt;
&lt;bean id=&quot;myConversion&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;set&gt;
            &lt;bean class=&quot;com.xm.converter.DateConverter&quot;&gt;&lt;/bean&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<h2 id="对象转换器"><a href="#对象转换器" class="headerlink" title="对象转换器"></a>对象转换器</h2><pre><code class="java">public class UserConverter implements Converter&lt;String, User&gt; &#123;
    @Override
    public User convert(String s) &#123;
        System.out.println(s);
        if(s != null)&#123;
            String[] split = s.split(&quot;-&quot;);
            System.out.println(split.length);
            if (split != null &amp;&amp; split.length == 4)&#123;
                String username = split[0];
                String password = split[1];
                Integer age = Integer.parseInt(split[2]);
                String email = split[3];

                User user = new User();
                user.setUsername(username);
                user.setPassword(password);
                user.setAge(age);
                user.setEmaill(email);

                System.out.println(user);
                return user;
            &#125;
        &#125;
        return null;
    &#125;
&#125;
</code></pre>
<pre><code class="xml">&lt;!--类型转换器 --&gt;
&lt;bean id=&quot;myConversion&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;set&gt;
            &lt;bean class=&quot;com.xm.converter.DateConverter&quot;&gt;&lt;/bean&gt;
            &lt;bean class=&quot;com.xm.converter.UserConverter&quot;&gt;&lt;/bean&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<h1 id="嵌套绑定数据"><a href="#嵌套绑定数据" class="headerlink" title="嵌套绑定数据"></a>嵌套绑定数据</h1><p>针对内部类的属性：</p>
<pre><code class="java">public class CarDTO &#123;
    private String carname;
    private Integer carnum;
    private Integer[] cids;
    //关联对象
    private CarTypeDTO cartype;
&#125;

public class CarTypeDTO &#123;

    private String cartype;

      public String getCartype() &#123;
        return cartype;
    &#125;

    public void setCartype(String cartype) &#123;
        this.cartype = cartype;
    &#125;
</code></pre>
<p>在获取前端传过来的值时，jsp应该使用嵌套调用来获取：</p>
<pre><code class="html">汽车类型：&lt;input type=&quot;text&quot; name=&quot;cartype.cartype&quot;/&gt;
</code></pre>
<h1 id="转发与重定向"><a href="#转发与重定向" class="headerlink" title="转发与重定向"></a>转发与重定向</h1><p>页面之间的跳转默认使用的是转发</p>
<pre><code class="java">/**
* 转发
*/
(&quot;/addCar.do&quot;)
public String addCar(HttpServletRequest request)&#123;
    String carname = request.getParameter(&quot;carname&quot;);
    System.out.println(carname);
    request.setAttribute(&quot;tag&quot;,carname);
    return &quot;forward:/listCar.do&quot;;
&#125;

/**
* 重定向
*/
(&quot;/addCar.do&quot;)
public String addCar(HttpServletRequest request)&#123;
    String carname = request.getParameter(&quot;carname&quot;);
    System.out.println(carname);
    request.setAttribute(&quot;tag&quot;,carname);
    return &quot;redirect:/listCar.do&quot;;
&#125;
</code></pre>
<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><ol>
<li>导入<code> commons-fileupload.jar</code>和<code>commons-io.jar</code>依赖</li>
<li>开发上传页面</li>
</ol>
<pre><code class="html">&lt;form action=&quot;/uploadImg.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    汽车图片：&lt;input type=&quot;file&quot; name=&quot;img&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>
<ol start="3">
<li>配置文件类型解析器</li>
</ol>
<pre><code class="xml">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;
    &lt;!-- 设置最大文件大小(单位KB) --&gt;
    &lt;property name=&quot;maxUploadSize&quot; value=&quot;1048576&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<ol start="4">
<li>开发action<br>使用<code>MultipartFile</code>类对文件进行获取，添加<code>@RequestParam</code>注解，<strong>参数名要和前端传的name一致</strong><blockquote>
<p>@RequestParam(“img”) MultipartFile multipartFile</p>
</blockquote>
</li>
</ol>
<pre><code class="java">package com.xm.action;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpServletRequest;
import java.io.File;
import java.io.IOException;

@Controller
public class upLoadFile &#123;

    (&quot;/uploadImg.do&quot;)
    public String uploadImg(HttpServletRequest request, @RequestParam(&quot;img&quot;) MultipartFile multipartFile) throws IOException &#123;
        //使用request接收普通类型参数
        String name = request.getParameter(&quot;name&quot;);
        System.out.println(name);
        //使用multipartFile接收文件类型的参数
        //得到的文件名
        String originalFilename = multipartFile.getOriginalFilename();
        //存储的目标地址
        File dest = new File(&quot;/Users/xiaoming/IdeaProjects/SpringmvcStudy/File/&quot;+originalFilename);
        //将文件内容写入到指定的目标地方
        multipartFile.transferTo(dest);

        return &quot;/listCar.do&quot;;
    &#125;
&#125;
</code></pre>
<h2 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h2><p>使用<code>CommonsMultipartFile</code>注解获取前端传来的多个文件放在一个数组里</p>
<pre><code class="java">(&quot;/uploadImg2.do&quot;)
public String uploadImgs(HttpServletRequest request, @RequestParam(&quot;imgs&quot;)CommonsMultipartFile files[]) throws IOException &#123;
    String name = request.getParameter(&quot;name&quot;);
    System.out.println(name);
    //使用CommonsMultipartFile注解获取多个文件封装为数组
    for (CommonsMultipartFile file : files) &#123;
        String filename = file.getOriginalFilename();
        File dest = new File(&quot;/Users/xiaoming/IdeaProjects/SpringmvcStudy/File/&quot;+filename);
        file.transferTo(dest);
    &#125;
    return &quot;/listCar.do&quot;;
&#125;
</code></pre>
<h1 id="JSON处理"><a href="#JSON处理" class="headerlink" title="JSON处理"></a>JSON处理</h1><ol>
<li>导入json依赖包：</li>
</ol>
<ul>
<li>jackson-core</li>
<li>jackson-databind</li>
<li>jackson-annotations</li>
</ul>
<ol start="2">
<li>使用<code>ResponseBody</code>注解标识接口，会使该接口返回的数据直接封装成json格式</li>
</ol>
<pre><code class="java">/**
 * 响应json
 */
@ResponseBody
(&quot;/listJson.do&quot;)
public List&lt;CarDTO&gt; listJson(HttpServletRequest request)&#123;
    //封装数据
    List&lt;CarDTO&gt; list = new ArrayList&lt;&gt;();
    list.add(new CarDTO(&quot;car1&quot;,1,new Date(),2343.345345));
    list.add(new CarDTO(&quot;car2&quot;,2,new Date(),34.232));
    list.add(new CarDTO(&quot;car3&quot;,3,new Date(),235345.234));
    return list;
&#125;
</code></pre>
<p>对于时间类型，json会使用<strong>long类型</strong>作为响应，推荐直接使用String或者long类型</p>
<h2 id="嵌套json"><a href="#嵌套json" class="headerlink" title="嵌套json"></a>嵌套json</h2><pre><code class="java">/**
 * 响应json
 */
@ResponseBody
(&quot;/listJson2.do&quot;)
public Map&lt;String,Object&gt; listJson2(HttpServletRequest request)&#123;
    Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
    //封装数据
    List&lt;CarDTO&gt; list = new ArrayList&lt;&gt;();
    list.add(new CarDTO(&quot;car1&quot;,1,new Date(),2343.345345));
    list.add(new CarDTO(&quot;car2&quot;,2,new Date(),34.232));
    list.add(new CarDTO(&quot;car3&quot;,3,new Date(),235345.234));

    map.put(&quot;data&quot;, list);
    return map;
&#125;
</code></pre>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h2 id="物理视图"><a href="#物理视图" class="headerlink" title="物理视图"></a>物理视图</h2><p>使用页面完整路径：<br>配置视图解析器并且在action中通过<code>mv.setViewName(&quot;/hello.jsp&quot;)</code>返回跳转的地址</p>
<h2 id="逻辑视图"><a href="#逻辑视图" class="headerlink" title="逻辑视图"></a>逻辑视图</h2><p>通过相对路径，可以把页面放入受到保护的目录<strong>WEB-INF</strong>中，页面不能直接访问到，必须通过action做跳转</p>
<ol>
<li>视图解析器</li>
</ol>
<pre><code class="xml">&lt;!-- 视图解析器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
    &lt;!-- 逻辑视图 --&gt;
    &lt;!-- 前缀 --&gt;
    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/&quot;&gt;&lt;/property&gt;
    &lt;!-- 后缀 --&gt;
    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<ol start="2">
<li>action</li>
</ol>
<pre><code class="java">@Controller
public class HelloAction&#123;
    @RequestMapping(&quot;/myhello.do&quot;)
    public String myHello(HttpServletRequest request)&#123;
        //需要跳转的页面
        //return &quot;/WEB-INF/[前缀]hello.jsp[后缀]
        return &quot;hello&quot;;
    &#125;
&#125;
</code></pre>
<h1 id="重定向传值"><a href="#重定向传值" class="headerlink" title="重定向传值"></a>重定向传值</h1><p>当使用页面重定向时，通常request会被刷新，其中原来的数据就不存在了，可以使用<code>RedirectAttributes</code>l类在重定向时将值传给目标页面的request</p>
<pre><code class="java">(&quot;/preAdd.do&quot;)
public String preAdd(RedirectAttributes attributes)&#123;
    attributes.addAttribute(&quot;tag&quot;,&quot;重定向传值&quot;);
    return &quot;redirect:/myhello.do&quot;;
&#125;
</code></pre>
<h1 id="统一异常处理"><a href="#统一异常处理" class="headerlink" title="统一异常处理"></a>统一异常处理</h1><h2 id="方式一：-通常用于响应到页面）"><a href="#方式一：-通常用于响应到页面）" class="headerlink" title="方式一：(通常用于响应到页面）"></a>方式一：(通常用于响应到页面）</h2><ol>
<li>开发自定义的异常类</li>
</ol>
<pre><code class="java">package com.xm.exception;

public class CustomerException extends Exception &#123;
    private String message;

    public CustomerException() &#123;
    &#125;

    public CustomerException(String message) &#123;
        this.message = message;
    &#125;

    @Override
    public String getMessage() &#123;
        return message;
    &#125;

    public void setMessage(String message) &#123;
        this.message = message;
    &#125;
&#125;
</code></pre>
<ol start="2">
<li>开发统一异常处理器</li>
</ol>
<pre><code class="java">package com.xm.exception;

import org.springframework.web.servlet.HandlerExceptionResolver;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LogExceptionHandler implements HandlerExceptionResolver &#123;
    @Override
    public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) &#123;
        ModelAndView mv = new ModelAndView();
        CustomerException customerException = null;
        //获取系统的异常信息
        if(e instanceof CustomerException)&#123;
            customerException = (CustomerException) e;
        &#125;else &#123;
            customerException = new CustomerException(&quot;系统繁忙&quot;);
        &#125;
        mv.addObject(&quot;msg&quot;,customerException.getMessage());
        //跳转到统一错误信息页面
        mv.setViewName(&quot;error&quot;);
        return mv;
    &#125;
&#125;
</code></pre>
<ol start="3">
<li>在配置文件中配置异常处理Handler</li>
</ol>
<pre><code class="xml">&lt;!-- 配置异常处理 --&gt;
&lt;bean class=&quot;com.xm.exception.LogExceptionHandler&quot;&gt;&lt;/bean&gt;
</code></pre>
<p>error.jsp（异常抛出后显示的页面）</p>
<pre><code class="xml">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isELIgnored=&quot;false&quot; %&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;统一异常处理&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
欢迎访问XXX系统，$&#123;msg&#125;,请稍后重试
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ol start="4">
<li>开发Action</li>
</ol>
<pre><code class="java">/**
 * 使用默认页面内容显示
 * @param request
 * @return
 */
(&quot;/error-test.do&quot;)
public String errorTest(HttpServletRequest request)&#123;
    int i = 1/0;
    System.out.println(i);
    return &quot;hello&quot;;
&#125;

/**
 * 自定义内容显示
 * @param request
 * @return
 * @throws CustomerException
 */
(&quot;/error-test2.do&quot;)
public String errorTest2(HttpServletRequest request) throws CustomerException &#123;
    try &#123;
        int i = 1/0;
        System.out.println(i);
    &#125;catch (Exception e)&#123;
        e.printStackTrace();
        throw new CustomerException(&quot;不能除以0小老弟啊&quot;);
    &#125;
    return &quot;hello&quot;;
&#125;
</code></pre>
<h2 id="方式二：注解的方法（通常用于响应到JSON）"><a href="#方式二：注解的方法（通常用于响应到JSON）" class="headerlink" title="方式二：注解的方法（通常用于响应到JSON）"></a>方式二：注解的方法（通常用于响应到JSON）</h2><ul>
<li>不用实现异常Handler接口</li>
<li>不用配置异常Handler实现类</li>
<li>开发基类，所有的Action作为子类继承</li>
</ul>
<ol>
<li>开发自定义异常</li>
</ol>
<pre><code class="java">public class PayException extends Exception &#123;
    private Integer code;
    private String message;

    public PayException(Integer code, String message) &#123;
        this.code = code;
        this.message = message;
    &#125;

    public Integer getCode() &#123;
        return code;
    &#125;

    public void setCode(Integer code) &#123;
        this.code = code;
    &#125;

    @Override
    public String getMessage() &#123;
        return message;
    &#125;

    public void setMessage(String message) &#123;
        this.message = message;
    &#125;
&#125;
</code></pre>
<ol start="2">
<li>开发处理的基类<br>使用<code>@ExceptionHandler</code>注解，同时可以在注解中指定异常类只处理指定的异常<blockquote>
<p>@ExceptionHandler(‘NumberFormatException.class’)</p>
</blockquote>
</li>
</ol>
<pre><code class="java">public class BaseAction &#123;

    @ResponseBody   //响应json格式
    @ExceptionHandler   //异常处理器
    public Map&lt;String,Object&gt; myexp(HttpServletRequest req, Exception e)&#123;
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        if(e instanceof PayException)&#123;
            PayException payException = (PayException) e;
            map.put(&quot;code&quot;,payException.getCode());
            map.put(&quot;errot&quot;,payException.getMessage());
        &#125;else&#123;
            map.put(&quot;code&quot;,-1);
            map.put(&quot;error&quot;,&quot;系统繁忙&quot;);
        &#125;
        return map;
    &#125;
&#125;
</code></pre>
<ol start="3">
<li>开发Action继承类</li>
</ol>
<pre><code class="java">@Controller
public class PayAction extends BaseAction &#123;

    @ResponseBody
    (&quot;/pay.do&quot;)
    public Map&lt;String,Object&gt; pay(HttpServletRequest req) throws PayException &#123;
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        String money = req.getParameter(&quot;money&quot;);
        if(StringUtils.isEmpty(money))&#123;
            throw new PayException(-2,&quot;参数money输入有误&quot;);
        &#125;
        try &#123;
            int i = 1/0;
            System.out.println(i);
        &#125;catch (Exception e)&#123;
            e.printStackTrace();
            throw new PayException(-1,&quot;支付排队中。。。&quot;);
        &#125;
        map.put(&quot;code&quot;,0);
        map.put(&quot;message&quot;,&quot;支付成功&quot;);
        return map;
    &#125;
&#125;
</code></pre>
<h2 id="全局异常处理"><a href="#全局异常处理" class="headerlink" title="全局异常处理"></a>全局异常处理</h2><p>在异常处理器类或开发的基类的前面加上<code>@ControllerAdvice</code>，同时需要配置注解扫描</p>
<h1 id="RestFul支持"><a href="#RestFul支持" class="headerlink" title="RestFul支持"></a>RestFul支持</h1><p>主要针对get请求</p>
<ul>
<li><p>非RESTFul方式：</p>
<blockquote>
<p>https:&#x2F;&#x2F;域名&#x2F;xxxx?id&#x3D;3&amp;msg&#x3D;user  </p>
</blockquote>
</li>
<li><p>RESTFul方式：(简化URL，可读性较差，需要后台识别key）</p>
<blockquote>
<p>https:&#x2F;&#x2F;域名&#x2F;xxxx&#x2F;3&#x2F;user</p>
</blockquote>
</li>
</ul>
<ol>
<li>前端控制器拦截所有资源</li>
</ol>
<pre><code class="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
    &lt;!-- 关联中央处理器 --&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;!-- 读取springmvc的配置文件 --&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt; 
    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
    &lt;!-- 拦截所有 --&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>
<p>拦截所有后，WEB-INF文件夹下不能够直接访问，静态资源也被拦截，需要释放<br>2. 配置静态资源释放(springMVC配置文件中）</p>
<pre><code class="xml">&lt;!-- 配置静态资源解析
    表示js及其子目录的所有文件 --&gt;
&lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/js/&quot;&gt;&lt;/mvc:resources&gt;
&lt;mvc:resources mapping=&quot;/css/**&quot; location=&quot;/css/&quot;&gt;&lt;/mvc:resources&gt;
&lt;mvc:resources mapping=&quot;/img/**&quot; location=&quot;/img/&quot;&gt;&lt;/mvc:resources&gt;
</code></pre>
<ol start="3">
<li>action：需要在requestMapping中通过占位符设定参数名和顺序，同时使用<code>@PathVariable</code>注解变量</li>
</ol>
<pre><code class="java">@Controller
public class LogAction &#123;

    //给映射的路径用占位符
    (&quot;/addLog/&#123;id&#125;/&#123;msg&#125;&quot;)
    public String addLog(@PathVariable Integer id,@PathVariable String msg)&#123;
        //需要通过url get路径传递过来的动态参数
        //@PathVariable用于注解路径变量
        System.out.println(id);
        System.out.println(msg);
        return &quot;index&quot;;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>如果使用了逻辑视图，在功能方法之间跳转，如果存在方法的路径与视图重名，会导致直接跳转到页面，此时应该加上<strong>forward</strong>或者<strong>redirect</strong>来实现功能的跳转  </p>
</blockquote>
<h2 id="Resetful请求方式"><a href="#Resetful请求方式" class="headerlink" title="Resetful请求方式"></a>Resetful请求方式</h2><p>restful提供了get，post，delete，put多种方法进行，但是浏览器表单默认只支持post和get，spring提供了过滤器<code>HiddenHttpMethodFilter</code>,可以将这些请求转化为标砖的http方法，支持四种方式的请求<br><strong>过滤器配置</strong>：</p>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre>
<p><strong>from表单请求方式</strong></p>
<pre><code class="html">&lt;form action=&quot;delete/1&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;_method&quot; value=&quot;DELETE&quot;/&gt;
    ...
&lt;/form&gt;
</code></pre>
<h1 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h1><p>在action需要有前提条件的情况下使用，例如：需要先登录才能反问页面</p>
<ol>
<li>第一步：开发拦截器<br>需要实现<code>HandlerInterceptor</code>接口</li>
</ol>
<pre><code class="java">public class LogInterceptor implements HandlerInterceptor &#123;

    /**
     * 在执行具体方法之前调用
     * @param request
     * @param response
     * @param handler
     * @return
     * @throws Exception
     */
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;

        //对不要检验的页面放行
        String requestURI = request.getRequestURI();
        if(requestURI.indexOf(&quot;login&quot;)&gt;0)&#123;
            return true;
        &#125;
        //得到session是否有内容
        HttpSession session = request.getSession();
        Object user = session.getAttribute(&quot;user&quot;);
        if(user!=null)&#123;
            return true;//如果登陆了，正常访问所有action
        &#125;
        request.getRequestDispatcher(&quot;login.jsp&quot;).forward(request,response);
        return false;
    &#125;


    /**
     * 在进入Handler方法之后，返回modelAndView之前执行
     * 如果想要向页面提供一些公共数据或者一些公用的配置信息，可以考虑使用这里的ModelAndView
     * @param request
     * @param response
     * @param handler
     * @param modelAndView
     * @throws Exception
     */
    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;

    &#125;

    /**
     * 执行完Handler之后执行
     * 日志、系统性能分析
     * @param request
     * @param response
     * @param handler
     * @param ex
     * @throws Exception
     */
    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;

    &#125;
&#125;
</code></pre>
<ol start="2">
<li>配置拦截器</li>
</ol>
<pre><code class="xml">&lt;!-- 配置拦截器 --&gt;
&lt;mvc:interceptors&gt;
    &lt;mvc:interceptor&gt;
        &lt;mvc:mapping path=&quot;/*&quot;/&gt;&lt;!-- 系统的所有请求 --&gt;
        &lt;mvc:exclude-mapping path=&quot;/lib/**&quot;&gt; &lt;!-- 设置放行不拦截的路径 --&gt;
        &lt;bean class=&quot;com.xm.interceptor.LogInterceptor&quot;&gt;&lt;/bean&gt;&lt;!-- 登录拦截器 --&gt;
    &lt;/mvc:interceptor&gt;
&lt;/mvc:interceptors&gt;
</code></pre>
<h1 id="参数注解"><a href="#参数注解" class="headerlink" title="参数注解"></a>参数注解</h1><ul>
<li><strong>@CookieValue</strong>：用于或者cookie中的指定值</li>
</ul>
<pre><code class="java">(&quot;/testcookie&quot;)
public String testCookie(@CookieValue(&quot;JESSIONID&quot;) String seesionId)&#123;
    System.out.println(sessionId);
    return &quot;success&quot;;
&#125;
</code></pre>
<ul>
<li><strong>@RequestHeader</strong>:用于获取请求头的指定内容</li>
</ul>
<pre><code class="java">(&quot;/testheader&quot;)
public String testCookie(@RequestHeader(value=&quot;Accept-Language&quot;) String header)&#123;
    System.out.println(header);
    return &quot;success&quot;;
&#125;
</code></pre>
<ul>
<li><strong>@SessionAttribute</strong>：用于设置session存储数据,使用时将其注解在Action类上<blockquote>
<p>@<code>SessionAttributes(value=&#123;&quot;user&quot;&#125;,types=&#123;String.class&#125;)</code>表示当使用<code>addAttribute</code>方法加入user时，除了会在request中加入，还会在sessin中也加入user，types指定所有的String类型都加入session中</p>
</blockquote>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>打工不易，想买杯奶茶</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
              <a href="/tags/spring/" rel="tag"># spring</a>
              <a href="/tags/spring-mvc/" rel="tag"># spring mvc</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/05/29/%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0%E2%80%94%E2%80%94Java%E5%9F%BA%E7%A1%80/" rel="prev" title="java基础">
                  <i class="fa fa-chevron-left"></i> java基础
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/06/24/sm%E6%95%B4%E5%90%88/" rel="next" title="Spring mybatis整合">
                  Spring mybatis整合 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18114217号-1 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silverming</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.5m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">37:51</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
