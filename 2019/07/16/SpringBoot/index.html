<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="入门示例配置maven依赖&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt; &lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;          xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring boot">
<meta property="og:url" content="http://yoursite.com/2019/07/16/SpringBoot/index.html">
<meta property="og:site_name" content="Silverming">
<meta property="og:description" content="入门示例配置maven依赖&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt; &lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;          xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-07-16T07:36:31.000Z">
<meta property="article:modified_time" content="2020-12-01T10:41:53.629Z">
<meta property="article:author" content="Silverming">
<meta property="article:tag" content="java">
<meta property="article:tag" content="spring">
<meta property="article:tag" content="spring boot">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yoursite.com/2019/07/16/SpringBoot/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://yoursite.com/2019/07/16/SpringBoot/","path":"2019/07/16/SpringBoot/","title":"Spring boot"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Spring boot | Silverming</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Silverming</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Stay hungry,stay foolish</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%A5%E9%97%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.</span> <span class="nav-text">入门示例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEmaven%E4%BE%9D%E8%B5%96"><span class="nav-number">1.1.</span> <span class="nav-text">配置maven依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.2.</span> <span class="nav-text">创建运行程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A5%E7%88%B6%E5%AD%90%E6%A8%A1%E5%9D%97%E7%9A%84%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AEmaven%E4%BE%9D%E8%B5%96%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">1.3.</span> <span class="nav-text">以父子模块的方式配置maven依赖的方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#EnableAutoConfiguration"><span class="nav-number">2.1.</span> <span class="nav-text">@EnableAutoConfiguration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBootApplication"><span class="nav-number">2.2.</span> <span class="nav-text">@SpringBootApplication</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RestController"><span class="nav-number">2.3.</span> <span class="nav-text">@RestController</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">全局配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%80%BC"><span class="nav-number">3.1.</span> <span class="nav-text">获取自定义属性的值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-number">3.2.</span> <span class="nav-text">类型安全的配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Profile%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">Profile配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88%E6%B5%8B%E8%AF%95"><span class="nav-number">4.</span> <span class="nav-text">SpringBoot整合测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">SpringBoot日志管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE"><span class="nav-number">5.1.</span> <span class="nav-text">自定义日志配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="nav-number">5.2.</span> <span class="nav-text">自定义日志系统</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%B7%A5%E7%A8%8B%E4%B8%BA%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.</span> <span class="nav-text">配置工程为开发模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="nav-number">7.</span> <span class="nav-text">访问静态资源</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89JSON%E8%BD%AC%E6%8D%A2"><span class="nav-number">8.</span> <span class="nav-text">自定义JSON转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">9.</span> <span class="nav-text">自定义拦截器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">10.</span> <span class="nav-text">全局异常处理器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8"><span class="nav-number">11.</span> <span class="nav-text">异步调用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E"><span class="nav-number">12.</span> <span class="nav-text">模版引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E4%B8%AD%E6%95%B4%E5%90%88Freemarker"><span class="nav-number">12.1.</span> <span class="nav-text">SpringBoot中整合Freemarker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88Thymeleaf"><span class="nav-number">12.2.</span> <span class="nav-text">SpringBoot整合Thymeleaf</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88QuartZ"><span class="nav-number">13.</span> <span class="nav-text">SpringBoot整合QuartZ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="nav-number">14.</span> <span class="nav-text">数据库相关操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88JdbcTemplate"><span class="nav-number">14.1.</span> <span class="nav-text">SpringBoot整合JdbcTemplate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88Mybatis"><span class="nav-number">14.2.</span> <span class="nav-text">SpringBoot整合Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#xml%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="nav-number">14.2.1.</span> <span class="nav-text">xml文件方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="nav-number">14.2.2.</span> <span class="nav-text">注解方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">14.3.</span> <span class="nav-text">SpringBoot整合多数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E5%90%88%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="nav-number">14.3.1.</span> <span class="nav-text">整合流程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-number">14.4.</span> <span class="nav-text">SpringBoot事务管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88JPA"><span class="nav-number">14.5.</span> <span class="nav-text">SpringBoot整合JPA</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot%E6%95%B4%E5%90%88Mail"><span class="nav-number">15.</span> <span class="nav-text">SpringBoot整合Mail</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%99%AE%E9%80%9A%E9%82%AE%E4%BB%B6"><span class="nav-number">15.1.</span> <span class="nav-text">发送普通邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%A6%E9%99%84%E4%BB%B6%E7%9A%84%E9%82%AE%E4%BB%B6"><span class="nav-number">15.2.</span> <span class="nav-text">带附件的邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%A8%A1%E7%89%88%E9%82%AE%E4%BB%B6"><span class="nav-number">15.3.</span> <span class="nav-text">发送模版邮件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">16.</span> <span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">16.1.</span> <span class="nav-text">SpringBoot实现文件上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">16.2.</span> <span class="nav-text">批量文件上传</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Silverming</p>
  <div class="site-description" itemprop="description">Wechat:934933088</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">140</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/16/SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Silverming">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silverming">
      <meta itemprop="description" content="Wechat:934933088">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Spring boot | Silverming">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring boot
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-16 15:36:31" itemprop="dateCreated datePublished" datetime="2019-07-16T15:36:31+08:00">2019-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-12-01 18:41:53" itemprop="dateModified" datetime="2020-12-01T18:41:53+08:00">2020-12-01</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>39k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>36 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="入门示例"><a href="#入门示例" class="headerlink" title="入门示例"></a>入门示例</h1><h2 id="配置maven依赖"><a href="#配置maven依赖" class="headerlink" title="配置maven依赖"></a>配置maven依赖</h2><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;xm&lt;/groupId&gt;
    &lt;artifactId&gt;springbootTest&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;!-- 从Spring Boot继承默认值 --&gt;
    &lt;parent&gt;
        &lt;groupId&gt; org.springframework.boot &lt;/groupId&gt;
        &lt;artifactId&gt; spring-boot-starter-parent &lt;/artifactId&gt;
        &lt;version&gt; 2.1.6.RELEASE &lt;/version&gt;
    &lt;/parent&gt;

    &lt;!--添加Web应用程序的典型依赖项 --&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

&lt;/project&gt;
</code></pre>
<span id="more"></span>
<blockquote>
<p>springboot对多种框架提供构建支持，称为starter pom，其中对于SpringMVC的支持是<code>spring-boot-starter-web</code>包，此外还有其他Starter Pom，可以进入parent依赖中查看，也可以在官网文档中查看  </p>
</blockquote>
<h2 id="创建运行程序"><a href="#创建运行程序" class="headerlink" title="创建运行程序"></a>创建运行程序</h2><pre><code class="java">import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController //controller里面的方法都以json格式输出
@EnableAutoConfiguration//自动配置,不需要自己写xml文件
public class Example &#123;

    @RequestMapping(&quot;/&quot;)
    String home()&#123;
        return &quot;Hello World!&quot;;
    &#125;

    //程序入口
    public static void main(String[] args) &#123;
        SpringApplication.run(Example.class,args);
    &#125;
&#125;
</code></pre>
<h2 id="以父子模块的方式配置maven依赖的方式"><a href="#以父子模块的方式配置maven依赖的方式" class="headerlink" title="以父子模块的方式配置maven依赖的方式"></a>以父子模块的方式配置maven依赖的方式</h2><p>首先需要创建父工程，通过父工程点击<code>new module</code>创建子工程，父工程的maven依赖如下：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;xm&lt;/groupId&gt;
    &lt;artifactId&gt;SpringBoot_Parent&lt;/artifactId&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;modules&gt;
        &lt;module&gt;SpringBoot_Child1&lt;/module&gt;
    &lt;/modules&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;!-- Override Spring Data release train provided by Spring Boot --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
                &lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;
                &lt;version&gt;Fowler-SR2&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
                &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

&lt;/project&gt;
</code></pre>
<p>子工程需要依赖父工程，并添加自己所需要的依赖：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;parent&gt;
        &lt;artifactId&gt;SpringBoot_Parent&lt;/artifactId&gt;
        &lt;groupId&gt;xm&lt;/groupId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;artifactId&gt;SpringBoot_Child1&lt;/artifactId&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

&lt;/project&gt;
</code></pre>
<h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><h2 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h2><p>该注解修饰的类将自动进行配置，不再需要xml配置文件，Spring-boot提供了多种自动配置的支持，可以在依赖包中的<code>spring-boot-autoconfigure</code>包中查看支持的所有依赖<br>如果要关闭某些自动配置，可以在注解中使用<code>exclude</code>属性，将不需要自动配置的类写上</p>
<pre><code class="java">//关闭Redis的自动配置
@EnableAutoConfiguration(exclude = RedisAutoConfiguration.class)
</code></pre>
<h2 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h2><p>SpringBoot程序启动需要有一个入口，如果在每个控制器写一个入口会显得很麻烦，可以专门写一个启动类用于Spring启动，需要加上<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>注解，SpringBoot提供<code>SpringBootApplication</code>注解实现上面两个功能</p>
<pre><code class="java">package com.xm.app;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.ComponentScan;

//默认扫描当前包及以下的子包
//@EnableAutoConfiguration //SpringBoot自动配置
//@ComponentScan(&quot;com.xm.controller&quot;)//自动扫描
@SpringBootApplication(scanBasePackages = &#123;&quot;com.xm.controller&quot;&#125;)
public class SpringApplications &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(SpringApplications.class,args);
    &#125;
&#125; 
</code></pre>
<h2 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h2><p>在控制器中，如果没有配置@ResponseBody注解，默认是进行跳转，如果一个控制器中的所有功能都是返回json，可以在类上加上<code>@RestController</code>注解，这样里面的所有方法就都是返回json格式，不再需要一个一个配置注解</p>
<blockquote>
<p>SpringBoot同样支持RestFul风格，方式与SpringMVC一样  </p>
</blockquote>
<h1 id="全局配置文件"><a href="#全局配置文件" class="headerlink" title="全局配置文件"></a>全局配置文件</h1><p>如果不希望使用SpringBoot默认的配置，可以自己创建配置文件，文件名必须是<strong>application</strong>，后缀名可以是properties或者yml,并将文件放置在<strong>resources</strong>目录下</p>
<pre><code class="yaml">server:
  port: 8088
  servlet:
    context-path: /xm
</code></pre>
<p>这样重新启动时，端口号会改为8088，根目录会变成<code>/xm</code></p>
<h2 id="获取自定义属性的值"><a href="#获取自定义属性的值" class="headerlink" title="获取自定义属性的值"></a>获取自定义属性的值</h2><pre><code class="java">package com.xm.controller;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@EnableAutoConfiguration
@Controller
public class BookController &#123;

    @Value(&quot;$&#123;book.author&#125;&quot;)//取值
    private String author;

    @Value(&quot;$&#123;book.name&#125;&quot;)
    private String name;

    @RequestMapping(&quot;/bookInfo&quot;)
    @ResponseBody
    public String showInfo()&#123;
        return author + &quot;:&quot; + name;
    &#125;

    public static void main(String[] args) &#123;
        SpringApplication.run(BookController.class,args);
    &#125;
&#125;
</code></pre>
<h2 id="类型安全的配置"><a href="#类型安全的配置" class="headerlink" title="类型安全的配置"></a>类型安全的配置</h2><p>如果配置文件中有多个属性，每次取值都用value注解比较繁琐，SpringBoot提供基于类型安全的配置方式：<br>通过<code>@ConfigurationProperties</code>指定前缀名，将文件中的属性与Bean相关联，同时Bean中的变量名要跟配置文件中的变量名<strong>一致</strong>，同时提供变量的get和set方法</p>
<pre><code class="java">package com.xm.controller;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@EnableAutoConfiguration
@Controller
@ConfigurationProperties(prefix = &quot;book&quot;)
public class BookController &#123;

    private String author;

    private String name;

    public String getAuthor() &#123;
        return author;
    &#125;

    public void setAuthor(String author) &#123;
        this.author = author;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    @RequestMapping(&quot;/bookInfo&quot;)
    @ResponseBody
    public String showInfo()&#123;
        return author + &quot;:&quot; + name;
    &#125;

    public static void main(String[] args) &#123;
        SpringApplication.run(BookController.class,args);
    &#125;

&#125;
</code></pre>
<h2 id="Profile配置"><a href="#Profile配置" class="headerlink" title="Profile配置"></a>Profile配置</h2><p>当针对不同的环境需要使用不同的配置文件时，可以使用Profile配置，其格式为：<code>application-*.properties</code>(application-prod.properties（生产环境）,application-sit.properties（测试环境）,application-dev.properties（开发环境）)或者yml格式。然后需要在<strong>application.properties</strong>文件中通过<code>string.profiles.active=prod/dev/..</code>来指定使用哪一个配置文件</p>
<pre><code class="yaml"># application-dev.yml
server:
  port: 9999


# application.yml

book:
  author: Toms
  name: SpringBoots

spring:
  profiles:
    active: dev
</code></pre>
<h1 id="SpringBoot整合测试"><a href="#SpringBoot整合测试" class="headerlink" title="SpringBoot整合测试"></a>SpringBoot整合测试</h1><p>首先需要导入测试依赖：</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;
    &lt;version&gt;5.5.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p>测试：</p>
<pre><code class="java">package com.xm.test;

import com.xm.controller.SpringController;
import junit.framework.TestCase;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;

@SpringBootTest(classes = SpringController.class)//测试谁
@RunWith(SpringJUnit4ClassRunner.class)//用什么测试
@WebAppConfiguration
public class TestSpringController &#123;
    @Autowired
    private SpringController springController;//注入

    @Test
    public void test1()&#123;
        TestCase.assertEquals(this.springController.yes(),&quot;hello&quot;);
    &#125;
&#125;
</code></pre>
<h1 id="SpringBoot日志管理"><a href="#SpringBoot日志管理" class="headerlink" title="SpringBoot日志管理"></a>SpringBoot日志管理</h1><p>SpringBoot的日志级别有7个，从低到高分别是：<br><strong>TRACE，DEBUG，INFO，WARN，ERROR，FATAL，OFF</strong>，如果设置了某个日志级别，低于该级别的日志不会输出。<br>SpringBoot默认配置ERROR，WARN和INFO级别的日志输出到控制台</p>
<p>默认情况下，SpringBoot将日志输出到控制台，不会写到日志文件。如果需要将日志写到文件中，需要在SprngBoot配置文件<code>application.properties</code>中设置<code>logging.file</code>或<code>logging.path</code>属性</p>
<ul>
<li>logging.file:设置文件，绝对路径或者相对路径。如：</li>
</ul>
<pre><code class="properties">logging.file = log/my.log(相对）
logging.file = /log/my.log(绝对)
</code></pre>
<ul>
<li>logging.path:设置目录，会在该目录下创建spring.log文件，并写入日志内容</li>
</ul>
<pre><code class="properties">logging.path = /var/log
</code></pre>
<blockquote>
<p>两者不能同时使用，如同时使用，只有logging.file生效，默认日志文件的大小达到10MB会切分一次产生新的日志文件  </p>
</blockquote>
<p>配置示例：</p>
<pre><code class="properties">logging.level.root = WARN
logging.level.org.springframework.web = DEBUG
logging.file = 路径
logging.pattern.console = %d&#123;yyyy/MM/dd-HH:mm:ss&#125;
[%thread] %-5level %logger- %msg%n
[%thread] %-5level %logger- %msg&amp;n
</code></pre>
<h2 id="自定义日志配置"><a href="#自定义日志配置" class="headerlink" title="自定义日志配置"></a>自定义日志配置</h2><p>除了在Springboot中进行日志配置，还可以自己根据使用的日志系统写日志配置文件<br>文件命令建议加上<code>-spring</code>,这样spring boot可以为它添加一些spring boot特有的配置项，不加的情况下需要在全局配置文件中指定自己定义的文件名：</p>
<pre><code class="properties">logging.config = classpath:logging-config.xml
</code></pre>
<h2 id="自定义日志系统"><a href="#自定义日志系统" class="headerlink" title="自定义日志系统"></a>自定义日志系统</h2><p>Spring默认使用的日志是Logback，如果要使用其他类型，需要先对Logback进行排除</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h1 id="配置工程为开发模式"><a href="#配置工程为开发模式" class="headerlink" title="配置工程为开发模式"></a>配置工程为开发模式</h1><p>在开发过程中，每次修改代码后需要重新启动，可以将工程设置为开发模式，代码修改不再需要重新运行，具体做法为导入以下依赖：</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;springloaded&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<h1 id="访问静态资源"><a href="#访问静态资源" class="headerlink" title="访问静态资源"></a>访问静态资源</h1><p>在SpringBoot中访问静态资源跟普通Web项目不太一样，Spring Boot默认的路径是在<code>resources/static</code>和<code>resources/public</code>,也可以自己在全局配置文件中进行配置：</p>
<pre><code class="properties">spring.resources.static-locations=classpath:/static/
</code></pre>
<h1 id="自定义JSON转换"><a href="#自定义JSON转换" class="headerlink" title="自定义JSON转换"></a>自定义JSON转换</h1><p>SpringBoot默认使用Jackson进行json解析，如果希望自定义（如使用FastJson），可以通过以下方式更改：<br>首先导入FastJson包</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
    &lt;version&gt;1.2.58&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>在启动类中注入新配置：</p>
<pre><code class="java">package com.xm.app;

import com.alibaba.fastjson.serializer.SerializerFeature;
import com.alibaba.fastjson.support.config.FastJsonConfig;
import com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.http.HttpMessageConverters;
import org.springframework.context.annotation.Bean;
import org.springframework.http.converter.HttpMessageConverter;

//默认扫描当前包及以下的子包
//@EnableAutoConfiguration //SpringBoot自动配置
//@ComponentScan(&quot;com.xm.controller&quot;)//自动扫描
@SpringBootApplication(scanBasePackages = &quot;com.xm.controller&quot;)
public class SpringApplications&#123;
    @Bean//依赖注入
    public HttpMessageConverters fastJsonMessageConverter()&#123;
        //创建FastJson的消息转换器
        FastJsonHttpMessageConverter converter = new FastJsonHttpMessageConverter();
        //创建FastJson的配置对象
        FastJsonConfig config = new FastJsonConfig();
        //对json数据进行格式化
        config.setSerializerFeatures(SerializerFeature.PrettyFormat);

        converter.setFastJsonConfig(config);
        HttpMessageConverter&lt;?&gt;con = converter;
        return new HttpMessageConverters(con);
    &#125;


    public static void main(String[] args) &#123;
        SpringApplication.run(SpringApplications.class,args);
    &#125;
&#125;
</code></pre>
<blockquote>
<p>对于中文，默认客户端接受不一定使用URTF-8编码，可以在全局配置文件加入如下配置使客户端使用UTF-8编码：<br><code>spring.http.encoding.force = true</code>  </p>
</blockquote>
<p>创建实体类进行验证：</p>
<pre><code class="java">package com.xm.com.xm.pojo;

import com.alibaba.fastjson.annotation.JSONField;

import java.util.Date;

public class Person &#123;
    private Integer id;
    private String name;
    @JSONField(format = &quot;yyyy-MM-dd HH:mm:ss&quot;)
    private Date date;//日期格式化

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public Date getDate() &#123;
        return date;
    &#125;

    public void setDate(Date date) &#123;
        this.date = date;
    &#125;
&#125;
</code></pre>
<pre><code class="java">package com.xm.controller;

import com.xm.com.xm.pojo.Person;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.Date;

@Controller
public class PersonController &#123;

    @ResponseBody
    @RequestMapping(&quot;/show&quot;)
    public Object show()&#123;
        Person person = new Person();
        person.setId(66);
        person.setName(&quot;小明&quot;);
        person.setDate(new Date());
        return person;
    &#125;
&#125;
</code></pre>
<h1 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h1><p>通过继承<strong>WebMvcConfigurer</strong>接口，对里面的<code>addInterceptors</code>方法重写，根据自己需要实现的拦截功能进行定义：</p>
<pre><code class="java">package com.xm.interceptor;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Configuration//声明这是一个配置
public class MyInterceptor implements WebMvcConfigurer &#123;
    @Override
    public void addInterceptors(InterceptorRegistry registry) &#123;
        HandlerInterceptor interceptor = new HandlerInterceptor() &#123;
            @Override
            public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
                System.out.println(&quot;自定义拦截器&quot;);
                return true;
            &#125;
        &#125;;
        registry.addInterceptor(interceptor).addPathPatterns(&quot;/**&quot;);
    &#125;
&#125;
</code></pre>
<blockquote>
<p>在启动项中扫描的包上需要加入当前包  </p>
</blockquote>
<h1 id="全局异常处理器"><a href="#全局异常处理器" class="headerlink" title="全局异常处理器"></a>全局异常处理器</h1><p>SpringBoot使用Aop的思想进行异常处理</p>
<pre><code class="java">package com.xm.exceptionHandler;

import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.HashMap;
import java.util.Map;

@ControllerAdvice
public class GlobalExceptionHandler &#123;
    @ExceptionHandler(Exception.class)
    @ResponseBody
    public Map&lt;String,Object&gt; handleException(Exception exception)&#123;
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;errorCode&quot;,500);
        map.put(&quot;errorMag&quot;,exception.toString());
        return map;
    &#125;
&#125;
</code></pre>
<h1 id="异步调用"><a href="#异步调用" class="headerlink" title="异步调用"></a>异步调用</h1><p>在项目中当需要访问其他接口较慢或者做耗时工作时，如果不希望程序一直卡着而是能够并行处理，可以使用多线程来并行处理任务<br>SpringBoot提供了异步处理方式<code>@Async</code></p>
<ol>
<li>创建服务层接口及实现类<br>在相应需要开启子线程的方法上使用<code>@Async</code>注解</li>
</ol>
<pre><code class="java">package com.xm.service;

import java.util.concurrent.Future;

public interface AsyncService &#123;
    Future&lt;String&gt; doTask1() throws Exception;
    Future&lt;String&gt; doTask2() throws Exception;
    Future&lt;String&gt; doTask3() throws Exception;
&#125;
</code></pre>
<pre><code class="java">package com.xm.service;

import org.springframework.scheduling.annotation.Async;
import org.springframework.scheduling.annotation.AsyncResult;
import org.springframework.stereotype.Service;

import java.util.Random;
import java.util.concurrent.Future;

@Service
public class AsyncServiceImpl implements AsyncService &#123;

    private static Random random = new Random();

    @Async//标示开启子进程异步调用
    @Override
    public Future&lt;String&gt; doTask1() throws Exception &#123;
        System.out.println(&quot;任务一开始执行&quot;);
        long start = System.currentTimeMillis();
        Thread.sleep(random.nextInt(10000));
        long end = System.currentTimeMillis();
        System.out.println(&quot;任务一结束，耗时：&quot;+(end-start)+&quot;毫秒&quot;);
        return new AsyncResult&lt;&gt;(&quot;任务一结束&quot;);
    &#125;

    @Async
    @Override
    public Future&lt;String&gt; doTask2() throws Exception &#123;
        System.out.println(&quot;任务二开始执行&quot;);
        long start = System.currentTimeMillis();
        Thread.sleep(random.nextInt(10000));
        long end = System.currentTimeMillis();
        System.out.println(&quot;任务二结束，耗时：&quot;+(end-start)+&quot;毫秒&quot;);
        return new AsyncResult&lt;&gt;(&quot;任务二结束&quot;);
    &#125;

    @Async
    @Override
    public Future&lt;String&gt; doTask3() throws Exception &#123;
        System.out.println(&quot;任务三开始执行&quot;);
        long start = System.currentTimeMillis();
        Thread.sleep(random.nextInt(10000));
        long end = System.currentTimeMillis();
        System.out.println(&quot;任务三结束，耗时：&quot;+(end-start)+&quot;毫秒&quot;);
        return new AsyncResult&lt;&gt;(&quot;任务三结束&quot;);
    &#125;
&#125;
</code></pre>
<ol start="2">
<li>创建控制器调用服务层</li>
</ol>
<pre><code class="java">package com.xm.controller;

import com.xm.service.AsyncService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.concurrent.Future;

@Controller
public class SyncController &#123;

    @Autowired
    private AsyncService asyncService;

    @RequestMapping(&quot;/async&quot;)
    @ResponseBody
    public String asyncTest() throws Exception &#123;

        long start = System.currentTimeMillis();

        Future&lt;String&gt; task1 = asyncService.doTask1();
        Future&lt;String&gt; task2 = asyncService.doTask2();
        Future&lt;String&gt; task3 = asyncService.doTask3();

        while (true)&#123;
            if(task1.isDone() &amp;&amp; task2.isDone() &amp;&amp; task3.isDone())&#123;
                break;
            &#125;
            Thread.sleep(1000);
        &#125;

        long end = System.currentTimeMillis();
        return &quot;全部执行完成，总耗时：&quot;+(end-start)+&quot;毫秒&quot;;
    &#125;
&#125;
</code></pre>
<ol start="3">
<li>在启动类上添加<code>@EnableAsync</code>开启异步执行，同时扫描的包要加上service包</li>
</ol>
<h1 id="模版引擎"><a href="#模版引擎" class="headerlink" title="模版引擎"></a>模版引擎</h1><p>SpringBoot官方对于动态页面推荐使用模版引擎，动态引擎有：FreeMarker、Thymeleaf、 Mustache等</p>
<h2 id="SpringBoot中整合Freemarker"><a href="#SpringBoot中整合Freemarker" class="headerlink" title="SpringBoot中整合Freemarker"></a>SpringBoot中整合Freemarker</h2><ol>
<li>首先导入freemarker依赖</li>
</ol>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>创建<code>ftl</code>文件<br>SpringBoot默认会在<code>resources/templates</code>目录下获取后缀名为<code>.ftl</code>的模版引擎文件</li>
</ol>
<pre><code class="html">&lt;html&gt;
&lt;head&gt; Freemarker模版引擎&lt;/head&gt;
&lt;body&gt;
    $&#123;name&#125;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ol start="3">
<li>创建控制器传值</li>
</ol>
<pre><code class="java">package com.xm.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class TemplatesController &#123;
    @RequestMapping(&quot;/index&quot;)
    public String index(Model model)&#123;
        model.addAttribute(&quot;name&quot;,&quot;小明&quot;);
        return &quot;show&quot;;//会自动到resources/templates目录下找
    &#125;
&#125;
</code></pre>
<blockquote>
<p>如果要改变Freemarker的默认配置，可以在全局配置文件中做自定义配置  </p>
</blockquote>
<h2 id="SpringBoot整合Thymeleaf"><a href="#SpringBoot整合Thymeleaf" class="headerlink" title="SpringBoot整合Thymeleaf"></a>SpringBoot整合Thymeleaf</h2><ol>
<li>导入<code>spring-boot-starter-thymeleaf</code>依赖</li>
</ol>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>创建html文件<br>Thymeleaf默认的页面文件是html文件，同时其有自己的语法</li>
</ol>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Thymeleaf&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 th:text=&quot;$&#123;name&#125;&quot;&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>剩下的跟上一种一样</p>
<h1 id="SpringBoot整合QuartZ"><a href="#SpringBoot整合QuartZ" class="headerlink" title="SpringBoot整合QuartZ"></a>SpringBoot整合QuartZ</h1><p>QuartZ是一个用于任务调度的框架</p>
<ol>
<li>创建定时任务：<br>对需要定时执行的任务使用<code>@Scheduled</code>注解,同时需要将该类放入容器，使用<code>@Component</code></li>
</ol>
<pre><code class="java">package com.xm.job;

import org.springframework.scheduling.annotation.Scheduled;

import java.text.SimpleDateFormat;
import java.util.Date;

public class MyJob &#123;

    @Scheduled(fixedRate = 1000)//每隔多久执行一次任务，单位毫秒
    public void run()&#123;
        System.out.println(new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(new Date()));
    &#125;
&#125;
</code></pre>
<ol start="2">
<li>在启动类中开启任务调度：使用<code>@EnableScheduling</code>,同时扫描包要指明</li>
</ol>
<h1 id="数据库相关操作"><a href="#数据库相关操作" class="headerlink" title="数据库相关操作"></a>数据库相关操作</h1><h2 id="SpringBoot整合JdbcTemplate"><a href="#SpringBoot整合JdbcTemplate" class="headerlink" title="SpringBoot整合JdbcTemplate"></a>SpringBoot整合JdbcTemplate</h2><p>首先需要导入相关依赖：</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.16&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>创建相应的pojo，dao和service</p>
<pre><code class="java">package com.xm.pojo;

public class User &#123;
    private Integer id;
    private String name;
    private Integer age;
      //省略get，set方法
&#125;
</code></pre>
<pre><code class="java">package com.xm.dao;

import com.xm.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class UserDao &#123;

    @Autowired
    private JdbcTemplate jdbcTemplate;

    public void addUser(User user)&#123;
        jdbcTemplate.update(&quot;insert into users(name,age) values (?,?)&quot;, new Object[]&#123;
                        user.getName(),
                        user.getAge()
                &#125;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">package com.xm.service;

import com.xm.dao.UserDao;
import com.xm.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class UserService &#123;

    @Autowired
    private UserDao userDao;

    public void saveUser(User user)&#123;
        userDao.addUser(user);
    &#125;
&#125;
</code></pre>
<p>创建控制器：</p>
<pre><code class="java">package com.xm.controller;


import com.xm.pojo.User;
import com.xm.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class UserController &#123;

    @Autowired
    private UserService userService;

    @RequestMapping(&quot;/savaUser&quot;)
    @ResponseBody
    public String save()&#123;
        User user = new User();
        user.setName(&quot;潘多拉&quot;);
        user.setAge(666);

        userService.saveUser(user);

        return &quot;success&quot;;
    &#125;
&#125;
</code></pre>
<p>在全局配置文件中设置连接数据库的相关信息：</p>
<pre><code class="properties">spring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password= root
spring.datasource.url = jdbc:mysql://localhost:3306/spring
</code></pre>
<h2 id="SpringBoot整合Mybatis"><a href="#SpringBoot整合Mybatis" class="headerlink" title="SpringBoot整合Mybatis"></a>SpringBoot整合Mybatis</h2><h3 id="xml文件方式"><a href="#xml文件方式" class="headerlink" title="xml文件方式"></a>xml文件方式</h3><ol>
<li>添加依赖：</li>
</ol>
<pre><code class="xml">&lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.16&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;2.0.1&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
        &lt;artifactId&gt;druid&lt;/artifactId&gt;
        &lt;version&gt;1.1.19&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- 分页插件--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
        &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;1.2.12&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.3.7&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.3.7&lt;/version&gt;
            &lt;dependencies&gt;
                &lt;dependency&gt;
                    &lt;groupId&gt;mysql&lt;/groupId&gt;
                    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
                    &lt;version&gt;5.1.47&lt;/version&gt;
                &lt;/dependency&gt;
            &lt;/dependencies&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<ol start="2">
<li>通过逆向工程创建pojo，mapper和dao,手动添加相应的注解</li>
<li>将生成的<code>xxxMapper.xml</code>文件放到sources目录下</li>
<li>在resources目录下创建mybatis配置文件，只需写入前提配置即可</li>
<li>创建全局配置文件进行配置</li>
</ol>
<pre><code class="yaml">spring:
  datasource:
    name: test
    url: jdbc:mysql://localhost:3306/spring
    username: root
    password: root
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    dbcp2:
      initial-size: 1
      max-wait-millis: 60000
      min-idle: 1
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query: select &#39;x&#39;
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
      pool-prepared-statements: true
      max-open-prepared-statements: 20

mybatis:
  mapper-locations: classpath:mapper/UsersMapper.xml
  config-location: classpath:mybatis/mybatis-config.xml

pagehelper:
  reasonable: true
  support-methods-arguments: true
  params: count=countSql
  helper-dialect: mysql
</code></pre>
<ol start="6">
<li>开发服务层和控制器层</li>
</ol>
<pre><code class="java">package com.xm.service;

import com.github.pagehelper.PageHelper;
import com.xm.dao.UsersMapper;
import com.xm.pojo.Users;
import com.xm.pojo.UsersExample;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class UsersServiceImpl implements UsersService &#123;

    @Autowired
    private UsersMapper usersMapper;

    @Override
    public void addUser(Users users) &#123;
        usersMapper.insert(users);
    &#125;

    @Override
    public List&lt;Users&gt; findUsers(int page, int rows) &#123;
        UsersExample example = new UsersExample();
        PageHelper.startPage(page,rows);//相当于拦截器
        List&lt;Users&gt; users = usersMapper.selectByExample(example);
        return users;
    &#125;
&#125;
</code></pre>
<pre><code class="java">package com.xm.controller;

import com.xm.pojo.Users;
import com.xm.service.UsersService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.List;

@Controller
public class UsersController &#123;

    @Autowired
    private UsersService usersService;

    @RequestMapping(&quot;/saveUser&quot;)
    @ResponseBody
    public String saveUsers()&#123;
        Users users = new Users();
        users.setAge(12);
        users.setName(&quot;阿拉斯加&quot;);

        usersService.addUser(users);
        return &quot;success&quot;;
    &#125;

    @RequestMapping(&quot;/findUsers/&#123;page&#125;/&#123;rows&#125;&quot;)
    @ResponseBody
    public List&lt;Users&gt; findUsers(@PathVariable int page,@PathVariable int rows)&#123;
        return usersService.findUsers(page,rows);
    &#125;
&#125;
</code></pre>
<h3 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h3><p>这种方式不需要mybatis配置文件和mapper的xml文件，主要修改的地方为映射类：<br>在对应的方法上使用相应的注解并自己写上sql语句，同时方法中的变量使用<code>@Param</code>使其对应上</p>
<pre><code class="java">package com.xm.dao;

import com.xm.pojo.Users;
import com.xm.pojo.UsersExample;
import java.util.List;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;
import org.springframework.stereotype.Repository;

@Repository
public interface UsersMapper &#123;

    @Select(&quot;select * from users where name=#&#123;name&#125;&quot;)
    Users findUserByName(@Param(&quot;name&quot;) String name);

    @Insert(&quot;insert into users(name,age) values(#&#123;name&#125;,#&#123;age&#125;)&quot;)
    void addUser(@Param(&quot;name&quot;) String name,@Param(&quot;age&quot;) Integer age);
&#125;
</code></pre>
<h2 id="SpringBoot整合多数据源"><a href="#SpringBoot整合多数据源" class="headerlink" title="SpringBoot整合多数据源"></a>SpringBoot整合多数据源</h2><p>在项目中通常会进行数据库拆分或者是引入其他数据库，从而需要配置多个数据源<br>区分多个数据源的方式：</p>
<ol>
<li>通过包来区分：com.db1.mapper,com.db2.mapper</li>
<li>使用注解区分:需要使用大量注解，一般不推荐使用</li>
</ol>
<h3 id="整合流程："><a href="#整合流程：" class="headerlink" title="整合流程："></a>整合流程：</h3><ol>
<li>在全局配置文件中配置多个数据源</li>
</ol>
<pre><code class="properties">#配置两个数据源
spring.datasource.db1.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.db1.username=root
spring.datasource.db1.password=root
#2.0之后的版本需要使用jdbc-url
spring.datasource.db1.jdbc-url=jdbc:mysql://localhost:3306/spring

spring.datasource.db2.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.db2.username=root
spring.datasource.db2.password=root
spring.datasource.db2.jdbc-url=jdbc:mysql://localhost:3306/sm
</code></pre>
<ol start="2">
<li>对每个数据源进行配置<br>DataSource1.java:</li>
</ol>
<pre><code class="java">package com.xm.datasource;


import org.apache.ibatis.session.SqlSessionFactory;
import org.mybatis.spring.SqlSessionFactoryBean;
import org.mybatis.spring.SqlSessionTemplate;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.jdbc.DataSourceBuilder;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Primary;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;

import javax.sql.DataSource;

@Configuration //注册到Spring容器中
//扫描对应的mapper的包还有对应sqlSessionFactory的引用
@MapperScan(basePackages=&quot;com.xm.db1.mapper&quot;,sqlSessionFactoryRef = &quot;db1SqlSessionFactory&quot;)
public class DataSource1 &#123;

    /**
     * 配置db1数据库，生成数据源对象
     * @return
     */
    @Bean(name = &quot;db1Datasource&quot;)
    @ConfigurationProperties(prefix = &quot;spring.datasource.db1&quot;)//对应全局配置文件前缀
    public DataSource testDataSource()&#123;
        return DataSourceBuilder.create().build();
    &#125;

    /**
     * 创建SqlSessionFactory
     * @param dataSource
     * @return
     * @throws Exception
     */
    @Bean(name=&quot;db1SqlSessionFactory&quot;)
    @Primary //自动装配时优先使用
    public SqlSessionFactory testSqlSessionFactory(@Qualifier(&quot;db1Datasource&quot;)DataSource dataSource)
            throws Exception &#123;
        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();
        bean.setDataSource(dataSource);
        return bean.getObject();
    &#125;

    /**
     * 配置事务管理
     * @param dataSource
     * @return
     */
    @Bean(name=&quot;db1TransactionManager&quot;)
    public DataSourceTransactionManager testTransactionManager(
            @Qualifier(&quot;db1Datasource&quot;)DataSource dataSource)&#123;
        return new DataSourceTransactionManager(dataSource);
    &#125;

    /**
     * 整合数据库和mybatis时用于实现数据库操作
     * @param sqlSessionFactory
     * @return
     */
    @Bean(name=&quot;db1SqlSessionTemplate&quot;)
    public SqlSessionTemplate testSqlSessionTemplate(
            @Qualifier(&quot;db1SqlSessionFactory&quot;) SqlSessionFactory sqlSessionFactory)&#123;
        return new SqlSessionTemplate(sqlSessionFactory);
    &#125;
&#125;
</code></pre>
<p>另一个数据源大致相同，只需要相应的改成2就可以了<br>3. 创建mapper文件，需要将两个数据源放在不用的包中<br>需要注意注解指定相应的数据源</p>
<pre><code class="java">package com.xm.db1.mapper;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Param;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Repository;

@Qualifier(&quot;db1SqlSessionFactory&quot;)
@Repository(&quot;db1UserMapper&quot;)
public interface UsersMapper &#123;

    @Insert(&quot;insert into users(name,age) values(#&#123;name&#125;,#&#123;age&#125;)&quot;)
    void addUser(@Param(&quot;name&quot;)String name, @Param(&quot;age&quot;)Integer age);
&#125;
</code></pre>
<ol start="4">
<li>开发相应的service</li>
</ol>
<pre><code class="java">package com.xm.db1.service;

import com.xm.db1.mapper.UsersMapper;
import com.xm.db1.pojo.Users;
import org.springframework.stereotype.Service;

import javax.annotation.Resource;

@Service(&quot;db1UsersService&quot;)
public class UsersServiceImpl implements UsersService &#123;

    @Resource(name = &quot;db1UserMapper&quot;)
    private UsersMapper usersMapper;

    @Override
    public void saveUser(Users users) &#123;
        usersMapper.addUser(users.getName(),users.getAge());
    &#125;
&#125;
</code></pre>
<ol start="5">
<li>创建控制器层</li>
</ol>
<pre><code class="java">import org.springframework.web.bind.annotation.ResponseBody;

import javax.annotation.Resource;

@Controller
public class IndexController &#123;

    @Resource(name = &quot;db1UsersService&quot;)//对应不同的service
    private UsersService usersService1;

    @Resource(name = &quot;db2UsersService&quot;)
    private com.xm.db2.service.UsersService usersService2;

    @RequestMapping(&quot;/addUser&quot;)
    @ResponseBody
    public String addUser()&#123;
        Users users1 = new Users();
        users1.setName(&quot;哈士奇&quot;);
        users1.setAge(111);

        usersService1.saveUser(users1);
        return &quot;OK&quot;;
    &#125;
&#125;
</code></pre>
<h2 id="SpringBoot事务管理"><a href="#SpringBoot事务管理" class="headerlink" title="SpringBoot事务管理"></a>SpringBoot事务管理</h2><p>在SpringBoot中推荐使用<code>@Transactional</code>注解声明事务管理，只需要在需要开启事务的方法上加上即开启事务</p>
<h2 id="SpringBoot整合JPA"><a href="#SpringBoot整合JPA" class="headerlink" title="SpringBoot整合JPA"></a>SpringBoot整合JPA</h2><p>jpa是一种数据持久化的规范，其实现最受欢迎的有Hibernate，Springboot也针对jpa做了实现：其可以根据实体类自动生成数据库表</p>
<ol>
<li>导入依赖</li>
</ol>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>全局配置文件配置数据库连接和JPA</li>
</ol>
<pre><code class="properties">spring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password= root
spring.datasource.url = jdbc:mysql://localhost:3306/spring

# 让控制器输出json字符串格式
spring.jackson.serialization.indent-output=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jooq.sql-dialect=MySQL5Dialect
</code></pre>
<ol start="3">
<li>创建实体类，对实体类使用<code>Entity</code>注解表示自动生成表<br>生成的表的表名默认和实体类的类名相同，可以通过使用注解<code>@Table(name=&quot;xxx&quot;</code>指定表名<br>对于需要作为表中主键的属性，使用<code>@Id</code>注解，同时对于主键上的值的生成规则做指定：<br>使用<code>@GenerateValue(strategy=GenerationType.xxxx</code>注解</li>
</ol>
<ul>
<li>AUTO表示自动生成</li>
<li>IDENTITY表示自动增长<br>对于其他的属性，默认属性名跟字段名相同，可以使用<code>@Column(name=&quot;xx&quot;)</code>注解指明字段名，如果字段不允许为空，可以设置<code>@Column(nullable=false)</code></li>
</ul>
<pre><code class="java">package com.xm.pojo;


import javax.persistence.*;
import java.util.Date;

@Entity
@Table(name=&quot;t_user&quot;)
public class User &#123;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String name;
    private Integer age;
    private Date birthday;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public Integer getAge() &#123;
        return age;
    &#125;

    public void setAge(Integer age) &#123;
        this.age = age;
    &#125;

    public Date getBirthday() &#123;
        return birthday;
    &#125;

    public void setBirthday(Date birthday) &#123;
        this.birthday = birthday;
    &#125;
&#125;
</code></pre>
<ol start="4">
<li>创建Dao层<br>只需要创建一个接口并且继承<code>JpaRepository</code>，这个子类提供了增删改查的功能，它有两个范型，第一个是实体类，第二个是实体类中主键属性的类型</li>
</ol>
<pre><code class="java">package com.xm.dao;

import com.xm.pojo.User;
import org.springframework.data.jpa.repository.JpaRepository;

public interface UserDao extends JpaRepository&lt;User, Integer&gt; &#123;
&#125;
</code></pre>
<ol start="5">
<li>service层和controller层</li>
</ol>
<pre><code class="java">package com.xm.service;

import com.xm.dao.UserDao;
import com.xm.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class UserServiceImpl implements UserService &#123;

    @Autowired
    private UserDao userDao;

    @Override
    public void addUser(User user) &#123;
        userDao.save(user);
    &#125;
&#125;

@RestController
public class UserController &#123;

    @Autowired
    private UserService userService;

    @RequestMapping(&quot;/saveUser&quot;)
    public String saveUser()&#123;
        User user = new User();
        user.setName(&quot;巴啦啦小魔仙&quot;);
        user.setAge(6);
        user.setBirthday(new Date());

        userService.addUser(user);
        return &quot;OK&quot;;
    &#125;
&#125;
</code></pre>
<ol start="6">
<li>启动类需要使用相应的注解扫描</li>
</ol>
<pre><code class="java">package com.xm.app;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.domain.EntityScan;
import org.springframework.data.jpa.repository.config.EnableJpaRepositories;

@SpringBootApplication(scanBasePackages = &quot;com.xm&quot;)
@EntityScan(&quot;com.xm.pojo&quot;)//扫描实体类从而生成表
@EnableJpaRepositories(&quot;com.xm.dao&quot;)//扫描dao
public class SpringBootApp &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(SpringBootApp.class,args);
    &#125;
&#125;
</code></pre>
<blockquote>
<p>未解决问题：启动后出现异常：java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration.pageableCustomizer<br>无法正常启动  </p>
</blockquote>
<h1 id="SpringBoot整合Mail"><a href="#SpringBoot整合Mail" class="headerlink" title="SpringBoot整合Mail"></a>SpringBoot整合Mail</h1><h2 id="发送普通邮件"><a href="#发送普通邮件" class="headerlink" title="发送普通邮件"></a>发送普通邮件</h2><p>导入<code>spring-boot-starter-mail</code>依赖<br>配置全局配置文件</p>
<pre><code class="properties">spring.mail.host=smtp.qq.com
spring.mail.username=934933088@qq.com
# 授权码,在qq邮箱设置里获取
spring.mail.password=xxxxx
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
</code></pre>
<p>读取邮件发送者：</p>
<pre><code class="java">package com.xm.mail;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class EmailConfig &#123;

    @Value(&quot;$&#123;spring.mail.username&#125;&quot;)
    private String emailFrom;

    public String getEmailFrom()&#123;
        return emailFrom;
    &#125;

    public void setEmailFrom(String emailFrom)&#123;
        this.emailFrom = emailFrom;
    &#125;
&#125;
</code></pre>
<p>服务层实现：</p>
<pre><code class="java">package com.xm.mail;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

@Service
public class EmailServiceImpl implements EmailService &#123;

    @Autowired
    private EmailConfig emailConfig;

    @Autowired
    private JavaMailSender mailSender;

    @Override
    public void sendSimpleMail(String sendTo, String title, String content) &#123;
        //简单邮件的发送
        SimpleMailMessage message = new SimpleMailMessage();//构造邮件实体类
        message.setFrom(emailConfig.getEmailFrom());
        message.setTo(sendTo);
        message.setSubject(title);
        message.setText(content);

        mailSender.send(message);//发送邮件
    &#125;
&#125;
</code></pre>
<h2 id="带附件的邮件"><a href="#带附件的邮件" class="headerlink" title="带附件的邮件"></a>带附件的邮件</h2><pre><code class="java">@Override
public void sendAttachmentMail(String sendTo, String title, String content, File file) &#123;
    MimeMessage msg = mailSender.createMimeMessage();//将邮件封装成对象

    try &#123;
        MimeMessageHelper helper = new MimeMessageHelper(msg,true);//设置为multipart格式
        helper.setFrom(emailConfig.getEmailFrom());
        helper.setTo(sendTo);
        helper.setSubject(title);
        helper.setText(content);

        FileSystemResource resource = new FileSystemResource(file);
        helper.addAttachment(&quot;附件&quot;,resource);
    &#125; catch (MessagingException e) &#123;
        e.printStackTrace();
    &#125;
    mailSender.send(msg);
&#125;
</code></pre>
<pre><code class="java">@RequestMapping(&quot;/sendFileMail&quot;)
@ResponseBody
public String sendAttachmentEmail()&#123;
    File file = new File(&quot;SpringBoot_Child5/src/main/resources/static/66.txt&quot;);
    emailService.sendAttachmentMail(&quot;934933088@qq.com&quot;,&quot;hello&quot;,&quot;看文件&quot;,file);
    return &quot;success&quot;;
&#125;
</code></pre>
<h2 id="发送模版邮件"><a href="#发送模版邮件" class="headerlink" title="发送模版邮件"></a>发送模版邮件</h2><p>需要导入模版引擎,同时在resources&#x2F;templates目录下创建模版<br>service层：</p>
<pre><code class="java">@Service
public class EmailServiceImpl implements EmailService &#123;

    @Autowired
    private EmailConfig emailConfig;

    @Autowired
    private JavaMailSender mailSender;

    @Autowired
    private FreeMarkerConfigurer freeMarkerConfigurer;
      
      @Override
    public void sendTemplateMail(String sendTo, String title, String info) &#123;
          //info为模版的文件名（包含后缀）
        MimeMessage message = mailSender.createMimeMessage();
        try &#123;
            MimeMessageHelper helper = new MimeMessageHelper(message,true);
            helper.setFrom(emailConfig.getEmailFrom());
            helper.setTo(sendTo);
            helper.setSubject(title);

            //封装模版使用的数据
            Map&lt;String,Object&gt; model = new HashMap&lt;&gt;();
            model.put(&quot;username&quot;,&quot;小红&quot;);

            //得到模版
            Template template = freeMarkerConfigurer.getConfiguration().getTemplate(info);
            String html = FreeMarkerTemplateUtils.processTemplateIntoString(template, model);

            helper.setText(html,true);
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        mailSender.send(message);
    &#125;
&#125;
</code></pre>
<p>控制器：</p>
<pre><code class="java">@RequestMapping(&quot;/sendTemplateEmail&quot;)
@ResponseBody
public String sendTemplateEmail()&#123;
    emailService.sendTemplateMail(&quot;934933088@qq.com&quot;,&quot;模版邮箱&quot;,&quot;info.html&quot;);
    return &quot;success&quot;;
&#125;
</code></pre>
<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><h2 id="SpringBoot实现文件上传"><a href="#SpringBoot实现文件上传" class="headerlink" title="SpringBoot实现文件上传"></a>SpringBoot实现文件上传</h2><p>依赖web包之后，文件上传的包就自动依赖上了<br>如果需要控制上传文件的大小，可以通过全局配置文件的设置</p>
<pre><code class="properties">#上传单个文件的大小
spring.servlet.multipart.max-file-size=500MB
#上传全部文件的总大小
spring.servlet.multipart.max-request-size= 500MB
</code></pre>
<ol>
<li>使用模版引擎编写文件上传页面</li>
</ol>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;文件上传&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;文件上传&lt;/h2&gt;
    &lt;hr/&gt;
    &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; action=&quot;/upload&quot;&gt;
        &lt;p&gt;
            文件&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;
        &lt;/p&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ol start="2">
<li>实现文件上传控制器</li>
</ol>
<pre><code class="java">package com.xm.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpServletRequest;
import java.io.File;
import java.io.IOException;
import java.util.UUID;

@Controller
public class UploadController &#123;

    //页面不能直接访问，需要通过控制器跳转
    @RequestMapping(&quot;/toUpload&quot;)
    public String toUpload()&#123;
        return &quot;upload&quot;;
    &#125;

    @RequestMapping(value = &quot;/upload&quot;,method = RequestMethod.POST)
    @ResponseBody
    public String uploadFile(MultipartFile file, HttpServletRequest request)&#123;

        //创建文件在服务器端的存放路径
        String dir = request.getServletContext().getRealPath(&quot;/upload&quot;);
        File fileDir = new File(dir);
        if(!fileDir.exists())
            fileDir.mkdirs();
        //生成文件在服务器端存放的名字
        String fileSuffix = file.getOriginalFilename().substring(file.getOriginalFilename().lastIndexOf(&quot;.&quot;));
        String fileName = UUID.randomUUID().toString()+fileSuffix;
        File files = new File(fileDir+&quot;/&quot;+fileName);
        //上传
        try &#123;
            file.transferTo(files);
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
            return &quot;上传失败&quot;;
        &#125;
        return &quot;success&quot;;
    &#125;
&#125;
</code></pre>
<h2 id="批量文件上传"><a href="#批量文件上传" class="headerlink" title="批量文件上传"></a>批量文件上传</h2><pre><code class="java">@RequestMapping(value = &quot;/upload/batch&quot;,method = RequestMethod.POST)
@ResponseBody
public String uploadFiles(MultipartFile[] files,HttpServletRequest request)&#123;
    //创建文件在服务器端的存放路径
    String dir = request.getServletContext().getRealPath(&quot;/upload&quot;);
    File fileDir = new File(dir);
    if(!fileDir.exists())
        fileDir.mkdirs();

    //遍历数组
    for(int i=0;i&lt;files.length;i++)&#123;
        String fileSuffix = files[i].getOriginalFilename().substring(files[i].getOriginalFilename().lastIndexOf(&quot;.&quot;));
        String fileName = UUID.randomUUID().toString()+fileSuffix;
        File file = new File(fileDir+&quot;/&quot;+fileName);
        //上传
        try &#123;
            files[i].transferTo(file);
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    return &quot;success&quot;;
&#125;
</code></pre>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>打工不易，想买杯奶茶</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="https://qiniu.xiaoming.net.cn/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="Silverming 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
              <a href="/tags/spring/" rel="tag"># spring</a>
              <a href="/tags/spring-boot/" rel="tag"># spring boot</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/07/12/Redis%E9%9B%86%E7%BE%A4/" rel="prev" title="Redis集群">
                  <i class="fa fa-chevron-left"></i> Redis集群
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/07/21/Nginx%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%92%8C%E6%A8%A1%E5%9D%97/" rel="next" title="Nginx基本配置和模块">
                  Nginx基本配置和模块 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18114217号-1 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silverming</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.4m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">36:04</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
